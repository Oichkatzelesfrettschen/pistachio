%!PS-Adobe-2.0
%%Creator: dvips 5.83 (MiKTeX 1.20b) Copyright 1998 Radical Eye Software
%%Title: l4-86-x0.dvi
%%CreationDate: Sat Aug 28 14:25:11 1999
%%Pages: 39
%%PageOrder: Ascend
%%BoundingBox: 0 0 596 842
%%DocumentFonts: Times-Roman Times-Bold Times-Italic Helvetica
%%+ Times-BoldItalic
%%EndComments
%DVIPSWebPage: (www.radicaleye.com)
%DVIPSCommandLine: dvips l4-86-x0
%DVIPSParameters: dpi=600, compressed
%DVIPSSource:  TeX output 1999.08.28:1425
%%BeginProcSet: texc.pro
%!
/TeXDict 300 dict def TeXDict begin/N{def}def/B{bind def}N/S{exch}N/X{S
N}B/A{dup}B/TR{translate}N/isls false N/vsize 11 72 mul N/hsize 8.5 72
mul N/landplus90{false}def/@rigin{isls{[0 landplus90{1 -1}{-1 1}ifelse 0
0 0]concat}if 72 Resolution div 72 VResolution div neg scale isls{
landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div hsize
mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul TR[
matrix currentmatrix{A A round sub abs 0.00001 lt{round}if}forall round
exch round exch]setmatrix}N/@landscape{/isls true N}B/@manualfeed{
statusdict/manualfeed true put}B/@copies{/#copies X}B/FMat[1 0 0 -1 0 0]
N/FBB[0 0 0 0]N/nn 0 N/IEn 0 N/ctr 0 N/df-tail{/nn 8 dict N nn begin
/FontType 3 N/FontMatrix fntrx N/FontBBox FBB N string/base X array
/BitMaps X/BuildChar{CharBuilder}N/Encoding IEn N end A{/foo setfont}2
array copy cvx N load 0 nn put/ctr 0 N[}B/sf 0 N/df{/sf 1 N/fntrx FMat N
df-tail}B/dfs{div/sf X/fntrx[sf 0 0 sf neg 0 0]N df-tail}B/E{pop nn A
definefont setfont}B/Cw{Cd A length 5 sub get}B/Ch{Cd A length 4 sub get
}B/Cx{128 Cd A length 3 sub get sub}B/Cy{Cd A length 2 sub get 127 sub}
B/Cdx{Cd A length 1 sub get}B/Ci{Cd A type/stringtype ne{ctr get/ctr ctr
1 add N}if}B/id 0 N/rw 0 N/rc 0 N/gp 0 N/cp 0 N/G 0 N/CharBuilder{save 3
1 roll S A/base get 2 index get S/BitMaps get S get/Cd X pop/ctr 0 N Cdx
0 Cx Cy Ch sub Cx Cw add Cy setcachedevice Cw Ch true[1 0 0 -1 -.1 Cx
sub Cy .1 sub]/id Ci N/rw Cw 7 add 8 idiv string N/rc 0 N/gp 0 N/cp 0 N{
rc 0 ne{rc 1 sub/rc X rw}{G}ifelse}imagemask restore}B/G{{id gp get/gp
gp 1 add N A 18 mod S 18 idiv pl S get exec}loop}B/adv{cp add/cp X}B
/chg{rw cp id gp 4 index getinterval putinterval A gp add/gp X adv}B/nd{
/cp 0 N rw exit}B/lsh{rw cp 2 copy get A 0 eq{pop 1}{A 255 eq{pop 254}{
A A add 255 and S 1 and or}ifelse}ifelse put 1 adv}B/rsh{rw cp 2 copy
get A 0 eq{pop 128}{A 255 eq{pop 127}{A 2 idiv S 128 and or}ifelse}
ifelse put 1 adv}B/clr{rw cp 2 index string putinterval adv}B/set{rw cp
fillstr 0 4 index getinterval putinterval adv}B/fillstr 18 string 0 1 17
{2 copy 255 put pop}for N/pl[{adv 1 chg}{adv 1 chg nd}{1 add chg}{1 add
chg nd}{adv lsh}{adv lsh nd}{adv rsh}{adv rsh nd}{1 add adv}{/rc X nd}{
1 add set}{1 add clr}{adv 2 chg}{adv 2 chg nd}{pop nd}]A{bind pop}
forall N/D{/cc X A type/stringtype ne{]}if nn/base get cc ctr put nn
/BitMaps get S ctr S sf 1 ne{A A length 1 sub A 2 index S get sf div put
}if put/ctr ctr 1 add N}B/I{cc 1 add D}B/bop{userdict/bop-hook known{
bop-hook}if/SI save N @rigin 0 0 moveto/V matrix currentmatrix A 1 get A
mul exch 0 get A mul add .99 lt{/QV}{/RV}ifelse load def pop pop}N/eop{
SI restore userdict/eop-hook known{eop-hook}if showpage}N/@start{
userdict/start-hook known{start-hook}if pop/VResolution X/Resolution X
1000 div/DVImag X/IEn 256 array N 2 string 0 1 255{IEn S A 360 add 36 4
index cvrs cvn put}for pop 65781.76 div/vsize X 65781.76 div/hsize X}N
/p{show}N/RMat[1 0 0 -1 0 0]N/BDot 260 string N/Rx 0 N/Ry 0 N/V{}B/RV/v{
/Ry X/Rx X V}B statusdict begin/product where{pop false[(Display)(NeXT)
(LaserWriter 16/600)]{A length product length le{A length product exch 0
exch getinterval eq{pop true exit}if}{pop}ifelse}forall}{false}ifelse
end{{gsave TR -.1 .1 TR 1 1 scale Rx Ry false RMat{BDot}imagemask
grestore}}{{gsave TR -.1 .1 TR Rx Ry scale 1 1 false RMat{BDot}
imagemask grestore}}ifelse B/QV{gsave newpath transform round exch round
exch itransform moveto Rx 0 rlineto 0 Ry neg rlineto Rx neg 0 rlineto
fill grestore}B/a{moveto}B/delta 0 N/tail{A/delta X 0 rmoveto}B/M{S p
delta add tail}B/b{S p tail}B/c{-4 M}B/d{-3 M}B/e{-2 M}B/f{-1 M}B/g{0 M}
B/h{1 M}B/i{2 M}B/j{3 M}B/k{4 M}B/w{0 rmoveto}B/l{p -4 w}B/m{p -3 w}B/n{
p -2 w}B/o{p -1 w}B/q{p 1 w}B/r{p 2 w}B/s{p 3 w}B/t{p 4 w}B/x{0 S
rmoveto}B/y{3 2 roll p a}B/bos{/SS save N}B/eos{SS restore}B end

%%EndProcSet
%%BeginProcSet: 8r.enc
% @@psencodingfile@{
%   author = "S. Rahtz, P. MacKay, Alan Jeffrey, B. Horn, K. Berry",
%   version = "0.6",
%   date = "1 July 1998",
%   filename = "8r.enc",
%   email = "tex-fonts@@tug.org",
%   docstring = "Encoding for TrueType or Type 1 fonts
%                to be used with TeX."
% @}
% 
% Idea is to have all the characters normally included in Type 1 fonts
% available for typesetting. This is effectively the characters in Adobe
% Standard Encoding + ISO Latin 1 + extra characters from Lucida.
% 
% Character code assignments were made as follows:
% 
% (1) the Windows ANSI characters are almost all in their Windows ANSI
% positions, because some Windows users cannot easily reencode the
% fonts, and it makes no difference on other systems. The only Windows
% ANSI characters not available are those that make no sense for
% typesetting -- rubout (127 decimal), nobreakspace (160), softhyphen
% (173). quotesingle and grave are moved just because it's such an
% irritation not having them in TeX positions.
% 
% (2) Remaining characters are assigned arbitrarily to the lower part
% of the range, avoiding 0, 10 and 13 in case we meet dumb software.
% 
% (3) Y&Y Lucida Bright includes some extra text characters; in the
% hopes that other PostScript fonts, perhaps created for public
% consumption, will include them, they are included starting at 0x12.
% 
% (4) Remaining positions left undefined are for use in (hopefully)
% upward-compatible revisions, if someday more characters are generally
% available.
% 
% (5) hyphen appears twice for compatibility with both 
% ASCII and Windows.
% 
/TeXBase1Encoding [
% 0x00 (encoded characters from Adobe Standard not in Windows 3.1)
  /.notdef /dotaccent /fi /fl
  /fraction /hungarumlaut /Lslash /lslash
  /ogonek /ring /.notdef
  /breve /minus /.notdef 
% These are the only two remaining unencoded characters, so may as
% well include them.
  /Zcaron /zcaron 
% 0x10
 /caron /dotlessi 
% (unusual TeX characters available in, e.g., Lucida Bright)
 /dotlessj /ff /ffi /ffl 
 /.notdef /.notdef /.notdef /.notdef
 /.notdef /.notdef /.notdef /.notdef
 % very contentious; it's so painful not having quoteleft and quoteright
 % at 96 and 145 that we move the things normally found there to here.
 /grave /quotesingle 
% 0x20 (ASCII begins)
 /space /exclam /quotedbl /numbersign
 /dollar /percent /ampersand /quoteright
 /parenleft /parenright /asterisk /plus /comma /hyphen /period /slash
% 0x30
 /zero /one /two /three /four /five /six /seven
 /eight /nine /colon /semicolon /less /equal /greater /question
% 0x40
 /at /A /B /C /D /E /F /G /H /I /J /K /L /M /N /O
% 0x50
 /P /Q /R /S /T /U /V /W
 /X /Y /Z /bracketleft /backslash /bracketright /asciicircum /underscore
% 0x60
 /quoteleft /a /b /c /d /e /f /g /h /i /j /k /l /m /n /o
% 0x70
 /p /q /r /s /t /u /v /w
 /x /y /z /braceleft /bar /braceright /asciitilde
 /.notdef % rubout; ASCII ends
% 0x80
 /.notdef /.notdef /quotesinglbase /florin
 /quotedblbase /ellipsis /dagger /daggerdbl
 /circumflex /perthousand /Scaron /guilsinglleft
 /OE /.notdef /.notdef /.notdef
% 0x90
 /.notdef /.notdef /.notdef /quotedblleft
 /quotedblright /bullet /endash /emdash
 /tilde /trademark /scaron /guilsinglright
 /oe /.notdef /.notdef /Ydieresis
% 0xA0
 /.notdef % nobreakspace
 /exclamdown /cent /sterling
 /currency /yen /brokenbar /section
 /dieresis /copyright /ordfeminine /guillemotleft
 /logicalnot
 /hyphen % Y&Y (also at 45); Windows' softhyphen
 /registered
 /macron
% 0xD0
 /degree /plusminus /twosuperior /threesuperior
 /acute /mu /paragraph /periodcentered
 /cedilla /onesuperior /ordmasculine /guillemotright
 /onequarter /onehalf /threequarters /questiondown
% 0xC0
 /Agrave /Aacute /Acircumflex /Atilde /Adieresis /Aring /AE /Ccedilla
 /Egrave /Eacute /Ecircumflex /Edieresis
 /Igrave /Iacute /Icircumflex /Idieresis
% 0xD0
 /Eth /Ntilde /Ograve /Oacute
 /Ocircumflex /Otilde /Odieresis /multiply
 /Oslash /Ugrave /Uacute /Ucircumflex
 /Udieresis /Yacute /Thorn /germandbls
% 0xE0
 /agrave /aacute /acircumflex /atilde
 /adieresis /aring /ae /ccedilla
 /egrave /eacute /ecircumflex /edieresis
 /igrave /iacute /icircumflex /idieresis
% 0xF0
 /eth /ntilde /ograve /oacute
 /ocircumflex /otilde /odieresis /divide
 /oslash /ugrave /uacute /ucircumflex
 /udieresis /yacute /thorn /ydieresis
] def

%%EndProcSet
%%BeginProcSet: texps.pro
%!
TeXDict begin/rf{findfont dup length 1 add dict begin{1 index/FID ne 2
index/UniqueID ne and{def}{pop pop}ifelse}forall[1 index 0 6 -1 roll
exec 0 exch 5 -1 roll VResolution Resolution div mul neg 0 0]/Metrics
exch def dict begin Encoding{exch dup type/integertype ne{pop pop 1 sub
dup 0 le{pop}{[}ifelse}{FontMatrix 0 get div Metrics 0 get div def}
ifelse}forall Metrics/Metrics currentdict end def[2 index currentdict
end definefont 3 -1 roll makefont/setfont cvx]cvx def}def/ObliqueSlant{
dup sin S cos div neg}B/SlantFont{4 index mul add}def/ExtendFont{3 -1
roll mul exch}def/ReEncodeFont{CharStrings rcheck{/Encoding false def
dup[exch{dup CharStrings exch known not{pop/.notdef/Encoding true def}
if}forall Encoding{]exch pop}{cleartomark}ifelse}if/Encoding exch def}
def end

%%EndProcSet
TeXDict begin 39158280 55380996 1000 600 600
(C:\LIEDTKE\doc\l4\nucleus/l4-86-x0.dvi) @start /Fa 141[32
2[42 46 1[23 42 5[37 55[28 45[{TeXBase1Encoding ReEncodeFont}7
83.022 /Times-BoldItalic rf
%DVIPSBitmapFont: Fb cmmi12 14.4 1
/Fb 1 28 df<033FB612F00203B712FC140F143F5C49B812F84917E0499026807FF0C7FC
903A1FFC001FF8D93FF0130F02C0130749486D7E49C7FC484814010003825B485AA2485A
A2485AA2485AA21603007F5E5BA2160700FF5E90C8FCA24C5AA24C5AA24C5AA26C4B5A94
C8FC16FE6C4A5A6D13034B5A6C6CEB0FE0000F4A5A6C6C495A6C6C01FEC9FC3901FC07FC
6CB512F0013F1380D907FCCAFC3E347CB243>27 D E
%EndDVIPSBitmapFont
/Fc 135[42 5[28 3[46 23[55 3[60 2[65 1[69 8[60 23[23
44[{TeXBase1Encoding ReEncodeFont}9 83.022 /Helvetica
rf
%DVIPSBitmapFont: Fd cmsy10 12 1
/Fd 1 1 df<007FB912E0BA12F0A26C18E03C04789A4D>0 D E
%EndDVIPSBitmapFont
/Fe 169[58 1[49 44 53 1[44 58 58 71 49 2[27 2[44 49 58
53 1[58 65[{TeXBase1Encoding ReEncodeFont}15 79.701 /Times-Roman
rf /Ff 208[16 47[{TeXBase1Encoding ReEncodeFont}1 58.1154
/Times-Italic rf
%DVIPSBitmapFont: Fg cmsy10 14.4 2
/Fg 2 34 df<007FBA12FEBCFCA36C19FE4805769F5D>0 D<1B1E1B1FA4881B0FA2881B
07A2881B0388757EA2757E1C7EA288767E767E767E89F403FC767E9938007F80777EF51F
F0007FBE12FEC01280A36CF5FE00D0EA1FF0F53FC0535AE201FEC7FC525AF407F065525A
525A52C8FC1C7EA264515AA2515A641B0764A21B0F64A21B1F99C9FCA41B1E693F79BC78
>33 D E
%EndDVIPSBitmapFont
/Fh 135[72 104 1[80 48 56 64 1[80 1[80 120 40 80 1[40
80 72 48 64 80 64 1[72 97[{TeXBase1Encoding ReEncodeFont}19
143.462 /Times-Bold rf
%DVIPSBitmapFont: Fi cmmi5 5 3
/Fi 3 117 df<380F07E0383F8FF83833D81CEA63F038C3E03CEBC07C12031438380780
00A448C7FCA4121E120C16127D911C>114 D<137E3801FF80EA0381380703C0380E0780
EB0300EA0F80EA07F86CB4FC6C1380EA000FEA3003127812F8EB0700EAF00EEA7FFCEA1F
F012127C911C>I<13C0EA01E0A3EA03C0A4EAFFFCA2EA0780A2EA0F00A4121EA31304EA
3C0CA213181370EA1FE0EA0F800E1A7D9917>I E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fj cmex10 10 4
/Fj 4 63 df<EC01F01407140F143F147F903801FFC0491380491300495A495A495A495A
5C495A485B5A91C7FC485AA2485AA2485AA2123F5BA2127F5BA412FF5BB3B3A71C4B607E
4A>56 D<EAFFC0B3B3A77F127FA47F123FA27F121FA26C7EA26C7EA26C7E807E6C7F6D7E
806D7E6D7E6D7E6D7E6D13806D13C09038007FF0143F140F140714011C4B60804A>58
D<EC1FF8B3B3A7143F15F0A4EC7FE0A315C014FFA2491380A215005B5C1307495A5C131F
495A5C495A495A4890C7FC485A485A485A485AEA7FE0EAFF8090C8FC12FCB4FC7FEA7FE0
EA1FF06C7E6C7E6C7E6C7E6C7F6D7E6D7E806D7E130F806D7E1303807F1580A26D13C0A2
147F15E0A3EC3FF0A415F8141FB3B3A71D9773804A>60 D<EAFFC0B3A90A1B60804A>62
D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fk cmmi6 6 13
/Fk 13 120 df<ED01C01507151FED7F00EC01FCEC07F0EC1FC0027FC7FC14FCEB03F0EB
0FC0EB3F8001FEC8FCEA03F8EA0FE0EA3F8000FEC9FC12F812FEEA3F80EA0FE0EA03F8EA
00FEEB3F80EB0FC0EB03F0EB00FC147FEC1FC0EC07F0EC01FCEC007FED1FC01507150122
237A9D30>60 D<12E012F812FEEA3F80EA0FE0EA03F8EA00FEEB3F80EB0FC0EB03F0EB00
FC147FEC1FC0EC07F0EC01FCEC007FED1FC01507151FED7F00EC01FCEC07F0EC1FC0027F
C7FC14FCEB03F0EB0FC0EB3F8001FEC8FCEA03F8EA0FE0EA3F8000FEC9FC12F812E02223
7A9D30>62 D<EB1F80EBFFE03803E07038078030EA1F00123E123C007C1360387807C0B5
1280EBF80000F8C7FC5AA41408141800781370003813E0381E07C0380FFF00EA03F81517
7D951D>101 D<EB07C0EB3FE390387837803801E01FD803C0130080EA0780120FEB001E
5AA3003E5BA3121E5C14F8EA0F01380787783803FEF0EA00F81300A2495AA21238387803
C038F80780130FD8703EC7FCEA7FFCEA1FE019217E951E>103 D<13F8EA0FF0A21200A2
485AA4485AA4380787E0EB9FF8EBB83CEBE01C380FC01E1380A21300001E5BA35C5AA2EC
F0201530481460EB01E015C0A239F000E380ECFF000060133C1C247CA224>I<1338137C
A2137813701300A7EA0780EA1FC0EA38E01230EA60F0EAC1E0A3EA03C0A3EA0780A2EA0F
0013041306EA1E0CA21318121CEA1E70EA0FE0EA07800F237DA116>I<EA01F0EA1FE0A2
1201A2EA03C0A4EA0780A4EA0F00A4121EA45AA45AA213401360EAF0C0A3EAF1801271EA
3F00121E0C247DA214>108 D<EB0FE0EB7FF83801F03C3803C01E48487EEA0F00001E14
80123EA25AA348EB1F00A2141E143E0078133C5C00385B383C01E0381F07C06CB4C7FCEA
01F819177E951F>111 D<3801E01F3903F07FC0390639C1E0390C3F80F0EB3E00001814
F8013C137815F8C65AA49038F001F0A3EC03E0D801E013C0EBF00715809038F80F003803
DC3CEBCFF8EBC7E001C0C7FC485AA448C8FCA2EA7FF012FF1D20809520>I<380F01F038
1FC7F83831CE1CEA61F8EBF03C00C1137C13E014383803C000A4485AA448C7FCA4121EA2
120C16177D951D>114 D<EB3F80EBFFE03801E0F038038030EB00704813F0A2EB8040EB
C00013FE3803FF806C13C038003FE0EB03F0EA3000127800F813E0A24813C0EA60013878
0F80383FFE00EA07F814177D951D>I<133013785BA4485AA4485AB51280A23803C00048
5AA448C7FCA4121EA25B1480383C03001306A25BEA1C38EA0FF0EA07C011217D9F18>I<
D807801470260FE00313F83938F007801230006090380F007812C01638EAC1E00001011E
1330EA03C0A34848481360A316C0A2ED0180147C00039038DC03009038E1DF063901FF8F
FC39007E03F825177D952C>119 D E
%EndDVIPSBitmapFont
/Fl 133[26 3[29 33 18 26 26 1[33 33 1[48 1[29 1[18 1[33
1[29 33 1[33 33 8[41 26[45 9[33 4[17 2[45 1[22 22 40[{
TeXBase1Encoding ReEncodeFont}23 66.4176 /Times-Italic
rf
%DVIPSBitmapFont: Fm cmsy6 6 6
/Fm 6 55 df<B712C0A322037A8D30>0 D<0060143000E014706C14F00078EB01E06CEB
03C06CEB07806CEB0F003807801E6C6C5A6C6C5A6C6C5AEB79E0EB3FC06D5A6DC7FC497E
497EEB79E0EBF0F03801E07848487E48487E48487E001EEB078048EB03C048EB01E048EB
00F0481470006014301C1D779A30>2 D<136013701360A20040132000E0137038F861F0
387E67E0381FFF803807FE00EA00F0EA07FE381FFF80387E67E038F861F038E060700040
132000001300A21370136014157B9620>I<ED01C01507151FED7F00EC01FCEC07F0EC1F
C0027FC7FC14FCEB03F0EB0FC0EB3F8001FEC8FCEA03F8EA0FE0EA3F8000FEC9FC12F812
FEEA3F80EA0FE0EA03F8EA00FEEB3F80EB0FC0EB03F0EB00FC147FEC1FC0EC07F0EC01FC
EC007FED1FC01507150192C7FCA9007FB61280B712C0A2222F7AA230>20
D<12E012F812FEEA3F80EA0FE0EA03F8EA00FEEB3F80EB0FC0EB03F0EB00FC147FEC1FC0
EC07F0EC01FCEC007FED1FC01507151FED7F00EC01FCEC07F0EC1FC0027FC7FC14FCEB03
F0EB0FC0EB3F8001FEC8FCEA03F8EA0FE0EA3F80007EC9FC12F812E0CAFCA9007FB61280
B712C0A2222F7AA230>I<1570A215F015E01401EC03C01580140715005C140E141E5C14
381478147014F05C1301495A5C130791C7FC5B130E131E131C133C5B137013F05B12015B
1203485A90C8FC5A120E121E121C123C5A127012F05A12601C2F77A300>54
D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fn cmsy7 7 3
/Fn 3 55 df<B712FEA327037A8F34>0 D<160E163E16FEED03F8ED0FE0ED3F80EDFE00
EC03F8EC0FE0EC3F8002FEC7FCEB03F8EB0FE0EB3F8001FEC8FCEA03F8EA0FE0EA3F8000
FEC9FC12F812FEEA3F80EA0FE0EA03F8EA00FEEB3F80EB0FE0EB03F8EB00FEEC3F80EC0F
E0EC03F8EC00FEED3F80ED0FE0ED03F8ED00FE163E160E1600AB007FB612FCB712FEA227
357AA734>20 D<150EA2151E151C153C1578157015F015E0140115C0140315801407EC0F
00140E141E141C143C14381478147014F0495A5C13035C130791C7FC5B131E131C133C13
381378137013F05B1201485A5B120790C8FC5A120E121E121C123C5A127012F05A12601F
3576A800>54 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fo cmr8 8 9
/Fo 9 62 df<EC0380B3A4B812FCA3C7D80380C7FCB3A42E2F7CA737>43
D<EB3FC0EBFFF03803E07C48487E48487E497E001EEB0780A2003E14C0A248EB03E0A500
FC14F0B0007C14E0A3007E1307003E14C0A36CEB0F806C14006D5A3807C03E3803F0FC38
00FFF0EB3FC01C2D7DAB23>48 D<130C133C137CEA03FC12FFEAFC7C1200B3B113FE387F
FFFEA2172C7AAB23>I<140EA2141E143EA2147E14FEA2EB01BE1303143E1306130E130C
131813381330136013E013C0EA0180120313001206120E120C5A123812305A12E0B612FC
A2C7EA3E00A9147F90381FFFFCA21E2D7EAC23>52 D<000CEB0180380FC01F90B512005C
5C14F014C0D80C7EC7FC90C8FCA8EB1FC0EB7FF8380DE07C380F801F01001380000E130F
000CEB07C0C713E0A2140315F0A4127812FCA448EB07E012E0006014C00070130F6C1480
6CEB1F006C133E380780F83801FFE038007F801C2D7DAB23>I<EB03F8EB0FFE90383E07
80EBF8013901F007C03803E00FEA07C0EA0F80A2391F00078091C7FC123EA2127EA2127C
EB0FC038FC3FF0EBF07C38FDC01EB4487E01001380EC07C04814E0A214034814F0A4127C
A3127EA2003E14E01407121E001F14C06CEB0F803907801F003803C03E6C6C5A38007FF0
EB1FC01C2D7DAB23>I<EB1FC0EBFFF03803E07C3807801E48487E001EEB0780A248EB03
C0A4123E1407003F1480381FC00F01E01300EBF81E6C6C5A3807FFF86C13E0C6FCEB3FF8
EBFFFC3803C7FFD807831380D81F0013C0001E133F48EB1FE0007C13070078EB03F012F8
4813011400A46C14E000781301007C14C0003C13036CEB0780390F800F003807E03C3801
FFF038003FC01C2D7DAB23>56 D<EB3F80EBFFF03803E0783807C03E48487E48487E003E
14801407007E14C0127C00FC14E01403A315F0A5007C1307127EA2003E130F7E6C131F38
07803B3803E0F33800FFC390383F03E013001407A215C0A2140F001E1480003F14005C14
3E143C003E5B001C5B380E03E03807FF80D801FEC7FC1C2D7DAB23>I<B812FCA3CBFCAD
B812FCA32E137C9937>61 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fp cmmi8 8 25
/Fp 25 120 df<131C013EEB0380ED07C0017E130F1680137CA201FC131F16005BA20001
5C153E5BA20003147E157C5BA20007ECFC08EDF8185BA2000F0101133816309038E003F0
02071370001F90380EF8609039F83C78E090397FF03FC090391FC00F0048C9FCA2123EA2
127EA2127CA212FCA25AA21270252C7E9D2A>22 D<0103B512F0131F137F90B612E03A01
FC1F80003903F00FC03807C00748486C7E121F1300123EA25AA2140700FC5C5AA2140F5D
141F92C7FC143E0078133C147C007C5B383C01E0381F07C0D807FFC8FCEA01F8241E7D9C
28>27 D<123C127EB4FCA21380A2127F123D1201A312031300A25A1206120E5A5A5A1260
09157A8714>59 D<15C0140114031580A214071500A25C140EA2141E141CA2143C143814
781470A214F05CA213015CA213035C130791C7FCA25B130EA2131E131CA2133C1338A213
78137013F05BA212015BA212035BA2120790C8FC5A120EA2121E121CA2123C1238A21278
1270A212F05AA21A437CB123>61 D<90383FFFFEA2010090C8FC5C5CA21301A25CA21303
A25CA21307A25CA2130FA25CA2131FA25CA2133FA291C7EA0180A24914031700017E5C16
0601FE140EA2495C163C12015E49EB01F84B5A0003141FB7FC5E292D7DAC30>76
D<013FB6FC17E0903A00FE0007F0EE01FC4AEB007EA2010181A25C1880010316005F5CA2
010715FEA24A5C4C5A010F4A5A4C5A4AEB1F8004FFC7FC91B512F84914C00280C9FCA313
3F91CAFCA35B137EA313FE5BA312015BA21203B512E0A2312D7DAC2D>80
D<000FB8FCA23B1FC003F8003F0100151F001C4A130E123C003801071406123000704A13
0EA20060010F140C12E0485CA2141FC715005DA2143FA292C8FCA25CA2147EA214FEA25C
A21301A25CA21303A25CA21307A25C130F131F001FB512F0A2302D7FAC29>84
D<90260FFFFCEB7FFFA29026007FC0EB0FF06E48148018006E6C131E1718020F5C6F5B02
075C6F485A020349C7FCEDF8065E6E6C5A5E6E6C5A5EED7F8093C8FC6F7EA26F7E153F15
6FEDCFE0EC018791380307F0EC0703020E7F141C4A6C7E14704A6C7E495A4948137F49C7
FC010E6E7E5B496E7E5BD801F081D807F8143FD8FFFE0103B5FCA2382D7EAC3A>88
D<EB07E0EB1FF890387C1CE0EBF80D3801F00F3803E007EA07C0120FD81F8013C0A2EA3F
00140F481480127EA2141F00FE14005AA2EC3F02EC3E06A25AEC7E0E007CEBFE0C14FC01
01131C393E07BE18391F0E1E38390FFC0FF03903F003C01F1F7D9D25>97
D<13F8121FA21201A25BA21203A25BA21207A25BA2120FEBC7E0EB9FF8EBB83C381FF01E
EBE01F13C09038800F80EA3F00A2123EA2007E131FA2127CA2143F00FC14005AA2147EA2
147C14FC5C387801F01303495A383C0F806C48C7FCEA0FFCEA03F0192F7DAD1E>I<EB01
F8EB0FFE90383E0780EB7C01D801F813C03803F0073807E00FEA0FC001801380121F48C8
FCA25A127EA312FE5AA51560007C14E0EC01C0EC03806CEB0F00001E131C380F81F83807
FFE0C648C7FC1B1F7D9D1F>I<151FEC03FFA2EC003FA2153EA2157EA2157CA215FCA215
F8A21401EB07E190381FF9F0EB7C1DEBF80FEA01F03903E007E0EA07C0120FEA1F8015C0
EA3F00140F5A007E1480A2141F12FE481400A2EC3F021506143E5AEC7E0E007CEBFE0C14
FC0101131C393E07BE18391F0E1E38390FFC0FF03903F003C0202F7DAD24>I<EB03F8EB
0FFE90383E0780EBF803D801F013C03803E001EA07C0000F1303D81F8013801407393F00
0F00141E387F01FCEBFFF091C7FC007EC8FC12FE5AA4127C156015E0EC01C06CEB0380EC
0F006C131C380F81F83803FFE0C648C7FC1B1F7D9D21>I<157C4AB4FC913807C380EC0F
87150FEC1F1FA391383E0E0092C7FCA3147E147CA414FC90383FFFF8A2D900F8C7FCA313
015CA413035CA413075CA5130F5CA4131F91C8FCA4133EA3EA383C12FC5BA25B12F0EAE1
E0EA7FC0001FC9FC213D7CAE22>I<14FCEB03FF90380F839C90381F01BC013E13FCEB7C
005B1201485A15F8485A1401120F01C013F0A21403121F018013E0A21407A215C0A2000F
130F141F0007EB3F80EBC07F3803E1FF3800FF9F90383E1F0013005CA2143EA2147E0038
137C00FC13FC5C495A38F807E038F00F80D87FFEC7FCEA1FF81E2C7E9D22>I<1307EB0F
80EB1FC0A2EB0F80EB070090C7FCA9EA01E0EA07F8EA0E3CEA1C3E123812301270EA607E
EAE07C12C013FC485A120012015B12035BA21207EBC04014C0120F13801381381F018013
03EB0700EA0F06131EEA07F8EA01F0122E7EAC18>105 D<131FEA03FFA2EA003FA2133E
A2137EA2137CA213FCA25BA2120115F89038F003FCEC0F0E0003EB1C1EEC387EEBE07014
E03807E1C09038E3803849C7FC13CEEA0FDC13F8A2EBFF80381F9FE0EB83F0EB01F81300
481404150C123EA2007E141C1518007CEBF038ECF83000FC1470EC78E048EB3FC00070EB
0F801F2F7DAD25>107 D<27078007F0137E3C1FE01FFC03FF803C18F0781F0783E03B38
78E00F1E01263079C001B87F26707F8013B00060010013F001FE14E000E015C0485A4914
800081021F130300015F491400A200034A13076049133E170F0007027EEC808018814901
7C131F1801000F02FCEB3F03053E130049495C180E001F0101EC1E0C183C010049EB0FF0
000E6D48EB03E0391F7E9D3E>109 D<EB01F8EB0FFF90383F078090387C03C0D801F813
E03903F001F0EA07E0D80FC013F8EB8000121F48C7FC14015A127EA2140300FE14F05AA2
EC07E0A2EC0FC0A2007CEB1F801500143E6C5B6C485A380F83E03803FF80D800FCC7FC1D
1F7D9D22>111 D<90387C01F89038FE07FE3901CF8E0F3A03879C0780D907B813C00007
13F000069038E003E0EB0FC0000E1380120CA2D8081F130712001400A249130F16C0133E
A2017EEB1F80A2017C14005D01FC133E5D15FC6D485A3901FF03E09038FB87C0D9F1FFC7
FCEBF0FC000390C8FCA25BA21207A25BA2120FA2EAFFFCA2232B829D24>I<3807C01F39
0FF07FC0391CF8E0E0383879C138307B8738707F07EA607E13FC00E0EB03804848C7FCA2
128112015BA21203A25BA21207A25BA2120FA25BA2121FA290C8FC120E1B1F7E9D20>
114 D<EB07E0EB3FF8EB781EEBF0063801E0073803C00F141FA20007131E140CEBE00013
F8EBFF806C13E06C13F06C13F8EB3FFC13011300147C0078133C12FCA2147C48137800E0
13F814F0386001E0387807C0381FFF00EA07F8181F7C9D21>I<130E131FA25BA2133EA2
137EA2137CA213FCA2B512F8A23801F800A25BA21203A25BA21207A25BA2120FA25BA200
1F1310143013001470146014E0381E01C0EB0380381F0700EA0F0EEA07FCEA01F0152B7E
A919>I<D801E01370D807F813F8380E3C01D81C3E13FC1238003013000070147CEA607E
D8E07C133812C013FC485A0000143012015B1570000314605B15E015C01207EBC0011580
1403EC070000031306EBE00E00015BEBF07838007FE0EB1F801E1F7E9D22>118
D<D801E01570D807F890381C01F8D80E3C133ED81C3E017E13FC0038147C003015000070
167CD8607E01FC1378D8E07C49133812C013FC3880F8010000163000015C13F002031470
0003166001E05BA217E00007010714C001C0EBC00117801603000316006D486C5A160E3A
01F01DF01C3A00F838F83890397FF07FF090390FC00FC02E1F7E9D33>I
E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fq cmmi7 7 6
/Fq 6 120 df<12E012F812FEEA3F80EA0FE0EA03F8EA00FEEB3F80EB0FE0EB03F8EB00
FEEC3F80EC0FE0EC03F8EC00FEED3F80ED0FE0ED03F8ED00FE163E16FEED03F8ED0FE0ED
3F80EDFE00EC03F8EC0FE0EC3F8002FEC7FCEB03F8EB0FE0EB3F8001FEC8FCEA03F8EA0F
E0EA3F8000FEC9FC12F812E027277AA134>62 D<EB0FC0EB7FF0EBF0383803C01CEA0780
EA0F005A121E003E1338481370EB07E0387FFF8038FFFC0000F8C7FCA45AA21404007813
0C141800381330003C13E0381E07C0380FFF00EA03F8161B7C991F>101
D<9038F007C03901FC1FF039031E78780006EBE03C90381FC01C000CEB801E14005B0018
141F133E1200137E153E137CA213FC157C5B1578000114F0A2EC01E0EC03C03903FC0780
9038FE1F00EBE7FCEBE1F0D807E0C7FCA25BA2120FA25B121FEAFFF8A22025809922>
112 D<EB0FE0EB7FF8EBF03C3801C00E0003131E3807803EA2143C000F1318EBE0006CB4
FC14C06C13E06C13F06C13F813071301EA3C00007E1378A24813F05A387001E0EB03C038
3C0F80381FFE00EA07F8171B7C991F>115 D<131C133EA25BA45BA4485AB512E0A23801
F000485AA4485AA4485AA448C7FC1460A214C0123EEB0180EB0300EA1E06EA1F1CEA0FF8
EA03E013267EA419>I<D803E0EC0380486CEB7007D80C789038F80FC0EA187C00309038
01F0071603126001F8140100C0D903E01380A2EA01F0A2913907C00300EA03E0A33A07C0
0F8006A25EA2160816180003011F5B01E0EBC0703A01F073E0E03A00FFE1FF8090261F80
7FC7FC2A1B7D9930>119 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fr cmr6 6 13
/Fr 13 62 df<130C1338137013E0EA01C0EA038013005A120EA25AA25AA312781270A3
12F0AB1270A312781238A37EA27EA27E7E1380EA01C0EA00E013701338130C0E317AA418
>40 D<12C012707E7E7E7E7E1380EA01C0A2EA00E0A21370A313781338A3133CAB1338A3
13781370A313E0A2EA01C0A2EA038013005A120E5A5A5A12C00E317CA418>I<13FF0003
13C0380781E0380F00F0001E137848133CA248131EA400F8131FAD0078131EA2007C133E
003C133CA26C13786C13F0380781E03803FFC0C6130018227DA01E>48
D<13E01201120712FF12F91201B3A7487EB512C0A212217AA01E>I<EA01FC3807FF8038
1C0FC0383003E0386001F0EB00F812F86C13FCA2147C1278003013FCC7FC14F8A2EB01F0
EB03E014C0EB0780EB0F00131E13385B5B3801C00CEA0380380600185A5A383FFFF85AB5
12F0A216217CA01E>I<13FF000313C0380F03E0381C00F014F8003E13FC147CA2001E13
FC120CC712F8A2EB01F0EB03E0EB0FC03801FF00A2380003E0EB00F01478147C143E143F
1230127812FCA2143E48137E0060137C003813F8381E03F0380FFFC00001130018227DA0
1E>I<14E01301A213031307A2130D131D13391331136113E113C1EA01811203EA070112
06120C121C12181230127012E0B6FCA2380001E0A6EB03F0EB3FFFA218227DA11E>I<00
101330381E01F0381FFFE014C01480EBFE00EA1BF00018C7FCA513FE381BFF80381F03C0
381C01E0381800F014F8C71278A2147CA21230127812F8A214784813F8006013F0387001
E01238381E07803807FF00EA01F816227CA01E>I<EB0FC0EB7FF03801F0383803C01838
07803C380F007C121E001C1338003C1300A2127C1278EB7FC038F9FFE038FB80F038FE00
38143C48131EA248131FA41278A36C131EA2001C133C001E13386C1370380781E03801FF
C038007F0018227DA01E>I<1230123C003FB5FCA24813FE14FC3860001C143814704813
E014C0EA0001EB0380EB07001306130E5BA25BA21378A35BA41201A76C5A18237CA11E>
I<137F3803FFC0380781E0380E00704813380018131C1238A3123C003F1338381FC078EB
E0F0380FF9E03807FF80120114C0000713F0380F0FF8381C03FC383801FE3870007E141F
48130F1407A314060070130E0078130C6C1338001F13F03807FFC0C6130018227DA01E>
I<13FE3803FFC0380781E0380E0070481378003C133848133CA200F8131EA3141FA40078
133FA26C137F121C380F01DF3807FF9F3803FE1EC7FCA2143E143C001C1338003E137814
70003C13E0381801C0381C0780380FFE00EA03F818227DA01E>I<B712FEA3CAFCA9B712
FEA3270F7C932F>61 D E
%EndDVIPSBitmapFont
/Fs 107[46 46 24[32 37 37 55 37 42 23 32 32 42 42 42
42 60 23 37 1[23 42 42 23 37 42 37 42 42 3[32 1[32 2[51
69 51 1[46 42 51 1[51 1[55 69 46 55 1[28 1[60 51 51 60
55 51 51 3[56 2[28 5[42 1[42 42 42 23 21 28 21 56 42
28 28 28 36[42 2[{TeXBase1Encoding ReEncodeFont}64 83.022
/Times-Italic rf /Ft 134[50 50 2[55 33 39 44 55 55 50
55 83 28 2[28 1[50 1[44 55 44 55 50 10[72 72 66 55 72
1[61 2[94 1[78 1[39 78 78 61 66 72 72 66 9[50 1[50 1[50
50 50 50 2[25 33 45[{TeXBase1Encoding ReEncodeFont}43
99.6264 /Times-Bold rf
%DVIPSBitmapFont: Fu cmr10 10 14
/Fu 14 112 df<146014E0EB01C0EB0380EB0700130E131E5B5BA25B485AA2485AA21207
5B120F90C7FCA25A121EA2123EA35AA65AB2127CA67EA3121EA2121F7EA27F12077F1203
A26C7EA26C7E1378A27F7F130E7FEB0380EB01C0EB00E01460135278BD20>40
D<12C07E12707E7E7E120F6C7E6C7EA26C7E6C7EA21378A2137C133C133E131EA2131F7F
A21480A3EB07C0A6EB03E0B2EB07C0A6EB0F80A31400A25B131EA2133E133C137C1378A2
5BA2485A485AA2485A48C7FC120E5A5A5A5A5A13527CBD20>I<15301578B3A6007FB812
F8B912FCA26C17F8C80078C8FCB3A6153036367BAF41>43 D<EB03F8EB1FFF90387E0FC0
9038F803E03901E000F0484813780007147C48487FA248C77EA2481580A3007EEC0FC0A6
00FE15E0B3007E15C0A4007F141F6C1580A36C15006D5B000F143EA26C6C5B6C6C5B6C6C
485A6C6C485A90387E0FC0D91FFFC7FCEB03F8233A7DB72A>48 D<EB01C013031307131F
13FFB5FCA2131F1200B3B3A8497E007FB512F0A31C3879B72A>I<EB0FF0EB7FFE48B57E
3903E03FE0390F000FF0000E6D7E486D7E486D7E123000706D7E126012FCB4EC7F807FA5
6CC7FC121CC8FCEDFF00A34A5A5D14035D4A5A5D140F4A5A4A5A92C7FC147C5C495A495A
495A495A91C8FC011EEB01805B5B49130348481400485A485A000EC75A000FB6FC5A5A48
5CB6FCA321387CB72A>I<EB07F8EB3FFF4913C03901F80FF03903C007F848486C7E380E
0001000F80381FE0006D7FA56C5A6C5AC85A1401A25D4A5AA24A5A5DEC0F80027EC7FCEB
1FFCECFF809038000FE06E7EEC01FC816E7EED7F80A216C0A2153F16E0A2121EEA7F8048
7EA416C049137F007F1580007EC7FC0070ECFF006C495A121E390F8003F83907F00FF000
01B512C06C6C90C7FCEB0FF8233A7DB72A>I<1538A2157815F8A2140114031407A2140F
141F141B14331473146314C313011483EB030313071306130C131C131813301370136013
C01201EA038013005A120E120C5A123812305A12E0B712F8A3C73803F800AB4A7E0103B5
12F8A325397EB82A>I<EC3FC0903801FFF0010713FC90380FE03E90383F800790387E00
1F49EB3F804848137F485AA2485A000FEC3F0049131E001F91C7FCA2485AA3127F90C9FC
EB01FC903807FF8039FF1E07E090383801F0496C7E01607F01E0137E497FA249148016C0
151FA290C713E0A57EA56C7E16C0A2121FED3F807F000F15006C6C5B15FE6C6C5B6C6C48
5A3900FE07F090383FFFC06D90C7FCEB03FC233A7DB72A>54 D<EB03F8EB1FFF017F13C0
9038FC07F03901E001F848486C7E4848137C90C77E48141E000E141F001E80A3121FA27F
5D01E0131E6C6C133E01FC133C6D5B6C6C6C5AECC1E06CEBF3C06C01FFC7FC6C5BEB3FFF
6D13C081017F13F801F07F3903E07FFE3907801FFF48486C1380481303003E6D13C0003C
EB007F007C143F0078EC0FE000F814075A1503A21501A36C15C012781503007C15806CEC
07006C5C6C6C131ED807E0137C3903F803F0C6B55A013F1380D907FCC7FC233A7DB72A>
56 D<007FB812F8B912FCA26C17F8CCFCAE007FB812F8B912FCA26C17F836167B9F41>
61 D<ED0FC0EC03FFA3EC003F150FB0EB03F8EB1FFF90387E078F9038F801EF3903F000
7F4848133F4848131FA24848130F123F90C7FC5AA2127E12FEAA127E127FA27EA26C6C13
1FA26C6C133F6C6C137F6C6CEBEFF03A01F801CFFF39007C078F90381FFE0FD907F813C0
283B7DB92E>100 D<2703F00FF0EB1FE000FFD93FFCEB7FF8913AF03F01E07E903BF1C0
1F83803F3D0FF3800FC7001F802603F70013CE01FE14DC49D907F8EB0FC0A2495CA3495C
B3A3486C496CEB1FE0B500C1B50083B5FCA340257EA445>109 D<EB03FE90380FFF8090
383E03E09038F800F84848137C48487F48487F4848EB0F80001F15C090C712074815E0A2
007EEC03F0A400FE15F8A9007E15F0A2007F14076C15E0A26C6CEB0FC0000F15806D131F
6C6CEB3F006C6C137EC66C13F890387E03F090381FFFC0D903FEC7FC25277EA52A>111
D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fv cmsy10 10 7
/Fv 7 106 df<007FB81280B912C0A26C17803204799641>0 D<0060150600F8150F6C15
1F007E153F6C157E6C6C14FC6C6CEB01F86C6CEB03F06C6CEB07E06C6CEB0FC06C6CEB1F
80017EEB3F006D137E6D6C5A90380FC1F8903807E3F0903803F7E06DB45A6D5B6EC7FCA2
4A7E497F903803F7E0903807E3F090380FC1F890381F80FC90383F007E017E7F49EB1F80
4848EB0FC04848EB07E04848EB03F04848EB01F84848EB00FC48C8127E007E153F48151F
48150F00601506282874A841>2 D<EB1FF0EBFFFE487F000714C04814E04814F04814F8
A24814FCA3B612FEA96C14FCA36C14F8A26C14F06C14E06C14C0000114006C5BEB1FF01F
1F7BA42A>15 D<D93F801508D9FFF0151C00037F4813FE487F4814C09026C07FE0143C27
3F000FF01438003CD907FC147848EB01FE6E6C6C13F0007091383FC00300F091391FF80F
E0486EB5FC030314C06F14806F6C1300EE3FFC0040ED07F036137B9D41>24
D<D90FF0ED07F0D93FFEED3FFE90B56C91B5FC00036E903903F807C02707F07FF0903907
C001E0270F801FF890390F8000F090260007FC013EC71270001E6D6C491438486D6C0178
141C00386D6D5A48DA7FC1150E92383FE3E0006091261FF3C01406EEF78000E0DA0FFF15
07486E90C812036F5AA26F7E6F7F707EA24C7E6C4A6D14070060DBEFF81406ED03CF0070
912607C7FC140E92380F83FE6CDB01FF141CDB1E006D133C6C023E6D6C13786C4A6D6C13
F0000FD901F090381FF8016C6C484890390FFE0FE02703E01FC00103B512C0C6B5C76C14
00D97FFC9138007FFCD90FE0ED0FF048267BA453>49 D<14C0EB01E01303A214C01307A2
1480130FA2EB1F00A2131E133EA25BA2137813F8A2485AA25B1203A25B1207A2485AA290
C7FC5AA2123EA2123C127CA2127812F8A41278127CA2123C123EA27EA27E7FA26C7EA212
037FA212017FA26C7EA21378137CA27FA2131E131FA2EB0F80A2130714C0A2130314E0A2
1301EB00C0135278BD20>104 D<126012F07EA21278127CA2123C123EA27EA27E7FA26C
7EA212037FA26C7EA212007FA21378137CA27FA2131E131FA2EB0F80A2130714C0A21303
14E0A414C01307A21480130FA2EB1F00A2131E133EA25BA2137813F8A25B1201A2485AA2
5B1207A2485AA290C7FC5AA2123EA2123C127CA2127812F8A25A126013527CBD20>I
E
%EndDVIPSBitmapFont
/Fw 135[86 3[57 1[76 1[96 1[96 4[48 96 2[76 96 2[86 29[124
1[124 14[86 86 49[{TeXBase1Encoding ReEncodeFont}14 172.188
/Times-Bold rf
%DVIPSBitmapFont: Fx cmr7 7 7
/Fx 7 62 df<EB3F803801FFF03803E0F83807803C48487E001E7F003E1480A2003C1307
007C14C0A400FC14E0AE007C14C0A36CEB0F80A36CEB1F006C131E6C6C5A3803E0F86CB4
5A38003F801B277EA521>48 D<13381378EA01F8121F12FE12E01200B3AB487EB512F8A2
15267BA521>I<13FF000313E0380E03F0381800F848137C48137E00787F12FC6CEB1F80
A4127CC7FC15005C143E147E147C5C495A495A5C495A010EC7FC5B5B903870018013E0EA
0180390300030012065A001FB5FC5A485BB5FCA219267DA521>I<13FF000313E0380F01
F8381C007C0030137E003C133E007E133FA4123CC7123E147E147C5C495AEB07E03801FF
8091C7FC380001E06D7E147C80143F801580A21238127C12FEA21500485B0078133E0070
5B6C5B381F01F03807FFC0C690C7FC19277DA521>I<0018130C001F137CEBFFF85C5C14
80D819FCC7FC0018C8FCA7137F3819FFE0381F81F0381E0078001C7F0018133EC7FC80A2
1580A21230127C12FCA3150012F00060133E127000305B001C5B380F03E03803FFC0C648
C7FC19277DA521>53 D<EB0FE0EB3FF8EBF81C3801E0063803C01F48485AEA0F005A121E
003E131E91C7FC5AA21304EB3FC038FCFFF038FDC078EB003CB4133E48131E141FA24814
80A4127CA4003C1400123E001E131E143E6C133C6C6C5A3803C1F03801FFC06C6CC7FC19
277DA521>I<B812E0A3CBFCABB812E0A32B117D9633>61 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fy cmmi10 10 31
/Fy 31 121 df<EB0380D907E01307010FEC0F80161F5CA2011F143FA24A1400A2013F5C
A291C7127EA24914FEA2017E5CA201FE1301A2495CA200011403A249ECF018A200031407
1738EEE030150F00071670031F1360153F6D017713E0486C9038E3E1C0903AFF03C1F380
903ACFFF00FF00D9C3FC133ED81FC0C9FCA25BA2123FA290CAFCA25AA2127EA212FEA25A
A212702D377EA432>22 D<027FB512C00103B612E0130F5B017F15C09026FF81FEC7FC39
01FC007E48487F485A497F484880485AA248C7FCA2127EA2153F00FE92C7FC5AA25D157E
5A5DA24A5AA24A5A007C495A5D003C495A003E013FC8FC6C137C380F81F83803FFE0C66C
C9FC2B257DA32F>27 D<121C127FEAFF80A213C0A3127F121C1200A412011380A2120313
005A1206120E5A5A5A12600A19798817>59 D<1760177017F01601A21603A21607160FA2
4C7EA216331673166316C3A2ED0183A2ED0303150683150C160115181530A21560A215C0
14011580DA03007FA202061300140E140C5C021FB5FC5CA20260C7FC5C83495A8349C8FC
1306A25BA25B13385B01F01680487E000716FFB56C013F13FF5EA2383C7DBB3E>65
D<9339FF8001C0030F13E0037F9038F80380913A01FF807E07913A07F8000F0FDA1FE0EB
079FDA3F80903803BF0002FFC76CB4FCD901FC80495A4948157E495A495A4948153E017F
163C49C9FC5B1201484816385B1207485A1830121F4993C7FCA2485AA3127F5BA312FF90
CCFCA41703A25F1706A26C160E170C171C5F6C7E5F001F5E6D4A5A6C6C4A5A16076C6C02
0EC8FC6C6C143C6C6C5C6CB4495A90393FE00FC0010FB5C9FC010313FC9038007FC03A3D
7CBA3B>67 D<0103B812F05BA290260007F8C7123F4B1407F003E0020F150118005DA214
1FA25D19C0143FA24B1330A2027F1470190092C7126017E05C16014A495A160F49B6FCA2
5F9138FC000F01031407A24A6DC8FCA201075C18034A130660010F160693C7FC4A150E18
0C011F161C18184A1538A2013F5E18F04A4A5AA2017F15074D5A91C8123F49913803FF80
B9FCA295C7FC3C397DB83D>69 D<0103B500F8903807FFFC5BA290260007F8C813804BED
FC0019F0020F4B5AF003804B4AC7FC180E021F1538604B5CEF0380023F4AC8FC170E4B13
3C1770027F5C4C5ADB0007C9FC160E4A5B167E4A13FE4B7E01015B92380E7F80ECFC1CED
383F010301E07FECFDC04A486C7EECFF00D907FC6D7E5C4A130783130F707E5C1601011F
81A24A6D7EA2013F6F7EA24A143F84137F717E91C8123F496C81B60107B512C0A2614639
7DB847>75 D<0103B6FC5B5E90260007FCC8FC5D5D140FA25DA2141FA25DA2143FA25DA2
147FA292C9FCA25CA25CA21301A25CA21303A25CA2130718404A15C0A2010F150118804A
1403A2011F16005F4A1406170E013F151E171C4A143C177C017F5D160391C7120F49EC7F
F0B8FCA25F32397DB839>I<0003B812FEA25A903AF8003FC00101C0913880007E484816
3C90C7007F141C121E001C92C7FCA2485CA200305C007017180060130112E0485CA21403
C716005DA21407A25DA2140FA25DA2141FA25DA2143FA25DA2147FA292C9FCA25CA25CA2
1301A25CA21303A25CEB0FFC003FB6FC5AA237397EB831>84 D<49B500F890387FFFF095
B5FC1AE0D90003018090380FFC004BC713E00201ED07804EC7FC6E6C140E606F5C705B60
6F6C485A4D5A031F91C8FCEEE0065F6F6C5A5F03075B705A16F96FB45A94C9FC6F5AA36F
7EA34B7FED037F9238063FC0150E4B6C7E1538ED700F03E07F15C04A486C7EEC03000206
13034A805C4A6D7E14704A1300494880495A49C86C7E130E011E153F017E4B7ED803FF4B
7E007F01E0011FEBFFC0B5FC6144397EB845>88 D<147E903803FF8090390FC1C3809039
1F00EFC0017E137F49133F485A4848EB1F8012075B000F143F48481400A2485A5D007F14
7E90C7FCA215FE485C5AA214015D48150CA21403EDF01C16181407007C1538007E010F13
30003E131F027B13706C01E113E03A0F83C0F9C03A03FF007F80D800FCEB1F0026267DA4
2C>97 D<133FEA1FFFA3C67E137EA313FE5BA312015BA312035BA31207EBE0FCEBE3FF90
38E707C0390FFE03E09038F801F001F013F8EBE000485A15FC5BA2123F90C7FCA214015A
127EA2140312FE4814F8A2140715F05AEC0FE0A215C0EC1F80143F00781400007C137E5C
383C01F86C485A380F07C06CB4C7FCEA01FC1E3B7CB924>I<EC3FC0903801FFF0903807
E03C90380F800E90383F0007017E131F49137F484813FF485A485A120F4913FE001F1438
48481300A2127F90C8FCA35A5AA45AA315031507007E1406150E003E143C003F14706C14
E0390F8007C03907C03F003801FFF838003FC020267DA424>I<163FED1FFFA3ED007F16
7EA216FEA216FCA21501A216F8A21503A216F0A21507A2027E13E0903803FF8790380FC1
CF90381F00EF017EEB7FC049133F485A4848131F000715805B000F143F485A1600485A5D
127F90C7127EA215FE5A485CA21401A248ECF80CA21403161CEDF0181407007C1538007E
010F1330003E131F027B13706C01E113E03A0F83C0F9C03A03FF007F80D800FCEB1F0028
3B7DB92B>I<EC3FC0903801FFF0903807E07890381F801C90387E001E49130E485A485A
1207485A49131E001F141C153C484813F8EC03E0007FEB3FC09038FFFE0014E090C8FC5A
5AA7007E140315071506003E140E153C6C14706C6C13E0EC07C03903E03F003801FFF838
003FC020267DA427>I<16F8ED03FEED0F8792381F0F80ED3E3F167F157CA215FC170016
1C4A48C7FCA414035DA414075DA20107B512F0A39026000FE0C7FC5DA4141F5DA4143F92
C8FCA45C147EA514FE5CA413015CA4495AA45C1307A25C121E123F387F8F80A200FF90C9
FC131E12FEEA7C3CEA7878EA1FF0EA07C0294C7CBA29>I<EC07E0EC1FF891387C1C3890
3901F80EFC903803F007903807E003EB0FC090381F8001D93F0013F85B017E130313FE16
F0485A150712034914E0A2150F12074914C0A2151FA2491480A2153FA2160000035C6D5B
00015B4A5A3900F8077E90387C1EFEEB1FF8903807E0FC90C7FC1401A25DA21403001E5C
123F387F80075D00FF495A49485A4849C7FC007C137E383C01F8381FFFE0000390C8FC26
367FA428>I<14E0EB03F8A21307A314F0EB01C090C7FCAB13F8EA03FEEA070F000E1380
121C121812381230EA701F1260133F00E0130012C05BEA007EA213FE5B1201A25B12035B
A20007131813E01438000F133013C01470EB806014E014C01381EB838038078700EA03FE
EA00F815397EB71D>105 D<EB03F0EA01FFA3EA00075CA3130F5CA3131F5CA3133F91C8
FCA35B017EEB07C0ED1FF0ED783801FEEBE0F89039FC01C1FCEC0383EC07070001130ED9
F81C13F891383803F091387001E0000349C7FCEBF1C0EBF38001F7C8FCEA07FEA2EBFFE0
EBE7F8380FE0FEEBC07F6E7E141F001F80D9800F1330A21670003F011F136001001380A2
16E04815C0007E1481020F1380158300FE903807870048EB03FE0038EB00F8263B7CB92B
>107 D<EB0FC0EA03FF5AA2EA001F1480A2133FA21400A25BA2137EA213FEA25BA21201
A25BA21203A25BA21207A25BA2120FA25BA2121FA25BA2123FA290C7FCA25AA2EA7E03A2
EAFE07130612FCA2130E130C131C1318EA7C38EA3C70EA1FE0EA0780123B7DB919>I<D8
03E0017F14FE3D07F801FFE003FFC03D0E3C0781F00F03E03D1C3E1E00F83C01F026383F
38D9FC707F00304914E04A90387DC000007049EB7F8000604991C7FCA200E090C700FE13
01485A017E5CA200000201140301FE5F495CA203031407000160495C180F03075D120349
4A011F13601980030F023F13E00007F000C0495C1901031F023E1380000F1803494A1500
61033F150E001FEF1E1C4991C7EA0FF80007C7000EEC03E043267EA449>I<D803E0137F
3A07F801FFE03A0E3C0781F03A1C3E1E00F826383F387F00305B4A137C00705B00605BA2
00E090C712FC485A137EA20000140101FE5C5BA2150300015D5B15075E120349010F1330
16C0031F13700007ED80605B17E0EE00C0000F15014915801603EE0700001FEC0F0E49EB
07FC0007C7EA01F02C267EA432>I<EC1FC0ECFFF8903807E07E90380F801F90393F000F
80017E14C0491307484814E0485A4848EB03F0120F5B121F48481307A2127F90C7FCA215
0F5A4815E0A2151F16C0A248EC3F8016005D157E007E5C4A5A003E495A003F495A6C495A
6C6C48C7FC3807E07E3801FFF038003F8024267DA428>I<90390F8003F090391FE00FFC
903939F03C1F903A70F8700F80903AE0FDE007C09038C0FF80030013E000014913030180
15F05CEA038113015CA2D800031407A25CA20107140FA24A14E0A2010F141F17C05CEE3F
80131FEE7F004A137E16FE013F5C6E485A4B5A6E485A90397F700F80DA383FC7FC90387E
1FFCEC07E001FEC9FCA25BA21201A25BA21203A25B1207B512C0A32C3583A42A>I<3903
E001F83907F807FE390E3C1E07391C3E381F3A183F703F800038EBE07F0030EBC0FF0070
5B00601500EC007E153CD8E07F90C7FCEAC07EA2120013FE5BA312015BA312035BA31207
5BA3120F5BA3121F5B0007C9FC21267EA425>114 D<14FF010313C090380F80F090383E
00380178131C153C4913FC0001130113E0A33903F000F06D13007F3801FFE014FC14FF6C
14806D13C0011F13E013039038003FF014071403001E1301127FA24814E0A348EB03C012
F800E0EB07800070EB0F006C133E001E13F83807FFE0000190C7FC1E267CA427>I<EB01
C0497E1307A4130F5CA3131F5CA3133F91C7FC007FB51280A2B6FCD8007EC7FCA313FE5B
A312015BA312035BA312075BA3120FEBC006A2140E001F130CEB801C141814385C146014
E0380F81C038078780D803FEC7FCEA00F819357EB31E>I<13F8D803FE1438D8070F147C
000E6D13FC121C1218003814011230D8701F5C12601503EAE03F00C001005B5BD8007E13
07A201FE5C5B150F1201495CA2151F120349EC80C0A2153F1681EE0180A2ED7F0303FF13
0012014A5B3A00F8079F0E90397C0E0F1C90393FFC07F8903907F001F02A267EA430>I<
01F8EB03C0D803FEEB07E0D8070F130F000E018013F0121C12180038140700301403D870
1F130112601500D8E03F14E000C090C7FC5BEA007E16C013FE5B1501000115805B150316
001203495B1506150E150C151C151815385D00015C6D485A6C6C485AD97E0FC7FCEB1FFE
EB07F024267EA428>I<01F816F0D803FE9138E001F8D8070F903801F003000ED9800314
FC121C12180038020713010030EDE000D8701F167C1260030F143CD8E03F163800C00100
5B5BD8007E131F183001FE5C5B033F1470000117604991C7FCA218E000034A14C049137E
17011880170318005F03FE1306170E000101015C01F801BF5B3B00FC039F8070903A7E0F
0FC0E0903A1FFC03FFC0902703F0007FC7FC36267EA43B>I<903907E001F090391FF807
FC9039783E0E0F9039E01F1C1FD801C09038383F803A03800FF07F0100EBE0FF5A000E4A
1300000C157E021F133C001C4AC7FC1218A2C7123FA292C8FCA25CA2147EA214FEA24A13
0CA20101141C001E1518003F5BD87F81143801835C00FF1560010714E03AFE0E7C01C0D8
7C1C495A2778383E0FC7FC391FF00FFC3907C003F029267EA42F>I
E
%EndDVIPSBitmapFont
/Fz 134[42 42 60 42 46 28 32 37 1[46 42 46 69 23 46 1[23
46 42 28 37 46 37 1[42 8[60 83 3[46 60 1[51 65 1[78 55
2[32 1[65 4[55 60 6[28 42 42 42 42 1[42 42 42 42 1[23
1[28 45[{TeXBase1Encoding ReEncodeFont}45 83.022 /Times-Bold
rf /FA 135[103 3[69 80 92 2[103 115 1[57 2[57 1[103 1[92
3[103 8[149 11[138 4[161 3[149 138 9[103 1[103 1[103
4[57 1[69 45[{TeXBase1Encoding ReEncodeFont}21 206.559
/Times-Bold rf /FB 166[60 60 78 1[60 51 46 55 1[46 60
60 74 51 60 1[28 60 60 46 51 60 55 1[60 8[42 42 42 42
42 42 42 42 1[23 21 28 45[{.167 SlantFont TeXBase1Encoding ReEncodeFont}
32 83.022 /Times-Roman rf /FC 206[25 49[{TeXBase1Encoding ReEncodeFont}
1 49.8132 /Times-Roman rf /FD 206[29 1[16 47[{
TeXBase1Encoding ReEncodeFont}2 58.1154 /Times-Roman
rf
%DVIPSBitmapFont: FE cmsy8 8 6
/FE 6 106 df<006015C000E014016C14030078EC07806CEC0F006C141E6C5C6C6C5B6C
6C5B6C6C485A6C6C485A90387807806D48C7FCEB1E1E6D5AEB07F86D5A6D5A497E497EEB
0F3CEB1E1E497E496C7E496C7E48486C7E48486C7E4848137848C77E001E80488048EC07
8048EC03C048140100601400222376A137>2 D<ED7FF80207B57E021F14E091397FC00F
F8D901FCC712FED903F0143FD90FC0EC0FC049C8EA03E0013E6F7E0178ED007849824848
8248488249820007188048CAEA03C0000E1701001E18E0001C1700003C18F00038187000
78187800701838A300F0183C48181CA96C183C00701838A30078187800381870003C18F0
001C18E0001E1701000E18C0000F17036C6CEE0780000318006D5E6C6C161E6C6C5E0178
5E013E4B5A6D4B5AD90FC0EC0FC0D903F0023FC7FCD901FC14FE903A007FC00FF8021FB5
12E0020714809126007FF8C8FC3E3D7CAE47>13 D<01FE150C3803FF804813E0487F381F
83F8263E00FC141C003C133F486D6C131800706D6C133800606D6C137800E0D901F013F0
913800FC014891387F07E092383FFFC06F138003071300ED01FC2E117C9837>24
D<D93F80EC07F0D9FFF0EC3FFC000301FC91B5FC4801FF903901F80780D80F80903A8007
C001C03D1E003FC00F8000E0486D6C48C71270003890260FF03E143048902607F83C1438
6E6C48141800606D6C5A00E06D6C48141C48027F150C5E153F6F7E6F7E82151F6C6F141C
0060DA3DFE1418DB78FF143800704A6C7E003001016D6C1370003849486C6C13F06C903B
07C00FF001E06C903B0F8007FC07C02807807E0003B512806CB44801001400C601F0EC3F
FCD93F80EC07F03E1F7C9D47>49 D<13031307130F130EA2131E131C133C1338A2137813
7013F013E0A2120113C01203138012071300A25A120E121E121CA2123C123812781270A2
12F05A7E1270A212781238123C121CA2121E120E120F7EA21380120313C0120113E01200
A213F0137013781338A2133C131C131E130EA2130F1307130310437AB11B>104
D<12E0A27E1270A212781238123C121CA2121E120E120F7EA21380120313C0120113E012
00A213F0137013781338A2133C131C131E130EA2130F1307130F130EA2131E131C133C13
38A21378137013F013E0A2120113C01203138012071300A25A120E121E121CA2123C1238
12781270A212F05AA210437CB11B>I E
%EndDVIPSBitmapFont
/FF 104[66 2[29 29 24[29 33 33 48 33 33 18 26 22 33 33
33 33 52 18 33 1[18 33 33 22 29 33 29 33 29 8[48 1[48
1[41 37 44 1[37 48 1[59 41 48 1[22 1[48 37 41 48 44 44
48 7[33 33 33 33 33 33 33 33 33 33 18 17 22 17 37 33
22 22 1[52 34[37 37 2[{TeXBase1Encoding ReEncodeFont}67
66.4176 /Times-Roman rf /FG 173[35 82[{TeXBase1Encoding ReEncodeFont}1
53.134 /Times-Roman rf /FH 134[60 1[86 60 66 40 47 53
1[66 60 66 100 33 2[33 66 60 40 53 66 53 66 60 12[80
66 86 1[73 1[86 113 80 93 1[47 93 1[73 1[86 86 10[60
60 60 60 60 60 60 60 2[30 40 45[{TeXBase1Encoding ReEncodeFont}44
119.552 /Times-Bold rf /FI 87[28 17[42 1[37 37 24[37
42 42 60 42 42 23 32 28 42 42 42 42 65 23 42 23 23 42
42 28 37 42 37 42 37 28 2[28 1[28 1[60 60 78 60 60 51
46 55 1[46 60 60 74 51 60 32 28 60 60 46 51 60 55 55
60 76 2[47 1[23 23 42 42 42 42 42 42 42 42 42 42 23 21
28 21 47 42 28 28 28 3[42 1[28 29[46 46 2[{
TeXBase1Encoding ReEncodeFont}84 83.022 /Times-Roman
rf /FJ 138[50 28 39 33 2[50 50 2[50 1[28 50 50 1[44 50
44 13[72 8[61 1[39 6[66 1[72 7[50 50 5[50 50 1[28 2[25
44[{TeXBase1Encoding ReEncodeFont}24 99.6264 /Times-Roman
rf /FK 140[56 48 2[72 72 4[40 3[64 12[104 1[104 37[72
1[36 46[{TeXBase1Encoding ReEncodeFont}10 143.462 /Times-Roman
rf /FL 135[103 2[103 1[80 69 2[103 103 1[57 2[57 2[69
92 1[92 1[92 8[149 1[149 3[138 3[149 184 126 19[103 1[103
1[103 52[{TeXBase1Encoding ReEncodeFont}21 206.559 /Times-Roman
rf end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 600dpi
TeXDict begin
%%PaperSize: A4

%%EndSetup
%%Page: 1 1
1 0 bop 1202 1471 a FL(L4)52 b(Nucleus)g(V)-23 b(ersion)53
b(X)1363 1720 y(Reference)c(Manual)1968 2135 y(x86)1780
2551 y FK(V)-16 b(ersion)34 b(X.0)1820 2916 y FJ(Jochen)25
b(Liedtk)o(e)1766 3032 y FI(Uni)n(v)o(ersit)5 b(\250)-33
b(at)19 b(Karlsruhe)1808 3148 y(liedtk)o(e@ira.uka.de)1792
3550 y FJ(August)k(28,)i(1999)1728 3666 y(Under)g(Construction)p
eop
%%Page: 2 2
2 1 bop eop
%%Page: 3 3
3 2 bop 3881 -290 a FI(3)322 -57 y FH(Ho)o(w)30 b(T)-11
b(o)30 b(Read)g(This)g(Manual)322 129 y FI(This)e(reference)d(manual)i
(consists)g(of)g(tw)o(o)h(parts,)g(\(1\))f(a)h(processor)n
(-independent)22 b(description)k(of)h(the)g(principles)g(and)322
229 y(mechanisms)17 b(of)h(L4)g(and)f(\(2\))g(a)h(more)f(detailed)h
(processor)n(-speci\002c)e(description.)23 b(P)o(art)17
b(2)h(refers)g(to)g(the)g(Intel)f(processors,)322 328
y(Pentium)617 296 y FG(R)600 298 y FE(\015)s FD(1)728
328 y FI(and)j(Pentium)1163 296 y FG(R)1147 298 y FE(\015)1220
328 y FI(Pro.)322 2740 y FH(Cr)n(edits)322 2926 y FI(Helpful)h(contrib)
n(utions)f(for)h(impro)o(ving)e(this)j(reference)e(manual)h(and)g(the)g
(L4)h(interf)o(ace)f(came)g(from)f(man)o(y)h(persons,)g(in)322
3025 y(particular)j(from)g(Bryan)h(F)o(ord,)g(Hermann)e(H)5
b(\250)-33 b(artig,)26 b(Michael)e(Hohmuth,)h(Sebastian)f(Sch)7
b(\250)-35 b(onber)o(g,)23 b(Jean)j(W)-7 b(olter)m(,)26
b(K)n(e)n(vin)322 3125 y(Elphinstone,)19 b(T)m(rent)g(Jae)o(ger)m(,)g
(Y)-9 b(oonho)18 b(P)o(ark,)i(V)-11 b(olkmar)19 b(Uhlig,)h(and)f
(Gernot)h(Heiser)-5 b(.)p 322 5328 1440 4 v 413 5387
a FC(1)442 5410 y FF(Pentium)681 5385 y FG(R)662 5387
y FE(\015)738 5410 y FF(is)17 b(a)g(re)o(gistered)j(trademark)e(of)f
(Intel)i(Corp.)p eop
%%Page: 4 4
4 3 bop 156 -290 a FI(4)p eop
%%Page: 5 5
5 4 bop 322 -290 a FB(CONTENTS)3125 b FI(5)322 608 y
FA(Contents)322 1122 y Fz(1)83 b(L4)21 b(in)g(General)2939
b(7)322 1305 y(2)83 b(L4-X/x86)3100 b(9)447 1405 y FI(2.1)86
b(Notational)19 b(con)m(v)o(entions)55 b(.)41 b(.)h(.)f(.)g(.)g(.)h(.)f
(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)
h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)154 b(9)447
1504 y(2.2)86 b(Data)20 b(T)-7 b(ypes)78 b(.)42 b(.)f(.)g(.)g(.)h(.)f
(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)
h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g
(.)h(.)112 b(10)638 1604 y(2.2.1)98 b(Unique)19 b(Ids)68
b(.)42 b(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)
f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g
(.)h(.)f(.)g(.)h(.)112 b(10)638 1703 y(2.2.2)98 b(Fpages)75
b(.)41 b(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)
g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f
(.)g(.)g(.)h(.)f(.)g(.)h(.)112 b(10)638 1803 y(2.2.3)98
b(Messages)50 b(.)41 b(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h
(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)
g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)112 b(11)638 1903
y(2.2.4)98 b(T)m(imeouts)61 b(.)41 b(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)
f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g
(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)112
b(13)447 2002 y(2.3)86 b(L4)20 b(Calls)45 b(.)c(.)g(.)h(.)f(.)g(.)g(.)h
(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)
g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f
(.)g(.)h(.)112 b(15)638 2102 y(ipc)39 b(.)i(.)h(.)f(.)g(.)g(.)h(.)f(.)g
(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)
f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g
(.)h(.)f(.)g(.)h(.)112 b(16)638 2202 y(id)p 708 2202
25 4 v 29 w(nearest)60 b(.)41 b(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g
(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)
f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)112
b(23)638 2301 y(fpage)p 829 2301 V 28 w(unmap)73 b(.)41
b(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g
(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)
g(.)g(.)h(.)f(.)g(.)h(.)112 b(24)638 2401 y(thread)p
852 2401 V 28 w(switch)61 b(.)41 b(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g
(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)
g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)112
b(25)638 2500 y(thread)p 852 2500 V 28 w(schedule)48
b(.)41 b(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)
g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f
(.)g(.)g(.)h(.)f(.)g(.)h(.)112 b(26)638 2600 y(lthread)p
875 2600 V 28 w(e)o(x)p 981 2600 V 29 w(re)o(gs)72 b(.)41
b(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h
(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)
g(.)h(.)f(.)g(.)h(.)112 b(28)638 2700 y(task)p 777 2700
V 30 w(ne)n(w)27 b(.)41 b(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g
(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)
f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)112
b(30)447 2799 y(2.4)86 b(Processor)19 b(Mirroring)28
b(.)42 b(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)
f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g
(.)h(.)f(.)g(.)h(.)112 b(32)638 2899 y(2.4.1)98 b(Se)o(gments)50
b(.)41 b(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)
h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g
(.)g(.)h(.)f(.)g(.)h(.)112 b(32)638 2999 y(2.4.2)98 b(Exception)18
b(Handling)79 b(.)41 b(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g
(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)
f(.)g(.)h(.)112 b(32)638 3098 y(2.4.3)98 b(Deb)n(ug)19
b(Re)o(gisters)74 b(.)42 b(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g
(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)
g(.)g(.)h(.)f(.)g(.)h(.)112 b(32)447 3198 y(2.5)86 b(The)20
b(K)n(ernel-Info)d(P)o(age)43 b(.)e(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g
(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)
g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)112 b(33)447
3297 y(2.6)86 b(P)o(age-F)o(ault)19 b(and)h(Preemption)e(RPC)59
b(.)42 b(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)
f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)112
b(34)447 3397 y(2.7)86 b Fy(\033)685 3409 y Fx(0)743
3397 y FI(RPC)22 b(protocol)77 b(.)41 b(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h
(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)
g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)112
b(35)447 3497 y(2.8)86 b(Starting)20 b(L4)75 b(.)42 b(.)f(.)g(.)g(.)h
(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)
g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f
(.)g(.)h(.)112 b(37)322 3679 y Fz(A)65 b(Booting)3114
b(39)p eop
%%Page: 6 6
6 5 bop 156 -290 a FI(6)3125 b FB(CONTENTS)p eop
%%Page: 7 7
7 6 bop 322 566 a Fw(Chapter)45 b(1)322 981 y FA(L4)52
b(in)g(General)1572 2243 y FI(Chapter)20 b(ommitted)f(in)h(this)h
(release.)2102 5620 y(7)p eop
%%Page: 8 8
8 7 bop 156 -290 a FI(8)2442 b FB(CHAPTER)21 b(1.)46
b(L4)20 b(IN)g(GENERAL)p eop
%%Page: 9 9
9 8 bop 322 566 a Fw(Chapter)45 b(2)322 981 y FA(L4-X/x86)322
1413 y FI(The)16 b(L4/x86)f(Nucleus)g(runs)h(on)g(x86-type)d
(processor')-5 b(s)16 b(that)g(of)n(fer)f(at)h(least)h(the)f
(functionality)e(of)i(an)g(Intel)g(486)f(processor)m(,)322
1512 y(e.g.)20 b(486,)f(Pentium,)g(PentiumPro,)g(Pentium)h(II,)f(and)h
(Pentium)g(III.)322 4118 y FH(2.1)119 b(Notational)30
b(con)-5 b(v)o(entions)1210 4534 y Fv(\030)296 b FI(If)34
b(this)h(refers)g(to)g(an)f(input)g(parameter)m(,)j(its)f(v)n(alue)e
(is)1571 4633 y(meaningless.)52 b(If)29 b(it)h(refers)f(to)h(an)f
(output)g(parameter)m(,)1571 4733 y(its)21 b(v)n(alue)e(is)i
(unde\002ned.)1014 4916 y(EAX,ECX.)12 b(.)g(.)112 b(denote)19
b(the)h(processor')-5 b(s)19 b(general)g(re)o(gisters.)1107
5098 y Fv(h)p FI(SP)p Fu(+)p Fy(n)p Fv(i)193 b FI(denotes)27
b(the)i(w)o(ord)e(on)h(the)h(user)f(stack)h(addressed)e(by)1571
5198 y(SP)p Fu(+)p Fy(n)p FI(,)36 b(where)d(SP)h(represents)f(the)g
(user)n(-le)n(v)o(el)f(stack)1571 5297 y(pointer)-5 b(.)2102
5620 y(9)p eop
%%Page: 10 10
10 9 bop 156 -290 a FI(10)2663 b FB(CHAPTER)21 b(2.)46
b(L4-X/X86)156 -57 y FH(2.2)119 b(Data)30 b(T)-9 b(ypes)156
169 y Ft(2.2.1)99 b(Unique)26 b(Ids)156 349 y FI(Unique)c(ids)g
(identify)f(tasks,)j(threads)d(and)h(hardw)o(are)f(interrupts.)30
b(Each)22 b(unique)e(id)j(is)g(a)g(32-bit)e(v)n(alue)g(which)h(is)h
(unique)156 449 y(in)e(time.)k(An)20 b(unique)f(id)h(in)g(x86)g(format)
f(consists)i(of)e(one)h(32-bit)f(w)o(ord:)331 682 y Fs(thr)m(ead)g(id)p
1095 574 532 4 v 1095 740 4 167 v 614 w FF(chief)1394
696 y Fr(\(8\))p 1623 740 V 1095 743 532 4 v 1626 574
V 1626 740 4 167 v 1788 682 a FF(task)1912 696 y Fr(\(8\))p
2154 740 V 1626 743 532 4 v 2157 574 399 4 v 2157 740
4 167 v 2215 682 a FF(lthread)2416 696 y Fr(\(6\))p 2552
740 V 2157 743 399 4 v 2556 574 665 4 v 2556 740 4 167
v 2781 682 a FF(v)o(er)2882 696 y Fr(\(10\))p 3217 740
V 2556 743 665 4 v 331 959 a Fs(task)h(id)p 1095 851
532 4 v 1095 1017 4 167 v 694 w FF(chief)1394 973 y Fr(\(8\))p
1623 1017 V 1095 1020 532 4 v 1626 851 V 1626 1017 4
167 v 1788 959 a FF(task)1912 973 y Fr(\(8\))p 2154 1017
V 1626 1020 532 4 v 2157 851 399 4 v 2157 1017 4 167
v 2290 959 a FF(0)2340 973 y Fr(\(6\))p 2552 1017 V 2157
1020 399 4 v 2556 851 665 4 v 2556 1017 4 167 v 2781
959 a FF(v)o(er)2882 973 y Fr(\(10\))p 3217 1017 V 2556
1020 665 4 v 331 1235 a Fs(interrupt)g(id)p 1095 1127
1595 4 v 1095 1293 4 167 v 1098 w FF(0)1860 1249 y Fr(\(24\))p
2685 1293 V 1095 1296 1595 4 v 2689 1127 532 4 v 2689
1293 4 167 v 2807 1235 a FF(intr)d(+)h(1)3019 1249 y
Fr(\(8\))p 3217 1293 V 2689 1296 532 4 v 331 1512 a Fs(nil)i(id)p
1095 1404 2126 4 v 1095 1570 4 167 v 1572 w FF(0)2126
1526 y Fr(\(32\))p 3217 1570 V 1095 1573 2126 4 v 331
1788 a Fs(in)m(valid)f(id)p 1095 1680 V 1095 1846 4 167
v 1301 w FF(FFFFFFFF)2257 1802 y Fr(\(32\))p 3217 1846
V 1095 1849 2126 4 v 783 2074 2347 4 v 781 2174 4 100
v 833 2144 a FI(a)n(v)n(ailable)h(tasks:)496 b(255)98
b(1\226)o(255)140 b(task)20 b(0)h(does)e(not)h(e)o(xist)p
3128 2174 V 783 2177 2347 4 v 781 2277 4 100 v 833 2247
a(a)n(v)n(ailable)g(threads)f(per)h(task:)182 b(64)99
b(0\226)o(63)p 3128 2277 V 783 2280 2347 4 v 781 2379
4 100 v 833 2350 a(usable)20 b(v)o(ersion)f(numbers:)152
b(1024)98 b(0\226)o(1023)p 3128 2379 V 783 2383 2347
4 v 156 2825 a Ft(2.2.2)h(Fpages)156 3005 y FI(Fpages)22
b(\(Fle)o(xpages\))f(are)h(re)o(gions)f(of)h(the)g(virtual)f(address)h
(space.)31 b(An)22 b(fpage)f(consists)i(of)e(all)i(pages)f(actually)g
(mapped)156 3104 y(in)f(this)f(re)o(gion.)k(The)c(minimal)f(fpage)g
(size)i(is)g(4)g(K,)f(the)g(minimal)g(hardw)o(are-page)d(size.)281
3217 y(An)i(fpage)f(of)h(size)h Fu(2)886 3187 y Fq(s)940
3217 y FI(has)g(a)f Fu(2)1169 3187 y Fq(s)1204 3217 y
FI(-aligned)f(base)h(address)g Fy(b)p FI(,)g(i.e.)g Fy(b)k
Fu(mo)r(d)g(2)2412 3187 y Fq(s)2447 3209 y Fx(=)2498
3217 y Fu(0)p FI(.)i(On)19 b(the)g(x86)f(processors,)g(the)h(smallest)
156 3316 y(possible)d(v)n(alue)g(for)g Fy(s)h FI(is)g(12,)g(since)f
(hardw)o(are)f(pages)h(are)g(at)h(least)g(4K.)f(The)h(complete)e(user)h
(address)g(space)g(\(base)g(address)156 3416 y(0,)26
b(size)f Fu(2)441 3386 y Fx(32)532 3416 y Fv(\000)d Fy(K)6
b FI(,)25 b(where)f Fy(K)30 b FI(is)c(the)e(size)h(of)f(the)h(k)o
(ernel)f(area\))g(is)h(denoted)e(by)h Fy(b)31 b Fu(=)f(0)p
Fy(;)14 b(s)30 b Fu(=)h(32)p FI(.)37 b(An)25 b(fpage)e(with)i(base)156
3516 y(address)20 b Fy(b)h FI(and)e(size)i Fu(2)815 3485
y Fq(s)871 3516 y FI(is)g(denoted)d(by)i(a)h(32-bit)e(w)o(ord:)331
3749 y(fpage)g Fu(\()p Fy(b;)14 b Fu(2)683 3719 y Fq(s)718
3749 y Fu(\))p 1095 3641 1329 4 v 1095 3807 4 167 v 841
w Fp(b=)p Fo(4096)1814 3763 y Fr(\(20\))p 2420 3807 V
1095 3810 1329 4 v 2423 3641 266 4 v 2423 3807 4 167
v 2490 3749 a FF(0)2539 3763 y Fr(\(4\))p 2685 3807 V
2423 3810 266 4 v 2689 3641 399 4 v 2689 3807 4 167 v
2822 3749 a Fp(s)2871 3763 y Fr(\(6\))p 3084 3807 V 2689
3810 399 4 v 3087 3641 67 4 v 3087 3807 4 167 v 3093
3749 a FE(\030)p 3150 3807 V 3087 3810 67 4 v 3153 3641
V 3153 3807 4 167 v 11 w(\030)p 3217 3807 V 3153 3810
67 4 v 331 4056 a FI(fpage)19 b Fu(\(0)p Fy(;)14 b Fu(2)689
4026 y Fx(32)777 4056 y Fv(\000)k Fy(K)6 b Fu(\))p 1095
3948 1329 4 v 1095 4114 4 167 v 708 w FF(0)1727 4070
y Fr(\(20\))p 2420 4114 V 1095 4117 1329 4 v 2423 3948
266 4 v 2423 4114 4 167 v 2490 4056 a FF(0)2539 4070
y Fr(\(4\))p 2685 4114 V 2423 4117 266 4 v 2689 3948
399 4 v 2689 4114 4 167 v 2805 4056 a FF(32)2888 4070
y Fr(\(6\))p 3084 4114 V 2689 4117 399 4 v 3087 3948
67 4 v 3087 4114 4 167 v 3093 4056 a FE(\030)p 3150 4114
V 3087 4117 67 4 v 3153 3948 V 3153 4114 4 167 v 11 w(\030)p
3217 4114 V 3153 4117 67 4 v 156 4508 a Fz(IO-P)n(orts)156
4688 y FI(x86)21 b(IO-ports)f(form)g(a)i(separate)f(address)g(space)g
(besides)g(the)h(con)m(v)o(entional)c(memory)h(address)i(space.)28
b(Its)22 b(size)g(is)h(64)d(K)156 4787 y(and)j(its)i(granularity)c(is)k
(16)e(bytes.)34 b(Ho)n(we)n(v)o(er)m(,)22 b(IO-ports)h(can)g(only)g(be)
g(mapped)f(idempotently)-5 b(,)21 b(i.e.)35 b(physical)23
b(port)g Fy(x)h FI(is)156 4887 y(either)c(mapped)f(at)h(the)h(address)e
Fy(x)j FI(in)e(the)g(task')-5 b(s)21 b(IO)f(address)g(space)g(or)g(it)h
(is)g(not)f(mapped.)281 4999 y(L4)j(handles)f(IO-ports)g(lik)o(e)h
(memory)-5 b(,)22 b(i.e.)33 b(as)24 b(fpages.)33 b(IO-fpages)21
b(can)i(be)g(mapped,)f(granted)g(and)g(unmapped)f(lik)o(e)156
5099 y(memory)c(fpages.)24 b(Ho)n(we)n(v)o(er)m(,)16
b(since)j(IO-ports)e(can)i(only)e(mapped)g(idempotent,)g(al)o(w)o(ays)i
(the)g(complete)e(IO)i(space)f(\(64)g(K\))156 5198 y(should)i(be)g
(speci\002ed)g(as)h(recei)n(v)o(e)e(fpage.)281 5311 y(An)g(IO-fpage)f
(of)h(size)h Fu(2)1002 5281 y Fq(s)1057 5311 y FI(\()p
Fu(4)1141 5303 y Fn(\024)1206 5311 y Fy(s)1259 5303 y
Fn(\024)1325 5311 y Fu(16)p FI(\))e(has)i(a)g Fu(2)1685
5281 y Fq(s)1720 5311 y FI(-aligned)e(base)h(address)g
Fy(p)p FI(,)h(i.e.)g Fy(p)i Fu(mo)r(d)i(2)2942 5281 y
Fq(s)2977 5303 y Fx(=)3028 5311 y Fu(0)p FI(.)g(An)c(fpage)e(with)i
(base)156 5410 y(port)g(address)g Fy(p)g FI(and)g(size)h
Fu(2)976 5380 y Fq(s)1031 5410 y FI(is)h(denoted)c(by)i(a)h(32-bit)e(w)
o(ord:)p eop
%%Page: 11 11
11 10 bop 322 -290 a FB(2.2.)45 b(D)m(A)-9 b(T)h(A)21
b(TYPES)2860 b FI(11)497 -28 y(IO-fpage)18 b Fu(\()p
Fy(p;)c Fu(2)970 -59 y Fq(s)1005 -28 y Fu(\))p 1261 -136
532 4 v 1261 30 4 167 v 405 w FF(F0)1528 -14 y Fr(\(8\))p
1789 30 V 1261 33 532 4 v 1792 -136 798 4 v 1792 30 4
167 v 2108 -28 a Fp(p)2160 -14 y Fr(\(12\))p 2586 30
V 1792 33 798 4 v 2589 -136 266 4 v 2589 30 4 167 v 2656
-28 a FF(0)2705 -14 y Fr(\(4\))p 2851 30 V 2589 33 266
4 v 2855 -136 399 4 v 2855 30 4 167 v 2988 -28 a Fp(s)3037
-14 y Fr(\(6\))p 3250 30 V 2855 33 399 4 v 3253 -136
67 4 v 3253 30 4 167 v 3259 -28 a FE(\030)p 3316 30 V
3253 33 67 4 v 3320 -136 V 3320 30 4 167 v 12 w(\030)p
3383 30 V 3320 33 67 4 v 497 279 a FI(IO-fpage)k Fu(\(0)p
Fy(;)c Fu(2)970 249 y Fx(16)1040 279 y Fu(\))p 1261 171
532 4 v 1261 337 4 167 v 370 w FF(F0)1528 293 y Fr(\(8\))p
1789 337 V 1261 340 532 4 v 1792 171 798 4 v 1792 337
4 167 v 2109 279 a FF(0)2159 293 y Fr(\(12\))p 2586 337
V 1792 340 798 4 v 2589 171 266 4 v 2589 337 4 167 v
2656 279 a FF(0)2705 293 y Fr(\(4\))p 2851 337 V 2589
340 266 4 v 2855 171 399 4 v 2855 337 4 167 v 2971 279
a FF(16)3054 293 y Fr(\(6\))p 3250 337 V 2855 340 399
4 v 3253 171 67 4 v 3253 337 4 167 v 3259 279 a FE(\030)p
3316 337 V 3253 340 67 4 v 3320 171 V 3320 337 4 167
v 12 w(\030)p 3383 337 V 3320 340 67 4 v 322 779 a Ft(2.2.3)99
b(Messages)322 943 y Fz(Register)20 b(Messages/Buffers)322
1107 y FI(Re)o(gister)j(messages)f(consist)g(of)g(up)g(to)g(3)g(w)o
(ords)g(of)f(32)h(bits.)31 b(Upon)21 b(sending,)h(the)g(message)g(is)h
(located)e(in)h(the)g(re)o(gisters)322 1206 y(EDX,)g(EBX,)g(and)f(EDI.)
h(Upon)e(recei)n(ving,)h(the)g(same)h(re)o(gisters)f(serv)o(e)h(as)g(a)
g(b)n(uf)n(fer)m(,)e(i.e.)i(the)g(re)o(gisters)f(EDX,)h(EBX,)g(and)322
1306 y(EDI)f(contain)e(the)h(recei)n(v)o(ed)f(message)h(\(where)f(send)
h(EDX)g(is)h(recei)n(v)o(ed)e(EDX,)h(etc.\).)p 1302 1423
2126 4 v 1302 1589 4 167 v 2191 1531 a FF(dw)o(ord)d(2)2426
1545 y Fr(\(32\))p 3424 1589 V 1302 1592 2126 4 v 3559
1531 a FI(EDI)p 1302 1596 V 1302 1762 4 167 v 2191 1704
a FF(dw)o(ord)g(1)2426 1718 y Fr(\(32\))p 3424 1762 V
1302 1765 2126 4 v 3532 1704 a FI(EBX)p 1302 1768 V 1302
1934 4 167 v 2191 1876 a FF(dw)o(ord)g(0)2426 1890 y
Fr(\(32\))p 3424 1934 V 1302 1937 2126 4 v 3527 1876
a FI(EDX)322 2314 y Fz(Simple)22 b(Memory)e(Messages/Buffers)322
2478 y FI(If)d(messages)f(are)g(longer)f(than)h(3)g(dw)o(ords,)g
(memory)f(messages)h(ha)n(v)o(e)g(to)g(be)g(used.)24
b(Such)16 b(messages)g(consist)g(of)g(a)h(message)322
2577 y(descriptor)23 b(\(dope\))g(that,)i(e.g.,)g(speci\002es)g(the)f
(current)f(message)h(length)g(in)g(dw)o(ords)g(\(msg)g(snd)g(dope\))f
(for)g(messages)i(to)322 2677 y(be)c(sent.)447 2781 y(A)32
b(message)g(recei)n(v)o(e)e(b)n(uf)n(fer)g(is)j(structured)d(similarly)
i(b)n(ut)f(the)h(size)g(of)g(the)f(recei)n(v)o(e)g(b)n(uf)n(fer)m(,)h
(i.e.)g(the)g(maximum)322 2880 y(message)21 b(length)f(than)h(can)f(be)
h(recei)n(v)o(ed)f(in)h(this)g(b)n(uf)n(fer)m(,)e(is)j(speci\002ed)f
(by)f(the)h(msg)g(size)h(dope,)d(also)j(in)f(dw)o(ords.)26
b(After)21 b(a)322 2980 y(message)h(w)o(as)h(recei)n(v)o(ed,)d(the)i
Fs(msg)g(snd)g(dope)f FI(contains)g(the)g(current)g(length)g(of)g(the)h
(recei)n(v)o(ed)e(message.)30 b Fs(msg)22 b(size)h(dope)322
3080 y FI(is)f(unchanged.)2354 3168 y(.)2354 3202 y(.)2354
3235 y(.)p 1302 3268 V 1302 3434 4 167 v 2191 3376 a
FF(dw)o(ord)17 b(3)2426 3390 y Fr(\(32\))p 3424 3434
V 1302 3437 2126 4 v 3527 3376 a FI(+32)p 1302 3441 V
1302 3607 4 167 v 1924 3549 a FF(\(dw)o(ord)h(2)f(\227)g(not)g
(transferred\))2693 3563 y Fr(\(32\))p 3424 3607 V 1302
3610 2126 4 v 3527 3549 a FI(+24)p 1302 3613 V 1302 3779
4 167 v 1924 3721 a FF(\(dw)o(ord)h(1)f(\227)g(not)g(transferred\))2693
3735 y Fr(\(32\))p 3424 3779 V 1302 3782 2126 4 v 3527
3721 a FI(+16)372 3894 y(msg)j(dw)o(ords:)p 1302 3786
V 1302 3952 4 167 v 1125 w FF(\(dw)o(ord)e(0)f(\227)g(not)g
(transferred\))2693 3908 y Fr(\(32\))p 3424 3952 V 1302
3955 2126 4 v 3527 3894 a FI(+12)372 4067 y(msg)j(snd)g(dope:)p
1302 3959 1262 4 v 1302 4125 4 167 v 918 w FF(dw)o(ords)1982
4081 y Fr(\(19\))p 2561 4125 V 1302 4128 1262 4 v 2564
3959 333 4 v 2564 4125 4 167 v 2664 4067 a FF(0)2714
4081 y Fr(\(5\))p 2893 4125 V 2564 4128 333 4 v 2896
3959 532 4 v 2896 4125 4 167 v 3085 4067 a FE(\030)3156
4081 y Fr(\(8\))p 3424 4125 V 2896 4128 532 4 v 3569
4067 a FI(+8)372 4239 y(msg)g(size)h(dope:)p 1302 4131
1262 4 v 1302 4297 4 167 v 904 w FF(dw)o(ords)1982 4253
y Fr(\(19\))p 2561 4297 V 1302 4300 1262 4 v 2564 4131
333 4 v 2564 4297 4 167 v 2664 4239 a FF(0)2714 4253
y Fr(\(5\))p 2893 4297 V 2564 4300 333 4 v 2896 4131
532 4 v 2896 4297 4 167 v 3085 4239 a FE(\030)3156 4253
y Fr(\(8\))p 3424 4297 V 2896 4300 532 4 v 3569 4239
a FI(+4)372 4412 y(msg)f(rcv)g(fpage)f(option:)p 1302
4304 2126 4 v 1302 4470 4 167 v 1126 w FF(fpage)2390
4426 y Fr(\(32\))p 3424 4470 V 1302 4473 2126 4 v 3615
4412 a FI(0)322 4709 y(Using)f(dif)n(ferent)f(send)h(and)f(size)i
(dopes)e(permits)h(to)g(specify)g(not)g(only)f(pure)g(send)h(messages)g
(and)g(pure)f(recei)n(v)o(e)g(message)322 4808 y(b)n(uf)n(fers.)25
b(It)20 b(is)h(as)g(well)g(possibe)f(to)h(send)f(a)g(message)h(and)e
(recei)n(v)o(e)h(the)g(reply)f(using)h(the)g(same)h(data)f(structure.)k
(And,)c(you)322 4908 y(can)i(also)g(recei)n(v)o(e)e(a)i(message)f(in)h
(a)g(message)f(b)n(uf)n(fer)g(and)g(then)g(forrw)o(ard)e(this)j(b)n(uf)
n(fer)f(as)h(a)g(message)f(without)g(changing)322 5008
y(the)g(data)f(structure.)447 5111 y(A)g(further)e(simpli\002cation)g
(for)h(user)n(-le)n(v)o(el)f(programming)e(is)21 b(that)e
Fs(the)h(\002r)o(st)g(thr)m(ee)f(dwor)m(ds)h(of)f(a)h(messa)o(g)o(e)f
(ar)m(e)h(always)322 5211 y(tr)o(ansferr)m(ed)i(via)f(r)m(e)m(gister)-9
b(.)30 b FI(This)22 b(permits)f(to)g(handle)g(long)g(\(memory\))e(and)i
(short)g(\(re)o(gister\))f(messages)i(basically)f(in)h(the)322
5311 y(same)d(w)o(ay)f(\(the)g(\002rst)h(three)f(dw)o(ords)f(are)h(al)o
(w)o(ays)h(in)f(re)o(gisters\).)23 b(Note)c(that)f(loading/storing)d
(those)j(re)o(gisters)g(from/to)f(the)322 5410 y(message/b)n(uf)n(fer)i
(data)h(structure)f(is)i Fs(not)f FI(handled)f(by)g(the)i(Nucleus.)j
(It)d(can)f(be)g(done)f(at)i(user)f(le)n(v)o(el.)p eop
%%Page: 12 12
12 11 bop 156 -290 a FI(12)2663 b FB(CHAPTER)21 b(2.)46
b(L4-X/X86)156 -57 y Fz(Memory)20 b(Messages/Buffers)h(W)o(ith)f(Indir)
o(ect)g(P)o(arts)156 129 y FI(Comple)o(x)j(messages)h(or)g(b)n(uf)n
(fers)f(can)g(contain)g(up)h(to)g(31)f(indirect)g(parts.)36
b(The)24 b(number)e(of)i(those)f(parts)h(is)h(speci\002ed)f(in)156
228 y(the)h Fs(parts)g FI(\002elds.)38 b(F)o(or)24 b(b)n(uf)n(fers,)h
(the)f Fs(msg)h(size)h(dope)d FI(de\002nes)h(the)h(maximum)e(number)g
(of)h(accepted)f(indirect)h(parts)h(for)156 328 y(recei)n(ving.)h(F)o
(or)20 b(messages,)h Fs(msg)g(snd)g(dope)f FI(de\002nes)h(the)g
(current)e(indirect)h(parts)h(for)f(sending,)g(and)g(the)h
Fs(dwor)m(ds)g FI(\002eld)g(of)156 427 y Fs(msg)f(size)g(dope)d
FI(de\002nes)i(the)g(position)f Fy(X)26 b FI(where)18
b(the)h(\002rst)h(indirect)e(part)g(is)i(located.)k Fs(Ther)m(efor)m(e)
o(,)19 b(the)g(dwor)m(ds)f(\002eld)h(of)g(the)156 527
y(msg)i(size)g(dope)e(must)i(be)f(set)h(corr)m(ectly)-5
b(,)21 b(e)o(ven)e(if)i(it)g(is)g(a)f(pur)m(e)g(send)g(messa)o(g)o(e)o
(.)2188 709 y FI(.)2188 742 y(.)2188 776 y(.)1152 b(+)p
Fy(X)7 b FI(+16)206 1033 y(part0)20 b(dope:)p 1136 809
2126 4 v 1136 1091 4 283 v 2111 1047 a Fr(\(4)p Fm(\002)p
Fr(32\))p 3258 1091 V 1136 1094 2126 4 v 3403 1033 a
FI(+)p Fy(X)7 b FI(+0)2409 1183 y Fl(X)16 b(=)h(\(msg)g(size)g(dope)o
(.parts+3\))p FE(\002)p Fo(4)2188 1171 y FI(.)2188 1204
y(.)2188 1237 y(.)2188 1325 y(.)2188 1359 y(.)2188 1392
y(.)p 1136 1425 V 1136 1591 4 167 v 2002 1533 a FF(\(dw)o(ord)h(1\))
2282 1547 y Fr(\(32\))p 3258 1591 V 1136 1594 2126 4
v 3483 1533 a FI(+16)206 1706 y(msg)i(dw)o(ords:)p 1136
1598 V 1136 1764 4 167 v 1369 w FF(\(dw)o(ord)e(0\))2282
1720 y Fr(\(32\))p 3258 1764 V 1136 1767 2126 4 v 3483
1706 a FI(+12)206 1878 y(msg)i(snd)g(dope:)p 1136 1770
1262 4 v 1136 1937 4 167 v 918 w FF(dw)o(ords)1816 1892
y Fr(\(19\))p 2395 1937 V 1136 1940 1262 4 v 2398 1770
333 4 v 2398 1937 4 167 v 2450 1878 a FF(parts)2596 1892
y Fr(\(5\))p 2727 1937 V 2398 1940 333 4 v 2730 1770
532 4 v 2730 1937 4 167 v 2919 1878 a FE(\030)2990 1892
y Fr(\(8\))p 3258 1937 V 2730 1940 532 4 v 3525 1878
a FI(+8)206 2051 y(msg)g(size)h(dope:)p 1136 1943 1262
4 v 1136 2109 4 167 v 904 w FF(dw)o(ords)1816 2065 y
Fr(\(19\))p 2395 2109 V 1136 2112 1262 4 v 2398 1943
333 4 v 2398 2109 4 167 v 2450 2051 a FF(parts)2596 2065
y Fr(\(5\))p 2727 2109 V 2398 2112 333 4 v 2730 1943
532 4 v 2730 2109 4 167 v 2919 2051 a FE(\030)2990 2065
y Fr(\(8\))p 3258 2109 V 2730 2112 532 4 v 3525 2051
a FI(+4)206 2224 y(msg)f(rcv)g(fpage)f(option:)p 1136
2116 2126 4 v 1136 2282 4 167 v 1126 w FF(fpage)2224
2238 y Fr(\(32\))p 3258 2282 V 1136 2285 2126 4 v 3572
2224 a FI(0)156 2465 y(Ev)o(ery)g(indirect)h(part)g(dope)f(can)h
(specify)g(an)g(indirect)g(send)g(part)g(and)g(an)g(indirect)g(recei)n
(v)o(e)f(b)n(uf)n(fer)-5 b(.)24 b(F)o(or)c(a)h(send)f(message,)156
2565 y(the)28 b(recei)n(v)o(e)f(b)n(uf)n(fer)g(part)h(is)h(ignored.)46
b(F)o(or)28 b(a)g(recei)n(v)o(e)f(b)n(uf)n(fer)m(,)h(the)g(recei)n(v)o
(e)f(b)n(uf)n(fer)g(speci\002es)h(the)g(b)n(uf)n(fer)f(address)h(and)
156 2665 y(maximum)23 b(length;)j(after)e(a)h(message)f(w)o(as)h(recei)
n(v)o(ed,)f(the)g(send)g(part)g(address)g(is)i(set)f(to)f(the)h(be)o
(ginning)d(of)i(the)g(recei)n(v)o(e)156 2764 y(b)n(uf)n(fer)30
b(and)g(the)h(send)f(part)g(length)g(speci\002es)h(the)g(current)f
(length.)55 b(Thus,)33 b(recei)n(v)o(ed)c(parts)i(can)f(be)h(forw)o
(arded)d(by)j(a)156 2864 y(successi)n(v)o(e)20 b(send)g(operation)f
(without)g(an)o(y)g(change.)p 1136 3009 V 1136 3175 4
167 v 2015 3117 a FF(*rcv)f(part)2269 3131 y Fr(\(32\))p
3258 3175 V 1136 3178 2126 4 v 3361 3117 a FI(+12)p 1136
3181 67 4 v 1136 3347 4 167 v 1155 3289 a FF(c)p 1199
3347 V 1136 3350 67 4 v 1202 3181 2059 4 v 1202 3347
4 167 v 821 w(rcv)f(part)h(size)2346 3303 y Fr(\(31\))p
3258 3347 V 1202 3350 2059 4 v 3403 3289 a FI(+8)p 1136
3354 2126 4 v 1136 3520 4 167 v 2011 3462 a FF(*snd)f(part)2273
3476 y Fr(\(32\))p 3258 3520 V 1136 3523 2126 4 v 3403
3462 a FI(+4)206 3635 y(part)j(dope:)p 1136 3527 67 4
v 1136 3693 4 167 v 613 w FF(c)p 1199 3693 V 1136 3696
67 4 v 1202 3527 2059 4 v 1202 3693 4 167 v 817 w(snd)d(part)h(size)
2350 3649 y Fr(\(31\))p 3258 3693 V 1202 3696 2059 4
v 3449 3635 a FI(0)156 3876 y(The)24 b Fy(c)h FI(bits)g(enable)e
Fs(scatter/gather)h FI(functionality)-5 b(.)34 b Fy(c)c
Fu(=)g(0)25 b FI(speci\002es)f(the)h(be)o(gin)e(of)g(a)i(logical)f
(string;)i Fy(c)k Fu(=)g(1)24 b FI(speci\002es)156 3976
y(that)19 b(this)g(is)g(a)g(continuation)d(of)i(the)h(last)g(logical)f
(string.)24 b(On)19 b(the)f(sender)g(side,)h Fs(lo)o(gical)e(string)i
FI(means)f(a)h(sequence)e(of)i(one)156 4076 y(or)i(more)e(parts)h(that)
h(are)f(transferred)f(as)i(if)g(the)o(y)e(were)i(one)e(contiguous)g
(string)h(\(gather\).)j(On)e(the)f(recei)n(v)o(er)f(side,)i
Fs(lo)o(gical)156 4175 y(string)31 b FI(means)f(a)g(sequence)f(of)h
(one)g(or)g(more)f(b)n(uf)n(fers)g(that)h(are)h(treated)e(as)i(one)f
(logical)f(b)n(uf)n(fer;)34 b(the)c(corresponding)156
4275 y(recei)n(v)o(ed)24 b(string)g(is)h(scattered)g(among)e(them.)38
b(Continuations)23 b(can)i(be)f(arbitrarily)f(combined)g(on)h(sender)g
(and)g(recei)n(v)o(er)156 4374 y(side.)i(Note)20 b(that)g(length)f(and)
h(size)h(\002elds)g(are)f(al)o(w)o(ays)g(per)g(part.)156
4681 y Fz(Map)h(Messages/Buffers)156 4866 y FI(Map)j(messages)h(are)f
(dif)n(ferentiated)d(from)j(cop)o(y)f(messages)h(in)g(the)h
Fs(ipc)f FI(system)g(call.)37 b(The)24 b(format)f(of)h(a)g(map)g
(message)156 4966 y(is)f(lik)o(e)e(a)h(re)o(gister)f(message)g(or)h
(memory)d(message)j(where)e(the)i(direct)f(message)g(part)g(\(not)g
(the)h(optional)e(indirect)g(parts\))156 5065 y(consists)h(of)f
Fs(snd)g(fpa)o(g)o(es)p FI(:)p 1136 5110 1993 4 v 1136
5276 4 167 v 1939 5218 a FF(snd)d(fpage)2212 5232 y Fr(\(30\))p
3125 5276 V 1136 5279 1993 4 v 3129 5110 67 4 v 3129
5276 4 167 v 3137 5218 a Fp(w)p 3192 5276 V 3129 5279
67 4 v 3195 5110 V 3195 5276 4 167 v 22 w(g)p 3258 5276
V 3195 5279 67 4 v 117 w FI(+4)206 5390 y(snd)j(fpage:)p
1136 5282 2126 4 v 1136 5449 4 167 v 1469 w FF(snd)d(base)2264
5404 y Fr(\(32\))p 3258 5449 V 1136 5452 2126 4 v 3408
5390 a FI(0)p eop
%%Page: 13 13
13 12 bop 322 -290 a FB(2.2.)45 b(D)m(A)-9 b(T)h(A)21
b(TYPES)2860 b FI(13)945 -161 y Fy(w)1006 -169 y Fx(=)1058
-161 y Fu(0)194 b FI(The)20 b(fpage)f(will)i(be)f(mapped/granted)d
(read)i(only)-5 b(.)945 -62 y Fy(w)1006 -70 y Fx(=)1058
-62 y Fu(1)194 b FI(The)41 b(fpage)g(will)h(be)g(mapped/granted)c(with)
k(the)f(full)h(access)g(right)f(the)h(mapper)1294 38
y(possesses.)945 204 y Fy(g)988 196 y Fx(=)1039 204 y
Fu(0)213 b FI(The)20 b(fpage)f(will)i(be)f(mapped.)945
304 y Fy(g)988 296 y Fx(=)1039 304 y Fu(1)213 b FI(The)20
b(fpage)f(will)i(be)f(granted.)322 646 y Ft(2.2.4)99
b(T)n(imeouts)322 827 y FI(T)m(imeouts)22 b(are)g(used)g(to)g(control)f
(ipc)h(operations.)29 b(The)21 b Fs(send)h(timeout)g
FI(determines)f(ho)n(w)g(long)h(ipc)g(should)f(try)h(to)g(send)g(a)322
927 y(message.)27 b(If)21 b(the)g(speci\002ed)g(period)e(is)j(e)o
(xhausted)d(without)h(that)h(message)g(transfer)f(could)g(start,)i(ipc)
e(f)o(ails.)28 b(The)21 b Fs(r)m(eceive)322 1027 y(timeout)27
b FI(speci\002es)h(ho)n(w)e(long)g(ipc)h(should)f(w)o(ait)i(for)e(an)h
(incoming)e(message.)46 b(Both)27 b(timouts)f(specify)h(the)g(maximum)
322 1126 y(period)19 b(of)h(time)g Fs(befor)m(e)f(messa)o(g)o(e)h(tr)o
(ansfer)g(starts)p FI(.)26 b(Once)20 b(started,)f(message)h(transfer)f
(is)i(no)e(longer)g(in\003uenced)f(by)h(send)322 1226
y(or)h(recei)n(v)o(e)f(timeout.)447 1339 y(P)o(agef)o(aults)32
b(occuring)e(during)g(ipc)j(are)f(controlled)e(by)i Fs(send)g
FI(and)g Fs(r)m(eceive)g(pa)o(g)o(efault)f(timeout)p
FI(.)60 b(A)33 b(pagef)o(ault)e(is)322 1438 y(translated)16
b(to)g(an)g(RPC)h(by)f(the)f(k)o(ernel.)23 b(In)16 b(the)g(case)g(of)g
(a)g(pagef)o(ault)f(in)h(the)g(recei)n(v)o(er')-5 b(s)15
b(address)g(space,)i(the)e(corresponding)322 1538 y(RPC)23
b(to)d(the)h(pager)f(uses)h Fs(send)f(pa)o(g)o(efault)g(timeout)g
FI(\(speci\002ed)g(by)g(the)h(sender\))f(for)g(both)f(send)i(and)f
(recei)n(v)o(e)g(timeout.)25 b(In)322 1638 y(the)h(case)h(of)f(a)g
(pagef)o(ault)f(in)h(the)g(sender')-5 b(s)25 b(address)h(space,)h
Fs(r)m(eceive)f(pa)o(g)o(efault)f(timeout)g FI(speci\002ed)h(by)g(the)g
(recei)n(v)o(er)e(is)322 1737 y(tak)o(en.)447 1850 y(Besides)d(the)f
(special)g(timeouts)g(0)g(\(do)f(not)h(w)o(ait)h(at)f(all\))g(and)g
Fv(1)g FI(\(w)o(ait)h(fore)n(v)o(er\),)c(periods)i(from)g(1)h
Fy(\026)p FI(s)h(up)f(to)g(approxi-)322 1950 y(mately)g(19)g(hours)f
(can)h(be)g(speci\002ed.)25 b(The)20 b(complete)f(quadruple)f(is)j
(pack)o(ed)e(into)h(one)f(32-bit)g(w)o(ord:)p 1060 2253
532 4 v 1060 2419 4 167 v 1227 2361 a Fp(m)1289 2369
y Fk(r)1341 2375 y Fr(\(8\))p 1588 2419 V 1060 2422 532
4 v 1591 2253 V 1591 2419 4 167 v 1759 2361 a Fp(m)1821
2369 y Fk(s)1872 2375 y Fr(\(8\))p 2119 2419 V 1591 2422
532 4 v 2122 2253 266 4 v 2122 2419 4 167 v 2171 2361
a Fp(p)2207 2369 y Fk(s)2257 2375 y Fr(\(4\))p 2385 2419
V 2122 2422 266 4 v 2388 2253 V 2388 2419 4 167 v 2436
2361 a Fp(p)2472 2369 y Fk(r)2523 2375 y Fr(\(4\))p 2650
2419 V 2388 2422 266 4 v 2654 2253 V 2654 2419 4 167
v 2704 2361 a Fp(e)2737 2369 y Fk(s)2787 2375 y Fr(\(4\))p
2916 2419 V 2654 2422 266 4 v 2919 2253 V 2919 2419 4
167 v 2969 2361 a Fp(e)3002 2369 y Fk(r)3053 2375 y Fr(\(4\))p
3182 2419 V 2919 2422 266 4 v 447 2748 a FI(Note)h(that)g(for)g(ef)n
(\002cienc)o(y)f(reasons)g(the)i(highest)e(bit)i(of)f(an)o(y)f
(mantissa)h Fy(m)h Fs(must)g FI(be)f(1,)g(e)o(xcept)f(for)g
Fy(m)3418 2740 y Fx(=)3469 2748 y Fu(0)p FI(.)1390 3279
y FF(snd)e(timeout)85 b Fo(=)1923 3063 y Fj(8)1923 3138
y(>)1923 3163 y(>)1923 3188 y(<)1923 3337 y(>)1923 3362
y(>)1923 3387 y(:)2038 3116 y FE(1)476 b FF(if)67 b Fp(e)2725
3124 y Fk(s)2758 3108 y Fr(=)2804 3116 y Fo(0)2038 3279
y(4)2073 3255 y Fr(15)p Fm(\000)p Fk(e)2210 3263 y Fi(s)2248
3279 y Fp(m)2310 3287 y Fk(s)2360 3279 y Fp(\026s)150
b FF(if)67 b Fp(e)2725 3287 y Fk(s)2758 3271 y(>)2806
3279 y Fo(0)2038 3440 y(0)512 b FF(if)67 b Fp(m)2754
3448 y Fk(s)2788 3432 y Fr(=)2834 3440 y Fo(0)p Fp(;)12
b(e)2934 3448 y Fk(s)2967 3432 y Fm(6)p Fr(=)3013 3440
y Fo(0)1398 3857 y FF(rcv)17 b(timeout)85 b Fo(=)1923
3641 y Fj(8)1923 3715 y(>)1923 3740 y(>)1923 3765 y(<)1923
3915 y(>)1923 3940 y(>)1923 3965 y(:)2038 3694 y FE(1)479
b FF(if)67 b Fp(e)2728 3702 y Fk(r)2762 3686 y Fr(=)2809
3694 y Fo(0)2038 3856 y(4)2073 3833 y Fr(15)p Fm(\000)p
Fk(e)2210 3841 y Fi(r)2250 3856 y Fp(m)2312 3864 y Fk(r)2363
3856 y Fp(\026s)150 b FF(if)67 b Fp(e)2728 3864 y Fk(r)2762
3848 y(>)2810 3856 y Fo(0)2038 4018 y(0)515 b FF(if)67
b Fp(m)2757 4026 y Fk(r)2792 4010 y Fr(=)2838 4018 y
Fo(0)p Fp(;)12 b(e)2938 4026 y Fk(r)2972 4010 y Fm(6)p
Fr(=)3019 4018 y Fo(0)1127 4434 y FF(snd)17 b(pagef)o(ault)j(timeout)85
b Fo(=)1923 4218 y Fj(8)1923 4293 y(>)1923 4318 y(>)1923
4343 y(<)1923 4492 y(>)1923 4517 y(>)1923 4542 y(:)2038
4271 y FE(1)449 b FF(if)67 b Fp(p)2701 4279 y Fk(s)2734
4263 y Fr(=)2781 4271 y Fo(0)2038 4433 y(4)2073 4410
y Fr(15)p Fm(\000)p Fk(p)2213 4418 y Fi(s)2251 4433 y
Fp(\026s)232 b FF(if)67 b Fo(0)2700 4425 y Fk(<)2749
4433 y Fp(p)2785 4441 y Fk(s)2817 4425 y(<)2865 4433
y Fo(15)2038 4595 y(0)485 b FF(if)67 b Fp(p)2701 4603
y Fk(s)2734 4587 y Fr(=)2781 4595 y Fo(15)1135 5011 y
FF(rcv)17 b(pagef)o(ault)j(timeout)85 b Fo(=)1923 4795
y Fj(8)1923 4870 y(>)1923 4895 y(>)1923 4920 y(<)1923
5069 y(>)1923 5094 y(>)1923 5119 y(:)2038 4848 y FE(1)434
b FF(if)67 b Fp(p)2686 4856 y Fk(r)2720 4840 y Fr(=)2767
4848 y Fo(0)2038 5011 y(4)2073 4987 y Fr(16)p Fm(\000)p
Fk(p)2213 4995 y Fi(r)2252 5011 y Fp(\026s)216 b FF(if)67
b Fo(0)2685 5003 y Fk(<)2733 5011 y Fp(p)2769 5019 y
Fk(r)2804 5003 y(<)2852 5011 y Fo(15)2038 5173 y(0)470
b FF(if)67 b Fp(p)2686 5181 y Fk(r)2720 5165 y Fr(=)2767
5173 y Fo(15)p eop
%%Page: 14 14
14 13 bop 156 -290 a FI(14)2663 b FB(CHAPTER)21 b(2.)46
b(L4-X/X86)p 1235 -136 1443 4 v 1233 -57 4 79 v 2676
-57 V 1233 55 4 162 v 1586 -52 a FF(approximate)19 b(timeout)g(ranges)p
2676 55 V 1235 58 1443 4 v 1233 223 4 165 v 1285 158
a Fp(e)1318 166 y Fk(s)1351 158 y Fp(;)11 b(e)1415 166
y Fk(r)1450 158 y Fp(;)g(p)1517 166 y Fk(s)1550 158 y
Fp(;)g(p)1617 166 y Fk(r)p 1700 223 V 1700 223 V 1785
158 a FF(snd/rcv)19 b(timeout)p 2283 223 V 2283 223 V
145 w(pf)e(timeout)p 2676 223 V 1235 226 1443 4 v 1233
391 4 165 v 1452 326 a(0)p 1700 391 V 1700 391 V 473
w FE(1)p 2283 391 V 2283 391 V 417 w(1)p 2676 391 V 1233
470 4 79 v 1452 446 a FF(1)p 1700 470 V 266 w(256)g(s)68
b(.)10 b(.)g(.)42 b(19)17 b(h)p 2283 470 V 244 w(256)g(s)p
2676 470 V 1233 549 V 1452 525 a(2)p 1700 549 V 299 w(64)g(s)68
b(.)10 b(.)g(.)42 b(55)17 b(h)p 2283 549 V 277 w(64)g(s)p
2676 549 V 1233 627 V 1452 604 a(3)p 1700 627 V 299 w(16)g(s)68
b(.)10 b(.)g(.)42 b(71)17 b(m)p 2283 627 V 258 w(16)g(s)p
2676 627 V 1233 706 V 1452 683 a(4)p 1700 706 V 332 w(4)g(s)68
b(.)10 b(.)g(.)42 b(17)17 b(m)p 2283 706 V 291 w(4)g(s)p
2676 706 V 1233 785 V 1452 762 a(5)p 1700 785 V 332 w(1)g(s)68
b(.)10 b(.)g(.)76 b(4)16 b(m)p 2283 785 V 291 w(1)h(s)p
2676 785 V 1233 864 V 1452 840 a(6)p 1700 864 V 266 w(262)g(ms)f(.)10
b(.)g(.)42 b(67)17 b(s)p 2283 864 V 251 w(256)g(ms)p
2676 864 V 1233 943 V 1452 919 a(7)p 1700 943 V 299 w(65)g(ms)f(.)10
b(.)g(.)42 b(17)17 b(s)p 2283 943 V 284 w(64)g(ms)p 2676
943 V 1233 1022 V 1452 998 a(8)p 1700 1022 V 299 w(16)g(ms)f(.)10
b(.)g(.)76 b(4)16 b(s)p 2283 1022 V 284 w(16)h(ms)p 2676
1022 V 1233 1101 V 1452 1077 a(9)p 1700 1101 V 332 w(4)g(ms)f(.)10
b(.)g(.)76 b(1)16 b(s)p 2283 1101 V 317 w(4)h(ms)p 2676
1101 V 1233 1180 V 1435 1156 a(10)p 1700 1180 V 316 w(1)g(ms)f(.)10
b(.)g(.)f(261)17 b(ms)p 2283 1180 V 265 w(1)g(ms)p 2676
1180 V 1233 1258 V 1435 1235 a(11)p 1700 1258 V 250 w(256)g
Fp(\026)p FF(s)26 b(.)10 b(.)g(.)42 b(65)17 b(ms)p 2283
1258 V 199 w(256)g Fp(\026)p FF(s)p 2676 1258 V 1233
1337 V 1435 1314 a(12)p 1700 1337 V 283 w(64)g Fp(\026)p
FF(s)26 b(.)10 b(.)g(.)42 b(16)17 b(ms)p 2283 1337 V
232 w(64)g Fp(\026)p FF(s)p 2676 1337 V 1233 1416 V 1435
1393 a(13)p 1700 1416 V 283 w(16)g Fp(\026)p FF(s)26
b(.)10 b(.)g(.)76 b(4)16 b(ms)p 2283 1416 V 232 w(16)h
Fp(\026)p FF(s)p 2676 1416 V 1233 1495 V 1435 1471 a(14)p
1700 1495 V 316 w(4)g Fp(\026)p FF(s)26 b(.)10 b(.)g(.)76
b(1)16 b(ms)p 2283 1495 V 265 w(4)h Fp(\026)p FF(s)p
2676 1495 V 1233 1615 4 121 v 1435 1550 a(15)p 1700 1615
V 316 w(1)g Fp(\026)p FF(s)26 b(.)10 b(.)g(.)f(255)17
b Fp(\026)p FF(s)p 2283 1615 V 275 w(0)p 2676 1615 V
1233 1736 V 1322 1671 a Fp(m)1384 1663 y Fr(=)1431 1671
y Fo(0)p Fp(;)12 b(e)1531 1663 y Fk(>)1579 1671 y Fo(0)p
1700 1736 V 1700 1736 V 362 w FF(0)p 2283 1736 V 458
w(\227)p 2676 1736 V 1235 1739 1443 4 v eop
%%Page: 15 15
15 14 bop 322 -290 a FB(2.3.)45 b(L4)20 b(CALLS)2970
b FI(15)322 -57 y FH(2.3)119 b(L4)30 b(Calls)322 129
y FI(This)21 b(section)f(describes)f(the)i(7)f(system)g(calls)h(of)f
(L4:)1417 295 y Fv(\017)41 b FI(ipc)1159 b(int)21 b(30)1417
461 y Fv(\017)41 b FI(id)p 1570 461 25 4 v 29 w(nearest)931
b(int)21 b(31)1417 627 y Fv(\017)41 b FI(fpage)p 1691
627 V 28 w(unmap)819 b(int)21 b(32)1417 793 y Fv(\017)41
b FI(thread)p 1714 793 V 28 w(switch)807 b(int)21 b(33)1417
959 y Fv(\017)41 b FI(thread)p 1714 959 V 28 w(schedule)732
b(int)21 b(34)1417 1125 y Fv(\017)41 b FI(lthread)p 1737
1125 V 28 w(e)o(x)p 1843 1125 V 29 w(re)o(gs)756 b(int)21
b(35)1417 1291 y Fv(\017)41 b FI(task)p 1639 1291 V 29
w(ne)n(w)961 b(int)21 b(36)p eop
%%Page: 16 16
16 15 bop 156 -290 a FI(16)3387 b FB(IPC)156 338 y Fh(ipc)p
1765 376 4 100 v 2423 376 V 1765 475 V 2423 475 V 1765
575 V 2423 575 V 1765 675 V 1816 645 a Fg(\000)21 b FI(INT)f(0x30)p
Fg(!)p 2423 675 V 1003 346 a Fs(snd)g(descriptor)99 b
FF(EAX)p 1765 376 V 2423 376 V 757 w(EAX)g Fs(msg)o(.dope)19
b(+)i Fy(cc)41 b FD(/)62 b Fy(cc)1199 446 y Fs(timeouts)99
b FF(ECX)p 1765 475 V 2423 475 V 761 w(ECX)k Fv(\030)461
b FD(/)62 b Fv(\030)1230 545 y Fs(msg)o(.w0)99 b FF(EDX)p
1765 575 V 2423 575 V 757 w(EDX)g Fs(msg)o(.w0)275 b
FD(/)62 b Fv(\030)1230 645 y Fs(msg)o(.w1)99 b FF(EBX)p
1765 675 V 2423 675 V 761 w(EBX)k Fs(msg)o(.w1)275 b
FD(/)62 b Fv(\030)1015 744 y Fs(r)m(cv)21 b(descriptor)99
b FF(EBP)p 1765 774 V 2423 774 V 772 w(EBP)114 b Fv(\030)461
b FD(/)62 b Fv(\030)1347 844 y Fs(dest)99 b FF(ESI)p
1765 874 V 2423 874 V 794 w(ESI)136 b Fs(sour)m(ce)307
b FD(/)62 b Fv(\030)1230 944 y Fs(msg)o(.w2)99 b FF(EDI)p
1765 974 V 2423 974 V 783 w(EDI)125 b Fs(msg)o(.w2)275
b FD(/)62 b Fv(\030)943 1077 y Fs(pr)l(opa)o(gatee)39
b Ff(/)j Fv(\030)99 b FE(h)p FF(SP)p FE(i)156 1384 y
FI(This)22 b(is)h(the)e(basic)h(system)g(call)g(for)f(inter)n(-process)
f(communication)f(and)i(synchronization.)26 b(It)c(may)f(be)g(used)h
(for)f(intra-)156 1483 y(as)31 b(inter)n(-address-space)d
(communication.)53 b(All)31 b(communication)c(is)k(synchronous)d(and)i
(unb)n(uf)n(fered:)42 b(a)31 b(message)f(is)156 1583
y(transferred)h(from)g(the)h(sender)g(to)g(the)g(recipient)g(if)g(and)g
(only)f(if)i(the)f(recipient)g(has)g(in)m(v)n(ok)o(ed)e(a)j
(corresponding)c(ipc)156 1683 y(operation.)d(The)21 b(sender)f(blocks)g
(until)h(this)h(happens)e(or)g(a)i(period)e(speci\002ed)g(by)h(the)g
(sender)f(elapsed)h(whithout)f(that)h(the)156 1782 y(destination)f
(became)f(ready)g(to)h(recei)n(v)o(e.)281 1928 y(Ipc)j(can)g(be)g(used)
g(to)g(cop)o(y)g(data)g(as)h(well)f(as)h(to)g Fs(map)f
FI(or)g Fs(gr)o(ant)f FI(fpages)g(from)h(the)g(sender)f(to)i(the)f
(recipient.)33 b(F)o(or)23 b(the)156 2028 y(description)c(of)h
(messages)g(see)h(section)f(2.2.3.)281 2174 y(12-byte)f(messages)i
(\(plus)g(32-bit)f(sender)g(id\))h(can)g(be)g(transferred)e(solely)i
(via)g(the)g(re)o(gisters)g(and)f(are)h(thus)g(specially)156
2273 y(optimized.)j(If)c(possible,)g(short)f(messages)i(should)e
(therefore)f(be)i(reduced)f(to)h(12-byte)f(messages.)156
2502 y(A)g(single)f(ipc)h(call)g(combines)e(an)h(optional)f(send)h
(operation)e(with)j(an)f(optional)f(recei)n(v)o(e)g(operation.)23
b(Whether)18 b(it)h(includes)156 2602 y(a)f(send)f(respecti)n(v)o(ely)f
(a)i(recei)n(v)o(e)e(is)i(determined)e(by)h(the)g(actual)g(parameters.)
23 b(If)17 b(the)h(send)f(or)g(recei)n(v)o(e)f(address)h(is)h
(speci\002ed)156 2701 y(as)j Fy(nil)h FI(\(0xFFFFFFFF\),)e(the)g
(corresponding)d(operation)h(is)j(skipped.)281 2847 y(No)f(time)h(is)g
(required)d(for)i(the)g(transition)f(between)h(send)g(and)f(recei)n(v)o
(e)g(phase)h(of)g(one)g(ipc)g(operation.)156 3340 y Ft(P)o(arameters)
156 3592 y Fs(snd)g(descriptor)779 3629 y(\223nil\224)p
1128 3521 2126 4 v 1128 3687 4 167 v 986 w FF(0xFFFFFFFF)2323
3643 y Fr(\(32\))p 3250 3687 V 1128 3690 2126 4 v 1128
3795 a FI(Ipc)g(does)f(not)h(include)f(a)i(send)f(operation.)779
4019 y Fs(\223mem\224)p 1128 3911 1993 4 v 1128 4077
4 167 v 879 w FF(*snd)d(msg/4)2228 4033 y Fr(\(30\))p
3117 4077 V 1128 4080 1993 4 v 3120 3911 67 4 v 3120
4077 4 167 v 3123 4019 a Fp(m)p 3183 4077 V 3120 4080
67 4 v 3187 3911 V 3187 4077 4 167 v 17 w(p)p 3250 4077
V 3187 4080 67 4 v 1128 4185 a FI(Ipc)27 b(includes)g(sending)g(a)h
(message)g(to)f(the)h(destination)f(speci\002ed)g(by)h
Fs(dest)g(id)p FI(.)48 b(*snd)1128 4285 y(msg)22 b(must)h(point)e(to)i
(a)g(v)n(alid)f(message.)31 b(The)22 b(\002rst)i(tw)o(o)e(32-bit)g(w)o
(ords)g(of)g(the)g(message)1128 4384 y(\()p Fs(msg)o(.w0)i
FI(and)g Fs(msg)o(.w1)p FI(\))g(are)h Fs(not)f FI(tak)o(en)g(from)g
(the)h(message)f(data)h(structure)e(b)n(ut)i(must)1128
4484 y(be)20 b(contained)e(in)j(re)o(gisters)f(EDX)g(and)g(EBX.)779
4708 y Fs(\223r)m(e)m(g\224)p 1128 4600 1993 4 v 1128
4766 4 167 v 1067 w FF(0)2092 4722 y Fr(\(30\))p 3117
4766 V 1128 4769 1993 4 v 3120 4600 67 4 v 3120 4766
4 167 v 3137 4708 a FF(0)p 3183 4766 V 3120 4769 67 4
v 3187 4600 V 3187 4766 4 167 v 32 w Fp(p)p 3250 4766
V 3187 4769 67 4 v 1128 4874 a FI(Ipc)29 b(includes)g(sending)g(a)h
(message)f(to)h(the)g(destination)f(speci\002ed)g(by)h
Fs(dest)g(id)p FI(.)53 b(The)1128 4974 y(message)16 b(consists)h
(solely)f(of)g(the)g(tw)o(o)g(32-bit)g(w)o(ords)f Fs(msg)o(.w0)h
FI(and)g Fs(msg)o(.w1)g FI(in)g(re)o(gisters)1128 5073
y(EDX)k(and)g(EBX.)779 5256 y Fy(m)852 5248 y Fx(=)903
5256 y Fu(0)183 b FI(V)-9 b(alue-cop)o(ying)16 b(send)j(operation;)f
(the)i(dw)o(ords)f(or)g(the)g(message)h(are)f(simply)g(copied)g(to)1128
5356 y(the)h(recipient.)p eop
%%Page: 17 17
17 16 bop 322 -290 a FB(IPC)3388 b FI(17)322 -83 y Fs(snd)21
b(descriptor)945 -87 y Fy(m)1018 -95 y Fx(=)1069 -87
y Fu(1)183 b FI(Fpage-mapping)29 b(send)j(operation.)60
b(The)32 b(dw)o(ords)g(of)g(the)h(message)f(to)h(be)f(sent)h(are)1294
12 y(treated)40 b(as)h(')-5 b(send)40 b(fpages'.)85 b(The)40
b(described)f(fpages)h(are)g(mapped)f(\(respecti)n(v)o(ely)1294
112 y(granted\))24 b(into)i(the)h(recipient')-5 b(s)25
b(address)h(space.)43 b(Mapping/granting)23 b(stops)j(when)g(ei-)1294
212 y(ther)17 b(the)g(end)g(of)g(the)h(dw)o(ords)e(is)j(reached)d(or)h
(when)g(an)g(in)m(v)n(alid)f(fpage)h(denoter)f(is)i(found,)1294
311 y(in)j(particular)f(0.)29 b(The)21 b(send)g(fpage)f(descriptors)g
(and)h(all)h(potentially)e(follo)n(wing)f(w)o(ords)1294
411 y(are)i(also)h(transferred)d(by)i(simple)g(cop)o(y)g(to)g(the)h
(recipient.)27 b(Thus)21 b(a)h(message)f(may)g(con-)1294
510 y(tain)27 b(some)g(fpages)g(and)g(additional)f(v)n(alue)g
(parameters.)45 b(The)27 b(recipient)f(can)i(use)f(the)1294
610 y(recei)n(v)o(ed)20 b(fpage)g(descriptors)g(to)i(determine)e(what)h
(has)h(been)e(mapped)g(or)h(granted)f(into)1294 710 y(its)h(address)f
(space,)g(including)e(location)h(and)h(access)h(rights.)945
892 y Fy(p)987 884 y Fx(=)1038 892 y Fu(0)214 b FI(Normal)17
b(\(unpropagated\))c(send)k(operation.)23 b(The)17 b(recipient)g(gets)h
(the)g(original)e(sender')-5 b(s)1294 992 y(id.)945 1158
y Fy(p)987 1150 y Fx(=)1038 1158 y Fu(1)214 b FI(Propagating)18
b(send)i(operation.)k(The)c(additional)f Fs(pr)l(opa)o(gatee)f
FI(parameter)h(on)h(the)h(stack)1294 1258 y(speci\002es)f(the)h(id)f
(of)g(the)g(propagatee)e(thread.)1294 1357 y(If)h(propagatee)d(and)i
(current)g(sender)g(or)g(propagatee)f(and)h(recei)n(v)o(er)g(belong)f
(to)i(the)g(same)1294 1457 y(task,)30 b(propagation)c(is)j(al)o(w)o
(ays)g(permitted.)49 b(Otherwise,)30 b(the)e(current)f(sender)h(is)i
(sup-)1294 1557 y(posed)21 b(to)h(be)g(a)g(chief)f(that)h(uses)g
(deceiting)f(and)g(it)i(is)g(check)o(ed)d(whether)h(it)i(is)f
(direction)1294 1656 y(preserving.)h(If)d(not,)f Fy(p)i
FI(and)f(the)g Fs(pr)l(opa)o(gatee)e FI(parameter)h(are)h(ignored.)1294
1756 y(If)27 b(propagation)d(\(or)j(decei)n(ving\))f(is)i(permitted,)g
(the)g(recei)n(v)o(er)e(recei)n(v)o(es)g(the)i(propaga-)1294
1855 y(tee')-5 b(s)22 b(id)g(instead)f(of)h(the)g(current)e(sender')-5
b(s)21 b(id.)30 b(If)21 b(the)h(propagatee)d(is)k(w)o(aiting)e
(\(closed\))1294 1955 y(for)d(a)h(reply)f(from)f(the)i(current)e
(sender)m(,)h(the)g(propagatee')-5 b(s)17 b(status)i(is)g(additionally)
e(mod-)1294 2055 y(i\002ed)25 b(such)g(that)g(the)g(propagatee)d(no)n
(w)j(w)o(aits)h(for)e(a)h(the)g(ne)n(w)g(recei)n(v)o(er)f(instead)g(of)
h(the)1294 2154 y(current)19 b(sender)-5 b(.)1294 2254
y(The)20 b Fs(pr)l(opa)o(gatee)e FI(parameter)h(on)g(the)i(user)f
(stack)g(is)h(only)f(required)e(if)i Fy(p)3422 2246 y
Fx(=)3473 2254 y Fu(1)p FI(.)322 2969 y Fs(r)m(cv)h(descriptor)945
3006 y(\223nil\224)p 1312 2898 2126 4 v 1312 3064 4 167
v 1004 w FF(0xFFFFFFFF)2508 3020 y Fr(\(32\))p 3434 3064
V 1312 3067 2126 4 v 1312 3172 a FI(Ipc)f(does)g(not)g(include)f(a)i
(recei)n(v)o(e)e(operation.)945 3396 y Fs(\223mem\224)p
1312 3288 1993 4 v 1312 3454 4 167 v 898 w FF(*snd)e(msg/4)2413
3410 y Fr(\(30\))p 3302 3454 V 1312 3457 1993 4 v 3305
3288 67 4 v 3305 3454 4 167 v 3321 3396 a FF(0)p 3368
3454 V 3305 3457 67 4 v 3371 3288 V 3371 3454 4 167 v
33 w Fp(o)p 3434 3454 V 3371 3457 67 4 v 1312 3562 a
FI(Ipc)30 b(includes)g(recei)n(ving)f(a)i(message)f(respecti)n(v)o(ely)
f(w)o(aiting)h(to)h(recei)n(v)o(e)e(a)i(message.)1312
3662 y(*rcv)23 b(msg)g(must)h(point)f(to)g(a)h(v)n(alid)f(message.)35
b(The)23 b(\002rst)i(tw)o(o)f(32-bit)e(w)o(ords)h(of)g(the)h(re-)1312
3762 y(cei)n(v)o(ed)19 b(message)h(\()p Fs(msg)o(.w0)g
FI(and)f Fs(msg)o(.w1)p FI(\))h(are)g Fs(not)g FI(stored)g(in)g(the)g
(message)g(data)g(struc-)1312 3861 y(ture)g(b)n(ut)g(are)g(returned)f
(in)h(re)o(gisters)g(EDX)g(and)g(EBX.)945 4085 y Fs(\223r)m(e)m(g\224)p
1312 3977 1993 4 v 1312 4143 4 167 v 1085 w FF(0)2277
4099 y Fr(\(30\))p 3302 4143 V 1312 4146 1993 4 v 3305
3977 67 4 v 3305 4143 4 167 v 3321 4085 a FF(0)p 3368
4143 V 3305 4146 67 4 v 3371 3977 V 3371 4143 4 167 v
33 w Fp(o)p 3434 4143 V 3371 4146 67 4 v 1312 4251 a
FI(Ipc)30 b(includes)g(recei)n(ving)f(a)i(message)f(respecti)n(v)o(ely)
f(w)o(aiting)h(to)h(recei)n(v)o(e)e(a)i(message.)1312
4351 y(Ho)n(we)n(v)o(er)m(,)c(only)f(messages)h(up)f(to)i(tw)o(o)f
(32-bit)f(w)o(ords)g Fs(msg)o(.w0)h FI(and)f Fs(msg)o(.w1)h
FI(are)g(ac-)1312 4451 y(cepted.)d(The)c(recei)n(v)o(ed)f(message)h(is)
h(returned)e(in)h(re)o(gisters)g(EDX)g(and)g(EBX.)945
4675 y Fs(\223rmap\224)p 1312 4567 1993 4 v 1312 4733
4 167 v 906 w FF(rcv)e(fpage)2385 4689 y Fr(\(30\))p
3302 4733 V 1312 4736 1993 4 v 3305 4567 67 4 v 3305
4733 4 167 v 3321 4675 a FF(1)p 3368 4733 V 3305 4736
67 4 v 3371 4567 V 3371 4733 4 167 v 33 w Fp(o)p 3434
4733 V 3371 4736 67 4 v 1312 4841 a FI(Ipc)30 b(includes)g(recei)n
(ving)f(a)i(message)f(respecti)n(v)o(ely)f(w)o(aiting)h(to)h(recei)n(v)
o(e)e(a)i(message.)1312 4940 y(Ho)n(we)n(v)o(er)m(,)h(only)e
(send-fpage)f(messages)i(or)g(up)g(to)g(tw)o(o)h(32-bit)e(w)o(ords)g
Fs(msg)o(.w0)h FI(and)1312 5040 y Fs(msg)o(.w1)24 b FI(are)g(accepted.)
36 b(The)24 b(recei)n(v)o(ed)f(message)h(is)h(returned)e(in)h(re)o
(gisters)g(EDX)g(and)1312 5140 y(EBX.)29 b(If)g(a)g(map)f(message)g(is)
h(recei)n(v)o(ed,)g(\223rcv)f(fpage\224)g(describes)g(the)g(recei)n(v)o
(e)g(fpage)1312 5239 y(\(instead)23 b(of)f(\223rcv)g(fpage)g
(option\224)f(in)i(a)h(memory)d(message)h(b)n(uf)n(fer\).)31
b(Thus)23 b(fpages)f(can)1312 5339 y(also)f(be)f(recei)n(v)o(ed)f
(without)g(a)i(message)f(b)n(uf)n(fer)f(in)h(memory)-5
b(.)p eop
%%Page: 18 18
18 17 bop 156 -290 a FI(18)3387 b FB(IPC)156 -83 y Fs(r)m(cv)21
b(descriptor)779 -87 y Fy(o)819 -95 y Fx(=)870 -87 y
Fu(0)216 b FI(Only)15 b(messages)h(from)f(the)g(thread)g(speci\002ed)h
(as)g Fs(dest)g(id)g FI(are)f(accepted)g(\(\223closed)g(w)o(ait\224\).)
1128 12 y(An)o(y)j(send)h(operation)e(from)g(a)j(dif)n(ferent)d(thread)
h(\(or)g(hardw)o(are)g(interrupt\))f(will)i(be)g(han-)1128
112 y(dled)g(e)o(xactly)h(as)h(if)f(the)g(actual)g(thread)g(w)o(ould)f
(be)h(b)n(usy)-5 b(.)779 278 y Fy(o)819 270 y Fx(=)870
278 y Fu(1)216 b FI(Messages)22 b(from)f(an)o(y)g(thread)g(will)i(be)f
(accepted)f(\(\223open)g(w)o(ait\224\).)30 b(If)22 b(the)g(actual)g
(thread)1128 378 y(is)j(associated)g(with)g(a)g(hardw)o(are)e
(interrupt,)h(also)h(messages)g(from)f(this)h(hardw)o(are)e(in-)1128
477 y(terrupt)c(can)h(arri)n(v)o(e.)156 676 y Fs(dest)h(id)779
648 y Fn(6)p Fx(=)830 656 y Fy(nil)194 b FI(Sending)21
b(is)j(directed)e(to)h(the)g(speci\002ed)g(thread,)f(if)h(it)h(resides)
f(in)g(the)g(sender')-5 b(s)22 b(clan.)33 b(If)1128 755
y(the)22 b(destination)g(is)h(outside)f(the)g(sender')-5
b(s)23 b(clan,)f(the)h(message)f(is)i(sent)e(to)h(the)f(sender')-5
b(s)1128 855 y(chief.)41 b(If)26 b(the)f(destination)g(is)i(in)f(an)f
(inner)g(clan)h(\(a)g(clan)f(whose)h(chief)f(resides)h(in)g(the)1128
955 y(sender')-5 b(s)20 b(clan\),)g(it)h(is)h(redirected)d(to)i(that)f
(chief.)26 b(\(See)21 b(also)g(`nchief)5 b(')18 b(operation.\))24
b(If)c(no)1128 1054 y(send)f(part)h(w)o(as)h(speci\002ed)f(\()p
Fs(snd)f(descriptor)2440 1046 y Fx(=)2491 1054 y Fy(nil)r
FI(\),)g Fs(dest)h(id)g FI(speci\002es)h(the)f(source)f(from)1128
1154 y(which)g(messages)h(can)g(be)f(recei)n(v)o(ed.)24
b(\(Ho)n(we)n(v)o(er)18 b(recall)h(that)h(the)g(recei)n(v)o(e)f
(restriction)g(is)1128 1253 y(only)g(ef)n(fecti)n(v)o(e)g(if)h
Fy(o)1734 1245 y Fx(=)1806 1253 y Fu(0)p FI(.\))779 1345
y Fx(=)830 1353 y Fy(nil)194 b Fu(\()p Fy(nil)1266 1345
y Fx(=)1316 1353 y Fu(0\))21 b FI(Although)e(specifying)g
Fy(nil)j FI(as)f(the)g(destination)e(for)h(a)h(send)f(operation)f(is)j
(ille-)1128 1453 y(gal)h(\(error:)31 b(`destination)23
b(not)g(e)o(xistent'\),)h(it)g(can)g(be)g(le)o(gally)e(speci\002ed)i
(for)f(a)h(recei)n(v)o(e-)1128 1552 y(only)29 b(operation.)51
b(In)30 b(this)g(case,)i(ipc)e(will)h(not)e(recei)n(v)o(e)g(an)o(y)g
(message)g(b)n(ut)h(will)g(w)o(ait)1128 1652 y(the)22
b(speci\002ed)f Fs(r)m(cv)i(timeout)e FI(and)g(then)h(terminate)f(with)
h(error)f(code)g(`recei)n(v)o(e)f(timeout'.)1128 1752
y(\(Ho)n(we)n(v)o(er)e(recall)i(that)g(the)h(recei)n(v)o(e)e
(restriction)g(is)i(only)f(ef)n(fecti)n(v)o(e)e(if)j
Fy(o)3245 1744 y Fx(=)3317 1752 y Fu(0)p FI(.\))156 1950
y Fs(sour)m(ce)f(id)1128 1930 y FI(If)k(a)h(message)f(w)o(as)h(recei)n
(v)o(ed)e(this)i(is)h(the)e(id)h(of)f(its)h(sender)-5
b(.)38 b(\(If)24 b(a)h(hardw)o(are)e(interrupt)1128 2030
y(w)o(as)d(recei)n(v)o(ed)d(this)j(is)g(the)g(interrupt)d(id.\))25
b(The)19 b(parameter)e(is)k(unde\002ned)c(if)i(no)g(message)1128
2129 y(w)o(as)i(recei)n(v)o(ed.)156 2327 y Fs(msg)o(.w0,)f(w1,)g(w2)779
2322 y(\223snd\224)141 b FI(First)21 b(three)f(32-bit)f(w)o(ords)h(of)f
(message)i(to)f(be)g(sent.)25 b(These)20 b(message)g(w)o(ords)g(are)g
(tak)o(en)1128 2422 y(directly)j(from)g(re)o(gisters)g(EDX,)h(EBX,)g
(and)g(EDI.)f Fs(The)n(y)h(ar)m(e)g(not)g(r)m(ead)f(fr)l(om)i(the)f
(mes-)1128 2522 y(sa)o(g)o(e)c(data)f(structur)m(e)o(.)779
2663 y(\223r)m(cv\224)154 b FI(First)33 b(three)f(32-bit)f(w)o(ords)h
(of)g(recei)n(v)o(ed)f(message,)k(unde\002ned)30 b(if)j(no)f(message)g
(w)o(as)1128 2762 y(recei)n(v)o(ed.)26 b Fs(These)21
b(messa)o(g)o(e)g(wor)m(ds)h(ar)m(e)f(available)f(only)g(in)i(r)m(e)m
(gister)o(s)g(EDX,)e(EBX,)h(and)1128 2862 y(EDI.)29 b
FI(The)g(Nucleus)g(does)g(not)g(store)g(it)h(in)f(the)h(recei)n(v)o(e)e
(message)h(b)n(uf)n(fer)-5 b(.)51 b(The)29 b(user)1128
2962 y(program)18 b(may)i(store)g(it)h(or)e(use)i(it)g(directly)e(in)i
(the)f(re)o(gisters.)156 3160 y Fs(msg)o(.dope)f(+)i(cc)p
1128 3090 1262 4 v 1128 3256 4 167 v 1587 3198 a FF(mw)o(ords)1817
3212 y Fr(\(19\))p 2386 3256 V 1128 3259 1262 4 v 2390
3090 333 4 v 2390 3256 4 167 v 2442 3198 a FF(parts)2587
3212 y Fr(\(5\))p 2718 3256 V 2390 3259 333 4 v 2722
3090 532 4 v 2722 3256 4 167 v 2907 3198 a Fp(cc)2985
3212 y Fr(\(8\))p 3250 3256 V 2722 3259 532 4 v 1128
3364 a FI(Message)h(dope)e(describing)h(recei)n(v)o(ed)f(message.)29
b(If)22 b(no)f(message)h(w)o(as)h(recei)n(v)o(ed,)d(only)1128
3463 y Fy(cc)e FI(is)i(deli)n(v)o(ered.)i Fs(The)c(dope)f(wor)m(d)i(of)
f(the)g(r)m(eceived)g(messa)o(g)o(e)h(is)g(available)d(only)i(in)h(r)m
(e)m(g-)1128 3563 y(ister)f(EAX.)e FI(The)g(Nucleus)h(does)f(not)h
(store)f(it)i(in)f(the)g(recei)n(v)o(e)e(message)i(b)n(uf)n(fer)-5
b(.)23 b(The)16 b(user)1128 3662 y(program)i(may)i(store)g(it)h(or)g
(use)f(it)h(directly)f(in)g(the)h(re)o(gister)-5 b(.)25
b(\(Note)20 b(that)h(the)f(lo)n(wermost)1128 3762 y(8)j(bits)h(of)g
(msg)f(dope)g(and)g(size)h(dope)e(in)i(the)f(message)h(data)f
(structure)g(are)g(unde\002ned.)1128 3862 y(So)d(it)h(is)g(le)o(gal)f
(to)g(store)g(EAX)h(in)f(the)g(msg-dope)e(\002eld,)i(e)n(v)o(en)g(if)g
Fy(cc)3081 3854 y Fn(6)p Fx(=)3132 3862 y Fu(0)p FI(.\))156
4040 y Fs(cc)p 1128 3952 266 4 v 1128 4119 4 167 v 1179
4060 a Fp(ec)1259 4074 y Fr(\(4\))p 1390 4119 V 1128
4122 266 4 v 1393 3952 67 4 v 1393 4119 4 167 v 1415
4060 a Fp(i)p 1457 4119 V 1393 4122 67 4 v 1460 3952
V 1460 4119 4 167 v 37 w(r)p 1523 4119 V 1460 4122 67
4 v 1526 3952 V 1526 4119 4 167 v 21 w(m)p 1589 4119
V 1526 4122 67 4 v 1593 3952 V 1593 4119 4 167 v 17 w(d)p
1656 4119 V 1593 4122 67 4 v 779 4226 a Fy(d)822 4218
y Fx(=)873 4226 y Fu(0)213 b FI(The)20 b(recei)n(v)o(ed)e(message)i(is)
h(transferred)e(directly)g(\(\223undeceited\224\))f(from)h
Fs(sour)m(ce)h(id)p FI(.)779 4326 y Fy(d)822 4318 y Fx(=)873
4326 y Fu(1)213 b FI(The)23 b(recei)n(v)o(ed)g(message)g(is)i
(\223deceited\224)e(by)g(a)i(chief.)35 b Fs(sour)m(ce)24
b(id)g FI(is)h(the)f(virtual)f(source)1128 4426 y(id)d(which)g(w)o(as)h
(speci\002ed)f(by)f(the)i(sending)e(chief.)779 4525 y
Fy(m)852 4517 y Fx(=)903 4525 y Fu(0)183 b FI(The)20
b(recei)n(v)o(ed)e(message)i(did)g(not)g(contain)f(fpages.)779
4625 y Fy(m)852 4617 y Fx(=)903 4625 y Fu(1)183 b FI(The)16
b(sender)g(mapped)e(or)j(granted)e(fpages.)23 b(The)16
b(sender')-5 b(s)16 b(fpage)f(descriptors)g(were)i(also)1128
4725 y(\(besides)j(mapping/granting\))15 b(transferred)k(as)i(mw)o
(ords.)779 4824 y Fy(r)818 4816 y Fx(=)870 4824 y Fu(0)216
b FI(The)24 b(recei)n(v)o(ed)f(message)i(w)o(as)g(directed)f(to)h(the)g
(actual)f(recipient,)h(not)g(redirected)e(to)i(a)1128
4924 y(chief.)e(I.e.)18 b(sender)f(and)h(recei)n(v)o(er)e(a)j(part)f
(of)f(the)h(same)g(clan.)25 b(The)17 b Fy(i)p FI(-bit)h(has)g(no)g
(meaning)1128 5023 y(in)i(this)h(case)f(and)g(is)h(zero.)779
5123 y Fy(r)818 5115 y Fx(=)870 5123 y Fu(1)216 b FI(The)17
b(recei)n(v)o(ed)g(message)g(w)o(as)i(redirected)d(to)j(the)e(chief)h
(which)f(w)o(as)i(ne)o(xt)e(on)h(the)f(path)h(to)1128
5223 y(the)i(true)g(destination.)k(Sender)19 b(and)h(addressed)f
(recipient)g(belong)g(to)h(dif)n(ferent)f(clans.)779
5322 y Fy(i)808 5314 y Fx(=)859 5322 y Fu(0)227 b FI(If)20
b Fy(r)1243 5314 y Fx(=)1295 5322 y Fu(1)p FI(:)25 b(the)20
b(recei)n(v)o(ed)f(message)h(comes)g(from)f(outside)g(the)i(o)n(wn)e
(clan.)779 5422 y Fy(i)808 5414 y Fx(=)859 5422 y Fu(1)227
b FI(If)20 b Fy(r)1243 5414 y Fx(=)1295 5422 y Fu(1)p
FI(:)25 b(the)20 b(recei)n(v)o(ed)f(message)h(comes)g(from)f(an)h
(inner)f(clan.)p eop
%%Page: 19 19
19 18 bop 322 -290 a FB(IPC)3388 b FI(19)322 -104 y Fs(ec)945
-132 y Fx(=)1017 -124 y Fu(0)235 b Fs(ok)p FI(:)30 b(the)23
b(optional)e(send)h(operation)f(w)o(as)j(successful,)f(and)f(if)h(a)g
(recei)n(v)o(e)e(operation)g(w)o(as)1294 -25 y(also)f(speci\002ed)g(\()
p Fs(r)m(cv)h(descriptor)2278 -33 y Fn(6)p Fx(=)2329
-25 y Fy(nil)r FI(\))e(a)h(message)g(w)o(as)h(also)g(recei)n(v)o(ed)e
(correctly)-5 b(.)945 108 y Fn(6)p Fx(=)1017 116 y Fu(0)235
b FI(If)22 b(ipc)g(f)o(ails)h(the)f(completion)f(code)g(is)i(in)g(the)f
(range)f(0x10.)12 b(.)g(.)g(0xF0.)29 b(If)22 b(the)g(send)g(oper)n(-)
1294 216 y(ation)g(already)f(f)o(ailed,)i(ipc)f(is)i(terminated)d
(without)g(the)i(potentially)e(speci\002ed)h(recei)n(v)o(e)1294
316 y(operation.)56 b Fy(s)32 b FI(speci\002es)g(whether)e(the)h(error)
f(occurred)g(during)f(the)j(recei)n(v)o(e)e Fu(\()p Fy(s)3759
308 y Fx(=)3824 316 y Fu(0\))1294 415 y FI(operation)18
b(or)i(during)f(the)h(send)g Fu(\()p Fy(s)2336 407 y
Fx(=)2401 415 y Fu(1\))g FI(operation:)1153 556 y(1)99
b Fs(Non-e)n(xisting)19 b FI(destination)g(or)h(source.)1012
697 y Fu(2)e(+)g Fy(s)100 b Fs(T)-5 b(imeout)p FI(.)1012
839 y Fu(4)18 b(+)g Fy(s)100 b Fs(Cancelled)19 b FI(by)h(another)f
(thread)g(\(system)h(call)h(lthread)p 2910 839 25 4 v
28 w(e)o(x)p 3016 839 V 29 w(re)o(gs\).)1012 980 y Fu(6)d(+)g
Fy(s)100 b Fs(Map)20 b(failed)g FI(due)f(to)i(a)f(shortage)f(of)h(page)
g(tables.)1012 1121 y Fu(8)e(+)g Fy(s)100 b Fs(Send)19
b(pa)o(g)o(efault)g(timeout)p FI(.)992 1262 y Fy(A)f
Fu(+)g Fy(s)100 b Fs(Receive)20 b(pa)o(g)o(efault)e(timeout)p
FI(.)989 1403 y Fy(C)24 b Fu(+)18 b Fy(s)100 b Fs(Aborted)19
b FI(by)h(another)f(thread)g(\(system)h(call)g(lthread)p
2840 1403 V 29 w(e)o(x)p 2947 1403 V 29 w(re)o(gs\).)988
1544 y Fy(E)j Fu(+)18 b Fy(s)100 b Fs(Cut)16 b FI(message.)23
b(Potential)15 b(reasons)g(are)g(\(a\))g(the)g(recipient')-5
b(s)15 b(mw)o(ord)f(b)n(uf)n(fer)g(is)j(too)e(small;)1294
1644 y(\(b\))j(the)h(recipient)f(does)h(not)g(accept)g(enough)e(parts;)
i(\(c\))g(at)g(least)h(one)f(of)g(the)g(recipient')-5
b(s)1294 1744 y(part)20 b(b)n(uf)n(fers)f(is)i(too)f(small.)1012
1910 y(1.)12 b(.)g(.)g(5)99 b(The)19 b(according)e(operation)h(w)o(as)i
(terminated)e(before)g(a)i(real)g(message)f(transfer)f(started.)1294
2009 y(No)i(partner)f(w)o(as)i(directly)e(in)m(v)n(olv)o(ed.)1007
2150 y(6.)12 b(.)g(.)g(F)100 b(The)18 b(according)e(operation)g(w)o(as)
j(terminated)e(while)h(a)g(message)g(transfer)g(w)o(as)g(running.)1294
2250 y(The)f(message)h(transfer)f(w)o(as)i(aborted.)j(The)c(current)e
(partner)h(\(sender)g(or)g(recei)n(v)o(er\))f(w)o(as)1294
2350 y(in)m(v)n(olv)o(ed)j(and)h(got)h(the)g(corresponding)d(error)i
(code.)27 b(It)21 b(is)h(not)f(de\002ned)f(which)g(parts)h(of)1294
2449 y(the)f(message)g(are)g(already)f(transferred)g(and)g(which)h
(parts)g(are)g(not)g(yet)g(transferred.)322 3573 y Fs(timeouts)1294
3552 y FI(This)f(32-bit)f(w)o(ord)h(speci\002es)g(all)h(4)f(timouts,)g
(the)g(quadruple)e(\()p Fs(snd,)i(r)m(cv)-6 b(,)19 b(snd)g(pf)o(,)h(r)m
(cv)g(pf)p FI(\).)1294 3652 y(F)o(or)g(A)g(detailed)g(description)f
(see)h(section)g(2.2.4.)k(Frequently)18 b(used)i(v)n(alues)g(are)p
1932 3713 1329 4 v 1930 3792 4 79 v 2362 3792 V 2413
3769 a FF(snd)100 b(rcv)g(snd)17 b(pf)100 b(rcv)18 b(pf)p
3258 3792 V 1932 3796 1329 4 v 1930 3874 4 79 v 1981
3851 a(0x00000000)p 2362 3874 V 113 w FE(1)117 b(1)153
b(1)189 b(1)p 3258 3874 V 1930 3953 V 1981 3930 a FF(0x00000001)p
2362 3953 V 131 w Fo(0)135 b FE(1)153 b(1)189 b(1)p 3258
3953 V 1930 4032 V 1981 4009 a FF(0x00000011)p 2362 4032
V 131 w Fo(0)153 b(0)171 b FE(1)189 b(1)p 3258 4032 V
1932 4035 1329 4 v 945 4143 a Fs(\223snd\224)141 b FI(If)30
b(the)g(required)f(send)h(operation)e(cannot)i(start)g(transfer)g(data)
g(within)g(the)g(speci\002ed)1294 4243 y(time,)c(ipc)f(is)g(terminated)
f(and)g(f)o(ails)h(with)g(completion)e(code)i(`send)f(timeout')f
(\(0x18\).)1294 4343 y(If)d(ipc)g(does)g(not)g(include)f(a)i(send)f
(operation,)e(this)i(parameter)f(is)i(meaningless.)945
4442 y Fs(\223r)m(cv\224)154 b FI(If)29 b(ipc)g(includes)f(a)i(recei)n
(v)o(e)e(operation)f(and)i(no)g(message)g(transfer)f(starts)i(within)f
(the)1294 4542 y(speci\002ed)22 b(time,)g(ipc)g(is)h(terminated)e(and)g
(f)o(ails)i(with)f(completion)e(code)i(`recei)n(v)o(e)e(time-)1294
4642 y(out')15 b(\(0xA0\).)22 b(If)17 b(ipc)f(does)g(not)g(include)f(a)
i(recei)n(v)o(e)e(operation,)g(this)i(parameter)e(is)i(mean-)1294
4741 y(ingless.)945 4841 y Fs(\223spf)8 b(\224)152 b
FI(If)24 b(during)f(sending)g(data)i(a)g(pagef)o(ault)e
Fs(in)h(the)h(r)m(eceiver')m(s)f(addr)m(ess)h(space)f
FI(occurs,)g Fs(snd)1294 4940 y(pf)d FI(speci\002ed)f(by)g(the)h
(sender)f(is)i(used)e(as)h(send)g(and)f(recei)n(v)o(e)g(timeout)g(for)g
(the)g(pagef)o(ault)1294 5040 y(RPC.)945 5140 y Fs(\223rpf)8
b(\224)152 b FI(If)18 b(during)f(recei)n(ving)g(data)h(a)h(pagef)o
(ault)e Fs(in)i(the)g(sender')m(s)f(addr)m(ess)g(space)g
FI(occurs,)g Fs(r)m(cv)h(pf)1294 5239 y FI(speci\002ed)k(by)g(the)h
(recei)n(v)o(er)e(is)j(used)e(as)i(send)e(and)g(recei)n(v)o(e)g
(timeout)g(for)g(the)g(pagef)o(ault)1294 5339 y(RPC.)p
eop
%%Page: 20 20
20 19 bop 156 -290 a FI(20)3387 b FB(IPC)156 -57 y Ft(Basic)25
b(Ipc)h(T)-7 b(ypes)158 323 y Fe(C)t(A)t(L)t(L)p 1985
333 4 100 v 2627 333 V 1985 432 V 2627 432 V 1985 532
V 2627 532 V 1985 631 V 2036 602 a Fd(\000)22 b FI(INT)e(0x30)p
Fg(!)p 2627 631 V 1283 303 a Fs(*snd)g(msg)g(/)h(0)99
b FF(EAX)p 1985 333 V 2627 333 V 742 w(EAX)g Fs(msg)o(.dope)18
b(+)j Fy(cc)1419 402 y Fs(timeouts)99 b FF(ECX)p 1985
432 V 2627 432 V 746 w(ECX)k Fv(\030)1450 502 y Fs(msg)o(.w0)c
FF(EDX)p 1985 532 V 2627 532 V 742 w(EDX)g Fs(msg)o(.w0)1450
602 y(msg)o(.w1)g FF(EBX)p 1985 631 V 2627 631 V 746
w(EBX)k Fs(msg)o(.w1)1296 701 y(*r)m(cv)20 b(msg)g(/)h(0)99
b FF(EBP)p 1985 731 V 2627 731 V 757 w(EBP)114 b Fv(\030)1482
801 y Fs(dest)20 b(id)99 b FF(ESI)p 1985 831 V 2627 831
V 779 w(ESI)136 b Fs(unc)o(hang)o(ed)1450 900 y(msg)o(.w2)99
b FF(EDI)p 1985 930 V 2627 930 V 768 w(EDI)125 b Fs(msg)o(.w2)156
1201 y FI(This)28 b(is)h(the)f(usual)f(blocking)f(RPC.)j
Fs(snd)f(msg)g FI(is)g(sent)h(to)e Fs(dest)h(id)g FI(and)g(the)f(in)m
(v)n(ok)o(er)f(w)o(aits)j(for)e(a)h(reply)f(from)g Fs(dest)h(id)p
FI(.)156 1301 y(Messages)22 b(from)e(other)g(sources)h(are)g(not)f
(accepted.)27 b(Note)21 b(that)g(since)g(the)g(send/recei)n(v)o(e)e
(transition)i(needs)f(no)h(time,)g(the)156 1401 y(destination)f(can)g
(reply)f(with)h Fs(snd)g(timeout)1443 1393 y Fx(=)1515
1401 y FI(0.)281 1540 y(This)h(operation)e(can)h(also)h(be)g(used)f
(for)g(a)h(serv)o(er)f(with)h(one)f(dedicated)g(client.)26
b(It)21 b(sends)g(the)f(reply)g(to)h(the)g(client)g(and)156
1640 y(w)o(aits)h(for)d(the)h(client')-5 b(s)21 b(ne)o(xt)e(order)-5
b(.)158 1923 y Fe(S)t(E)t(N)t(D)t FJ(/)t Fe(R)t(E)t(C)5
b(E)g(I)t(V)g(E)p 1985 1932 V 2627 1932 V 1985 2032 V
2627 2032 V 1985 2131 V 2627 2131 V 1985 2231 V 2036
2201 a Fd(\000)22 b FI(INT)e(0x30)p Fg(!)p 2627 2231
V 1283 1902 a Fs(*snd)g(msg)g(/)h(0)99 b FF(EAX)p 1985
1932 V 2627 1932 V 742 w(EAX)g Fs(msg)o(.dope)18 b(+)j
Fy(cc)1419 2002 y Fs(timeouts)99 b FF(ECX)p 1985 2032
V 2627 2032 V 746 w(ECX)k Fv(\030)1450 2102 y Fs(msg)o(.w0)c
FF(EDX)p 1985 2131 V 2627 2131 V 742 w(EDX)g Fs(msg)o(.w0)1450
2201 y(msg)o(.w1)g FF(EBX)p 1985 2231 V 2627 2231 V 746
w(EBX)k Fs(msg)o(.w1)1100 2301 y(*r)m(cv)21 b(msg+1)f(/)h(0+1)98
b FF(EBP)p 1985 2331 V 2627 2331 V 757 w(EBP)114 b Fv(\030)1482
2400 y Fs(dest)20 b(id)99 b FF(ESI)p 1985 2430 V 2627
2430 V 779 w(ESI)136 b Fs(sour)m(ce)20 b(id)1450 2500
y(msg)o(.w2)99 b FF(EDI)p 1985 2530 V 2627 2530 V 768
w(EDI)125 b Fs(msg)o(.w2)156 2801 y(snd)29 b(msg)h FI(is)g(sent)f(to)h
Fs(dest)f(id)g FI(and)g(the)g(in)m(v)n(ok)o(er)f(w)o(aits)i(for)e(a)i
(reply)e(from)g(an)o(y)g(source.)51 b(This)30 b(is)g(the)f(standard)f
(serv)o(er)156 2901 y(operation:)g(it)22 b(sends)g(a)h(reply)e(to)h
(the)g(actual)g(client)g(and)g(w)o(aits)h(for)e(the)h(ne)o(xt)g(order)f
(which)g(may)h(come)f(from)g(a)i(dif)n(ferent)156 3000
y(client.)158 3269 y Fe(S)t(E)t(N)t(D)p 1985 3278 V 2627
3278 V 1985 3378 V 2627 3378 V 1985 3477 V 2627 3477
V 1985 3577 V 2036 3547 a Fd(\000)f FI(INT)e(0x30)p Fg(!)p
2627 3577 V 1283 3248 a Fs(*snd)g(msg)g(/)h(0)99 b FF(EAX)p
1985 3278 V 2627 3278 V 742 w(EAX)g Fy(cc)1419 3348 y
Fs(timeouts)g FF(ECX)p 1985 3378 V 2627 3378 V 746 w(ECX)k
Fv(\030)1450 3448 y Fs(msg)o(.w0)c FF(EDX)p 1985 3477
V 2627 3477 V 742 w(EDX)g Fv(\030)1450 3547 y Fs(msg)o(.w1)g
FF(EBX)p 1985 3577 V 2627 3577 V 746 w(EBX)k Fv(\030)1216
3647 y Fs(0xFFFFFFFF)97 b FF(EBP)p 1985 3677 V 2627 3677
V 757 w(EBP)114 b Fv(\030)1482 3746 y Fs(dest)20 b(id)99
b FF(ESI)p 1985 3776 V 2627 3776 V 779 w(ESI)136 b Fv(\030)1450
3846 y Fs(msg)o(.w2)99 b FF(EDI)p 1985 3876 V 2627 3876
V 768 w(EDI)125 b Fv(\030)156 4147 y Fs(snd)23 b(msg)f
FI(is)i(sent)f(to)f Fs(dest)h(id)p FI(.)32 b(There)21
b(is)j(no)e(recei)n(v)o(e)f(phase)h(included.)30 b(The)22
b(in)m(v)n(ok)o(er)f(continues)g(w)o(orking)g(after)h(sending)156
4247 y(the)f(message.)158 4532 y Fe(R)t(E)t(C)t(E)t(I)t(V)t(E)34
b(F)t(R)q(O)t(M)p 1985 4542 V 2627 4542 V 1985 4641 V
2627 4641 V 1985 4741 V 2627 4741 V 1985 4840 V 2036
4811 a Fd(\000)22 b FI(INT)e(0x30)p Fg(!)p 2627 4840
V 1216 4512 a Fs(0xFFFFFFFF)97 b FF(EAX)p 1985 4542 V
2627 4542 V 742 w(EAX)i Fs(msg)o(.dope)18 b(+)j Fy(cc)1419
4611 y Fs(timeouts)99 b FF(ECX)p 1985 4641 V 2627 4641
V 746 w(ECX)k Fv(\030)1636 4711 y(\030)c FF(EDX)p 1985
4741 V 2627 4741 V 742 w(EDX)g Fs(msg)o(.w0)1636 4811
y Fv(\030)g FF(EBX)p 1985 4840 V 2627 4840 V 746 w(EBX)k
Fs(msg)o(.w1)1296 4910 y(*r)m(cv)20 b(msg)g(/)h(0)99
b FF(EBP)p 1985 4940 V 2627 4940 V 757 w(EBP)114 b Fv(\030)1482
5010 y Fs(dest)20 b(id)99 b FF(ESI)p 1985 5040 V 2627
5040 V 779 w(ESI)136 b Fs(unc)o(hang)o(ed)1636 5109 y
Fv(\030)99 b FF(EDI)p 1985 5139 V 2627 5139 V 768 w(EDI)125
b Fs(msg)o(.w2)156 5410 y FI(This)19 b(operation)d(includes)h(no)h
(send)g(phase.)24 b(The)18 b(in)m(v)n(ok)o(er)e(w)o(aits)k(for)d(a)i
(message)f(from)f Fs(sour)m(ce)h(id)p FI(.)24 b(Messages)19
b(from)e(other)p eop
%%Page: 21 21
21 20 bop 322 -290 a FB(IPC)3388 b FI(21)322 -57 y(sources)20
b(are)g(not)g(accepted.)k(Note)c(that)g(also)h(a)g(hardw)o(are)d
(interrupt)h(might)h(be)g(speci\002ed)g(as)h(source.)324
200 y Fe(R)t(E)t(C)t(E)t(I)t(V)t(E)p 2151 210 4 100 v
2793 210 V 2151 309 V 2793 309 V 2151 409 V 2793 409
V 2151 509 V 2202 479 a Fd(\000)h FI(INT)e(0x30)p Fg(!)p
2793 509 V 1382 180 a Fs(0xFFFFFFFF)97 b FF(EAX)p 2151
210 V 2793 210 V 742 w(EAX)i Fs(msg)o(.dope)18 b(+)j
Fy(cc)1585 279 y Fs(timeouts)99 b FF(ECX)p 2151 309 V
2793 309 V 746 w(ECX)k Fv(\030)1802 379 y(\030)c FF(EDX)p
2151 409 V 2793 409 V 742 w(EDX)g Fs(msg)o(.w0)1802 479
y Fv(\030)g FF(EBX)p 2151 509 V 2793 509 V 746 w(EBX)k
Fs(msg)o(.w1)1266 578 y(*r)m(cv)21 b(msg+1)f(/)h(0+1)98
b FF(EBP)p 2151 608 V 2793 608 V 757 w(EBP)114 b Fv(\030)1802
678 y(\030)99 b FF(ESI)p 2151 708 V 2793 708 V 779 w(ESI)136
b Fs(sour)m(ce)20 b(id)1802 778 y Fv(\030)99 b FF(EDI)p
2151 807 V 2793 807 V 768 w(EDI)125 b Fs(msg)o(.w2)322
1050 y FI(This)23 b(operation)e(includes)g(no)h(send)h(phase.)31
b(The)22 b(in)m(v)n(ok)o(er)f(w)o(aits)i(for)f(a)h(message)f(from)g(an)
o(y)f(source)h(\(including)e(a)j(hard-)322 1149 y(w)o(are)e
(interrupt\).)324 1406 y Fe(R)t(E)t(C)t(E)t(I)t(V)t(E)34
b(I)t(N)t(T)t(R)p 2151 1416 V 2793 1416 V 2151 1515 V
2793 1515 V 2151 1615 V 2793 1615 V 2151 1714 V 2202
1685 a Fd(\000)22 b FI(INT)e(0x30)p Fg(!)p 2793 1714
V 1382 1386 a Fs(0xFFFFFFFF)97 b FF(EAX)p 2151 1416 V
2793 1416 V 742 w(EAX)i Fs(msg)o(.dope)18 b(+)j Fy(cc)1585
1485 y Fs(timeouts)99 b FF(ECX)p 2151 1515 V 2793 1515
V 746 w(ECX)k Fv(\030)1802 1585 y(\030)c FF(EDX)p 2151
1615 V 2793 1615 V 742 w(EDX)g Fv(\030)1802 1685 y(\030)g
FF(EBX)p 2151 1714 V 2793 1714 V 746 w(EBX)k Fv(\030)1462
1784 y Fs(*r)m(cv)20 b(msg)g(/)h(0)99 b FF(EBP)p 2151
1814 V 2793 1814 V 757 w(EBP)114 b Fv(\030)1608 1884
y Fs(intr)20 b(+)h(1)99 b FF(ESI)p 2151 1914 V 2793 1914
V 779 w(ESI)136 b Fs(unc)o(hang)o(ed)1802 1983 y Fv(\030)99
b FF(EDI)p 2151 2013 V 2793 2013 V 768 w(EDI)125 b Fv(\030)322
2256 y FI(This)27 b(operation)e(includes)h(no)g(send)h(phase.)44
b(The)26 b(in)m(v)n(ok)o(er)f(w)o(aits)j(for)e(an)h(interrupt)e
(message)i(coming)e(from)h(interrupt)322 2355 y(source)19
b Fs(intr)p FI(.)25 b(Note)19 b(that)g(interrupt)e(messages)i(come)g
Fs(only)f FI(from)g(the)h(interrupt)f(which)g(is)i(currently)e
(associated)g(with)h(this)322 2455 y(thread.)447 2566
y(The)h Fs(intr)h FI(parameter)d(is)j(only)f(e)n(v)n(aluated)e(if)j
Fs(r)m(cv)g(timeout)2134 2558 y Fx(=)2206 2566 y FI(0)f(is)i
(speci\002ed,)d(see)i(`associate)f(intr'.)324 2822 y
Fe(A)t(S)t(S)t(O)t(C)t(I)t(A)-5 b(T)5 b(E)35 b(I)t(N)t(T)t(R)p
2151 2832 V 2793 2832 V 2151 2932 V 2793 2932 V 2151
3031 V 2793 3031 V 2151 3131 V 2202 3101 a Fd(\000)22
b FI(INT)e(0x30)p Fg(!)p 2793 3131 V 1382 2802 a Fs(0xFFFFFFFF)97
b FF(EAX)p 2151 2832 V 2793 2832 V 742 w(EAX)i Fs(msg)o(.dope)18
b(+)j Fy(cc)1355 2902 y Fs(r)m(cv)g(timeout)e(=)i(0)99
b FF(ECX)p 2151 2932 V 2793 2932 V 746 w(ECX)k Fv(\030)1802
3001 y(\030)c FF(EDX)p 2151 3031 V 2793 3031 V 742 w(EDX)g
Fv(\030)1802 3101 y(\030)g FF(EBX)p 2151 3131 V 2793
3131 V 746 w(EBX)k Fv(\030)1462 3201 y Fs(*r)m(cv)20
b(msg)g(/)h(0)99 b FF(EBP)p 2151 3230 V 2793 3230 V 757
w(EBP)114 b Fv(\030)1608 3300 y Fs(intr)20 b(+)h(1)99
b FF(ESI)p 2151 3330 V 2793 3330 V 779 w(ESI)136 b Fs(unc)o(hang)o(ed)
1802 3400 y Fv(\030)99 b FF(EDI)p 2151 3430 V 2793 3430
V 768 w(EDI)125 b Fv(\030)322 3672 y FI(The)17 b Fs(intr)g
FI(parameter)e(is)j(e)n(v)n(aluated)d(if)i Fs(r)m(cv)h(timeout)1814
3664 y Fx(=)1882 3672 y FI(0)f(is)h(speci\002ed.)23 b(If)17
b(no)f(\(currently)f(associated\))h(interrupt)f(is)j(pending,)322
3772 y(the)24 b(current)e(thread)h(is)h(\(1\))f(detached)g(from)f(its)j
(currently)d(associated)h(interrupt)f(\(if)h(an)o(y\))g(and)g(\(2\))g
(associated)g(with)h(the)322 3871 y(speci\002ed)j(interrupt)e(pro)o
(vided)f(that)j(this)g(one)f(is)i(free,)g(i.e.)f(not)f(associated)g
(with)h(another)f(thread.)43 b(If)27 b(the)f(association)322
3971 y(succeeds,)20 b(the)g(completion)f(code)g(is)i
Fs(r)m(eceive)g(timeout)e FI(\(0x20\))f(and)i(no)g(interrupt)f(is)i
(recei)n(v)o(ed.)447 4082 y(If)28 b(an)g(interrupt)e(from)h(the)h
(currently)e(associated)i(interrupt)e(w)o(as)j(pending,)f(this)g(one)f
(is)i(deli)n(v)o(ered)d(together)h(with)322 4181 y(completion)17
b(code)i Fs(ok)f FI(\(0x00\);)g(the)g(interrupt)g(association)g(is)i
Fs(not)e FI(modi\002ed.)23 b(If)c(the)g(requested)e(ne)n(w)i(interrupt)
e(is)j(already)322 4281 y(associated)31 b(to)h(another)d(thread)h(or)h
(is)h(not)f(e)o(xisting,)i(completion)c(code)i Fs(non)f(e)n(xisting)h
FI(\(0x10\))e(is)j(deli)n(v)o(ered)d(and)i(the)322 4381
y(interrupt)19 b(association)h(is)h(not)f(modi\002ed.)447
4491 y(Getting)27 b(rid)g(of)g(an)g(associated)g(interrupt)f(without)h
(associating)g(a)g(ne)n(w)h(one)e(is)j(done)d(by)h(issuing)g(a)h(recei)
n(v)o(e)e(from)322 4591 y Fs(nilthr)m(ead)20 b FI(\(0\))f(with)h
Fs(r)m(cv)h(timeout)1324 4583 y Fx(=)1396 4591 y FI(0.)324
4845 y Fe(S)t(L)t(E)t(E)t(P)p 2151 4854 V 2793 4854 V
2151 4954 V 2793 4954 V 2151 5053 V 2793 5053 V 2151
5153 V 2202 5123 a Fd(\000)h FI(INT)e(0x30)p Fg(!)p 2793
5153 V 1382 4824 a Fs(0xFFFFFFFF)97 b FF(EAX)p 2151 4854
V 2793 4854 V 742 w(EAX)i Fy(cc)3174 4816 y Fx(=)3245
4824 y Fu(0)p Fy(xA)p Fu(0)1585 4924 y Fs(timeouts)g
FF(ECX)p 2151 4954 V 2793 4954 V 746 w(ECX)k Fv(\030)1802
5023 y(\030)c FF(EDX)p 2151 5053 V 2793 5053 V 742 w(EDX)g
Fv(\030)1802 5123 y(\030)g FF(EBX)p 2151 5153 V 2793
5153 V 746 w(EBX)k Fv(\030)1825 5223 y Fs(0)c FF(EBP)p
2151 5253 V 2793 5253 V 757 w(EBP)114 b Fv(\030)1825
5322 y Fs(0)99 b FF(ESI)p 2151 5352 V 2793 5352 V 779
w(ESI)136 b Fv(\030)1802 5422 y(\030)99 b FF(EDI)p 2151
5452 V 2793 5452 V 768 w(EDI)125 b Fv(\030)p eop
%%Page: 22 22
22 21 bop 156 -290 a FI(22)3387 b FB(IPC)156 -57 y FI(This)20
b(operation)d(includes)i(no)f(send)h(phase.)24 b(Since)c
Fy(nil)g FI(\(0\))f(is)h(speci\002ed)f(as)h(source,)e(no)h(message)g
(can)g(arri)n(v)o(e)f(and)h(the)g(ipc)156 43 y(will)i(be)f(terminated)f
(with)i(`recei)n(v)o(e)d(timeout')i(after)f(the)i(time)f(speci\002ed)g
(by)g(the)g Fs(r)m(cv-timeout)f FI(parameter)g(is)i(elapsed.)p
eop
%%Page: 23 23
23 22 bop 322 -290 a FB(ID)p 415 -290 25 4 v 30 w(NEAREST)3025
b FI(23)322 292 y Fh(id)p 451 292 44 4 v 52 w(near)m(est)p
2317 302 4 100 v 2975 302 V 2317 402 V 2975 402 V 2317
502 V 2975 502 V 2317 601 V 2368 571 a Fg(\000)21 b FI(INT)f(0x31)p
Fg(!)p 2975 601 V 1968 272 a Fv(\030)99 b FF(EAX)p 2317
302 V 2975 302 V 757 w(EAX)h Fs(type)1968 372 y Fv(\030)f
FF(ECX)p 2317 402 V 2975 402 V 761 w(ECX)104 b Fv(\030)1968
472 y(\030)99 b FF(EDX)p 2317 502 V 2975 502 V 757 w(EDX)h
Fv(\030)1968 571 y(\030)f FF(EBX)p 2317 601 V 2975 601
V 761 w(EBX)104 b Fv(\030)1968 671 y(\030)99 b FF(EBP)p
2317 701 V 2975 701 V 772 w(EBP)115 b Fv(\030)1814 771
y Fs(dest)20 b(id)99 b FF(ESI)p 2317 800 V 2975 800 V
794 w(ESI)137 b Fs(near)m(est)20 b(id)1968 870 y Fv(\030)99
b FF(EDI)p 2317 900 V 2975 900 V 783 w(EDI)126 b Fv(\030)322
1131 y FI(If)21 b Fs(nil)g FI(is)h(speci\002ed)f(as)h(destination,)e
(the)h(system)g(call)g(deli)n(v)o(ers)f(the)h(uid)g(of)g(the)g(current)
e(thread.)27 b(Otherwise,)20 b(it)i(deli)n(v)o(eres)322
1231 y(the)30 b(nearest)f(partner)f(which)h(w)o(ould)g(be)h(engaged)d
(when)i(sending)f(a)i(message)f(to)h(the)g(speci\002ed)f(destination.)
52 b(If)29 b(the)322 1331 y(destination)22 b(does)h(not)f(belong)f(to)i
(the)g(in)m(v)n(ok)o(er')-5 b(s)22 b(clan,)h(this)g(call)g(deli)n(v)o
(ers)f(the)h(chief)f(that)h(is)h(nearest)e(to)h(the)g(in)m(v)n(ok)o(er)
e(on)322 1430 y(the)g(path)e(from)h(the)g(in)m(v)n(ok)o(er)e(to)j(the)f
(destination.)447 1613 y Fv(\017)41 b FI(If)20 b(the)g(destination)f
(resides)i(outside)e(the)h(in)m(v)n(ok)o(er')-5 b(s)19
b(clan,)h(it)h(deli)n(v)o(ers)e(the)i(in)m(v)n(ok)o(er')-5
b(s)19 b(o)n(wn)g(chief.)447 1779 y Fv(\017)41 b FI(If)18
b(the)f(destination)g(is)i(inside)e(a)h(clan)g(or)f(a)i(clan)e(nesting)
g(whose)h(chief)f Fy(C)24 b FI(is)19 b(direct)e(member)g(of)g(the)h(in)
m(v)n(ok)o(er')-5 b(s)16 b(clan,)530 1878 y(the)k(call)h(deli)n(v)o
(ers)e Fy(C)6 b FI(.)447 2045 y Fv(\017)41 b FI(If)20
b(the)g(destination)f(is)j(a)e(direct)g(member)f(of)h(the)g(in)m(v)n
(ok)o(er')-5 b(s)19 b(clan,)h(the)g(call)g(deli)n(v)o(ers)g(the)g
(destination)f(itself.)447 2211 y Fv(\017)41 b FI(If)20
b(the)g(destination)f(is)j Fs(nil)p FI(,)e(the)g(call)h(deli)n(v)o(ers)
e(the)h(current)f(thread')-5 b(s)19 b(id.)322 2393 y(Concluding:)31
b(nchief)22 b(\()p Fs(dest)i(id)1272 2385 y Fn(6)p Fx(=)1347
2393 y Fs(nil)p FI(\))f(deli)n(v)o(ers)g(e)o(xactly)g(that)h(partner)e
(to)i(which)f(the)g(k)o(ernel)g(w)o(ould)g(physically)f(send)i(a)322
2493 y(message)c(which)f(is)h(tar)o(geted)f(to)g Fs(dest)h(id)p
FI(.)25 b(On)20 b(the)f(other)g(hand,)f(a)j(message)e(from)f
Fs(dest)i(id)g FI(w)o(ould)f(physically)f(come)h(from)322
2592 y(e)o(xactly)h(this)g(partner)-5 b(.)322 2830 y
Ft(P)o(arameters)322 3020 y Fs(dest)21 b(id)1294 3019
y FI(Id)f(of)g(the)g(destination.)322 3186 y Fs(type)1294
3182 y FI(Note)g(that)g(the)g Fs(type)h FI(v)n(alues)e(correspond)f(e)o
(xactly)h(to)i(the)f(completion)e(codes)i(of)g(ipc.)945
3274 y Fx(=)996 3282 y Fu(0)256 b FI(Destination)19 b(resides)i(in)f
(the)g(same)h(clan.)j Fs(dest)d(id)f FI(is)h(deli)n(v)o(ered)e(as)i
Fs(near)m(est)f(id)p FI(.)945 3373 y Fx(=)996 3381 y
Fy(C)239 b FI(Destination)16 b(is)h(in)f(an)h(inner)e(clan.)24
b(The)16 b(chief)g(of)g(this)h(clan)f(or)g(clan)h(nesting)f(is)h(deli)n
(v)o(ered)1294 3481 y(as)k Fs(near)m(est)f(id)p FI(.)945
3573 y Fx(=)996 3581 y Fu(4)256 b FI(Destination)27 b(is)i(outside)e
(the)h(in)m(v)n(ok)o(er')-5 b(s)27 b(clan.)48 b(The)27
b(in)m(v)n(ok)o(er')-5 b(s)27 b(chief)g(is)i(deli)n(v)o(ered)d(as)1294
3680 y Fs(near)m(est)20 b(id)p FI(.)322 3858 y Fs(near)m(est)h(id)1294
3857 y FI(Either)e(the)i(current)e(thread')-5 b(s)19
b(id)h(or)g(the)h(id)f(of)g(the)g(nearest)g(partner)f(to)n(w)o(ards)h
Fs(dest)g(id)p FI(.)p eop
%%Page: 24 24
24 23 bop 156 -290 a FI(24)2935 b FB(FP)-8 b(A)m(GE)p
3432 -290 25 4 v 30 w(UNMAP)156 292 y Fh(fpage)p 501
292 44 4 v 51 w(unmap)p 2151 330 4 100 v 2809 330 V 2151
429 V 2809 429 V 2151 529 V 2809 529 V 2151 628 V 2202
599 a Fg(\000)21 b FI(INT)f(0x32)p Fg(!)p 2809 628 V
1684 300 a Fs(fpa)o(g)o(e)98 b FF(EAX)p 2151 330 V 2809
330 V 757 w(EAX)i Fv(\030)1532 399 y Fs(map)20 b(mask)99
b FF(ECX)p 2151 429 V 2809 429 V 761 w(ECX)104 b Fv(\030)1802
499 y(\030)99 b FF(EDX)p 2151 529 V 2809 529 V 757 w(EDX)h
Fv(\030)1802 599 y(\030)f FF(EBX)p 2151 628 V 2809 628
V 761 w(EBX)104 b Fv(\030)1802 698 y(\030)99 b FF(EBP)p
2151 728 V 2809 728 V 772 w(EBP)115 b Fv(\030)1802 798
y(\030)99 b FF(ESI)p 2151 828 V 2809 828 V 794 w(ESI)137
b Fv(\030)1802 897 y(\030)99 b FF(EDI)p 2151 927 V 2809
927 V 783 w(EDI)126 b Fv(\030)156 1158 y FI(The)19 b(speci\002ed)g
Fs(fpa)o(g)o(e)f FI(is)i(unmapped)c(in)j(all)h(address)e(spaces)i(into)
e(which)h(the)g(in)m(v)n(ok)o(er)e(mapped)g(it)j(directly)e(or)h
(indirectly)-5 b(.)156 1396 y Ft(P)o(arameters)156 1586
y Fs(fpa)o(g)o(e)1128 1585 y FI(Fpage)19 b(to)i(be)f(unmapped.)156
1764 y Fs(map)g(mask)p 1128 1693 67 4 v 1128 1859 4 167
v 1141 1801 a Fp(f)p 1191 1859 V 1128 1862 67 4 v 1194
1693 1927 4 v 1194 1859 4 167 v 901 w FF(0)2126 1815
y Fr(\(29\))p 3117 1859 V 1194 1862 1927 4 v 3120 1693
67 4 v 3120 1859 4 167 v 3128 1801 a Fp(w)p 3183 1859
V 3120 1862 67 4 v 3187 1693 V 3187 1859 4 167 v 24 w
FF(0)p 3250 1859 V 3187 1862 67 4 v 779 1967 a Fy(w)840
1959 y Fx(=)892 1967 y Fu(0)194 b FI(Fpage)20 b(will)h(partially)e
(unmapped.)k(Already)d(read/write)f(mapped)g(parts)h(will)h(be)g(set)g
(to)1128 2066 y(read)e(only)-5 b(.)24 b(Read)c(only)g(mapped)e(parts)j
(are)f(not)g(af)n(fected.)779 2166 y Fy(w)840 2158 y
Fx(=)892 2166 y Fu(1)194 b FI(Fpage)19 b(will)i(be)f(completely)f
(unmapped.)779 2291 y Fy(f)829 2283 y Fx(=)880 2291 y
Fu(0)206 b FI(Unmapping)28 b(happens)h(in)h(all)h(address)f(spaces)g
(into)g(which)g(pages)g(of)g(the)g(speci\002ed)1128 2390
y(fpage)22 b(ha)n(v)o(e)h(been)f(mapped)g(directly)g(or)h(indirectly)-5
b(.)33 b(The)23 b Fs(original)f FI(pages)h(in)g(the)h(o)n(wn)1128
2490 y(task)c(remain)g(mapped.)779 2589 y Fy(f)829 2581
y Fx(=)880 2589 y Fu(1)206 b FI(Additionally)-5 b(,)18
b(also)i(the)g(original)f(pages)h(in)h(the)f(o)n(wn)f(task)i(are)f
(unmapped)e(\(\003ushing\).)p eop
%%Page: 25 25
25 24 bop 322 -290 a FB(THREAD)p 664 -290 25 4 v 30 w(SWITCH)2832
b FI(25)322 292 y Fh(thr)m(ead)p 736 292 44 4 v 51 w(switch)p
2317 302 4 100 v 2975 302 V 2317 402 V 2975 402 V 2317
502 V 2975 502 V 2317 601 V 2368 571 a Fg(\000)21 b FI(INT)f(0x33)p
Fg(!)p 2975 601 V 1968 272 a Fv(\030)99 b FF(EAX)p 2317
302 V 2975 302 V 757 w(EAX)h Fv(\030)1968 372 y(\030)f
FF(ECX)p 2317 402 V 2975 402 V 761 w(ECX)104 b Fv(\030)1968
472 y(\030)99 b FF(EDX)p 2317 502 V 2975 502 V 757 w(EDX)h
Fv(\030)1968 571 y(\030)f FF(EBX)p 2317 601 V 2975 601
V 761 w(EBX)104 b Fv(\030)1968 671 y(\030)99 b FF(EBP)p
2317 701 V 2975 701 V 772 w(EBP)115 b Fv(\030)1814 771
y Fs(dest)20 b(id)99 b FF(ESI)p 2317 800 V 2975 800 V
794 w(ESI)137 b Fv(\030)1968 870 y(\030)99 b FF(EDI)p
2317 900 V 2975 900 V 783 w(EDI)126 b Fv(\030)322 1131
y FI(The)20 b(in)m(v)n(oking)e(thread)i(releases)g(the)g(processor)f
(\(non-preemti)n(v)o(ely\))d(so)k(that)g(another)f(ready)g(thread)h
(can)g(be)g(processed.)322 1369 y Ft(P)o(arameters)322
1533 y Fs(dest)h(id)945 1504 y Fx(=)996 1512 y Fy(nil)194
b FI(\()1322 1504 y Fx(=)1372 1512 y Fu(0)p FI(\))19
b(Processing)g(switches)h(to)f(an)g(unde\002ned)f(ready)g(thread)g
(which)h(is)h(selected)f(by)g(the)1294 1612 y(scheduler)-5
b(.)31 b(\(It)23 b(might)f(be)g(the)h(in)m(v)n(oking)e(thread.\))31
b(Since)22 b(this)h(is)h(\223ordinary\224)c(schedul-)1294
1712 y(ing,)f(the)i(thread)e(gets)h(a)h(ne)n(w)f(timeslice.)945
1803 y Fn(6)p Fx(=)996 1811 y Fy(nil)194 b FI(If)25 b
Fs(dest)h(id)g FI(is)h(ready)-5 b(,)25 b(processing)g(switches)h(to)g
(this)g(thread.)40 b(In)26 b(this)g(\223e)o(xtraordinary\224)1294
1911 y(scheduling,)20 b(the)i(in)m(v)n(oking)e(thread)h(donates)h(its)h
(remaining)d(timeslice)i(to)h(the)f(destina-)1294 2011
y(tion)h(thread.)33 b(\(This)23 b(one)f(gets)i(the)f(donation)e
(additionally)h(to)h(its)h(ordinary)e(scheduled)1294
2110 y(timeslices.\))1294 2210 y(If)g(the)h(destination)e(thread)h(is)h
(not)g(ready)-5 b(,)21 b(the)i(system)f(call)h(operates)f(as)h
(described)f(for)1294 2309 y Fs(dest)e(id)1534 2301 y
Fx(=)1585 2309 y Fy(nil)r FI(.)p eop
%%Page: 26 26
26 25 bop 156 -290 a FI(26)2716 b FB(THREAD)p 3298 -290
25 4 v 30 w(SCHEDULE)156 353 y Fh(thr)m(ead)p 570 353
44 4 v 51 w(schedule)p 2151 363 4 100 v 2809 363 V 2151
463 V 2809 463 V 2151 562 V 2809 562 V 2151 662 V 2202
632 a Fg(\000)21 b FI(INT)f(0x34)p Fg(!)p 2809 662 V
1463 333 a Fs(par)o(am)f(wor)m(d)99 b FF(EAX)p 2151 363
V 2809 363 V 757 w(EAX)h Fs(old)19 b(par)o(am)h(wor)m(d)1802
433 y Fv(\030)99 b FF(ECX)p 2151 463 V 2809 463 V 761
w(ECX)104 b Fs(time)o(.low)1802 532 y Fv(\030)99 b FF(EDX)p
2151 562 V 2809 562 V 757 w(EDX)h Fs(time)o(.high)1413
632 y(e)n(xt)21 b(pr)m(eempter)98 b FF(EBX)p 2151 662
V 2809 662 V 761 w(EBX)104 b Fs(old)19 b(pr)m(eempter)1802
732 y Fv(\030)99 b FF(EBP)p 2151 761 V 2809 761 V 772
w(EBP)115 b Fv(\030)1648 831 y Fs(dest)20 b(id)99 b FF(ESI)p
2151 861 V 2809 861 V 794 w(ESI)137 b Fs(partner)1802
931 y Fv(\030)99 b FF(EDI)p 2151 961 V 2809 961 V 783
w(EDI)126 b Fv(\030)156 1252 y FI(The)23 b(system)g(call)g(can)g(be)f
(used)h(by)f(schedulers)g(to)h(de\002ne)f(the)h Fs(priority)p
FI(,)g Fs(timeslice)h(length)e FI(and)g Fs(e)n(xternal)h(pr)m(eempter)f
FI(of)156 1352 y(other)17 b(threads.)23 b(Furthermore,)15
b(it)j(deli)n(v)o(ers)e(thread)h(states.)25 b(Note)17
b(that)g(due)g(to)g(security)f(reasons)h(thread)f(state)i(information)
156 1452 y(must)j(be)f(retrie)n(v)o(ed)e(through)g(the)i(appropriate)e
(scheduler)-5 b(.)281 1612 y(The)24 b(system)g(call)h(is)g(only)f(ef)n
(fecti)n(v)o(e,)g(if)g(the)g(current)f(priority)g(of)h(the)h
(speci\002ed)f(destination)f(is)i(less)h(or)e(equal)f(than)156
1711 y(the)e(current)d(task')-5 b(s)21 b Fs(maximum)f(contr)l(olled)f
(priority)i(\(mcp\))p FI(.)156 2282 y Ft(P)o(arameters)156
2561 y Fs(dest)g(id)1128 2541 y FI(Destination)j(thread)g(id.)40
b(The)25 b(destination)f(thread)g(must)h(currently)e(e)o(xist)j(and)e
(run)g(on)1128 2640 y(a)i(priority)e(le)n(v)o(el)h(less)i(than)e(or)g
(equal)g(to)h(the)f(current)g(thread')-5 b(s)25 b Fs(mcp)p
FI(.)41 b(Otherwise,)26 b(the)1128 2740 y(destination)d(thread)h(is)h
(not)f(af)n(fected)f(by)h(this)h(system)g(call)g(and)f(all)h(result)f
(parameters)1128 2840 y(e)o(xcept)19 b Fs(old)h(par)o(am)f(wor)m(d)h
FI(are)h(unde\002ned.)156 3078 y Fs(par)o(am)f(wor)m(d)779
3115 y FI(v)n(alid)p 1128 3007 532 4 v 1128 3173 4 167
v 355 w Fp(m)1361 3123 y Fk(t)1406 3129 y Fr(\(8\))p
1656 3173 V 1128 3176 532 4 v 1659 3007 266 4 v 1659
3173 4 167 v 1712 3115 a Fp(e)1745 3123 y Fk(t)1789 3129
y Fr(\(4\))p 1921 3173 V 1659 3176 266 4 v 1925 3007
V 1925 3173 4 167 v 1991 3115 a FF(0)2041 3129 y Fr(\(4\))p
2187 3173 V 1925 3176 266 4 v 2190 3007 532 4 v 2190
3173 4 167 v 2335 3115 a FF(small)2495 3129 y Fr(\(8\))p
2718 3173 V 2190 3176 532 4 v 2722 3007 V 2722 3173 4
167 v 2884 3115 a FF(prio)3008 3129 y Fr(\(8\))p 3250
3173 V 2722 3176 532 4 v 779 3314 a Fs(prio)210 b FI(Ne)n(w)34
b(priority)e(for)i(destination)e(thread.)65 b(Must)34
b(be)g(less)h(than)f(or)f(equal)g(to)h(current)1128 3414
y(thread')-5 b(s)19 b Fs(mcp)p FI(.)779 3555 y Fs(small)169
b FI(\(Only)31 b(ef)n(fecti)n(v)o(e)g(for)g(Pentium.\))59
b(Sets)33 b(the)f Fs(small)h(addr)m(ess)f(space)f(number)h
FI(for)f(the)1128 3655 y(addressed)f Fs(task)p FI(.)60
b(On)32 b(Pentium,)h(small)g(address)e(spaces)h(from)e(1)i(to)g(127)f
(currently)1128 3754 y(a)n(v)n(ailable.)h(A)24 b(v)n(alue)e(of)g(0)h
(or)g(255)f(in)h(this)g(\002eld)g(does)g(not)f(change)g(the)h(current)e
(setting)1128 3854 y(for)e(the)i(task.)k(This)20 b(\002eld)g(is)i
(currently)c(ignored)g(for)i(486)f(and)h(PPro.)779 3995
y Fy(m)852 4007 y Fq(t)881 3995 y Fy(;)14 b(e)957 4007
y Fq(t)1128 3995 y FI(Ne)n(w)23 b(timeslice)g(length)g(for)f(the)h
(destination)f(thread.)32 b(The)23 b(timeslice)g(quantum)f(is)h(en-)
1128 4095 y(coded)c(lik)o(e)h(a)h(timeout:)j Fu(4)1893
4065 y Fx(15)p Fn(\000)p Fq(e)2042 4073 y Fi(t)2074 4095
y Fy(m)2147 4107 y Fq(t)2197 4095 y Fy(\026s)p FI(.)1128
4194 y(The)h(k)o(ernel)f(rounds)g(this)i(v)n(alue)f(up)g(to)n(w)o(ards)
g(the)g(nearest)g(possible)g(v)n(alue.)40 b(Thus)25 b(the)1128
4294 y(timeslice)f(granularity)f(can)h(be)g(determined)f(by)g(trying)h
(to)g(set)h(the)g(timeslice)f(to)h(1)f Fy(\026)p FI(s.)1128
4394 y(Ho)n(we)n(v)o(er)18 b(note)i(that)g(the)h(timeslice)f
(granularity)e(may)i(depend)e(on)i(the)g(priority)-5
b(.)1128 4493 y(T)m(imeslice)19 b(length)g(0)h(\()p Fy(m)1863
4505 y Fq(t)1905 4485 y Fx(=)1970 4493 y Fu(0)p Fy(;)14
b(e)2088 4505 y Fq(t)2130 4485 y Fn(6)p Fx(=)2195 4493
y Fu(0)p FI(\))19 b(is)i(al)o(w)o(ays)f(a)g(possible)f(v)n(alue.)24
b(It)c(means)f(that)h(the)1128 4593 y(thread)g(will)i(get)f(no)f
(ordinary)f(timeslice,)i(i.e.)28 b(is)22 b(block)o(ed.)k(Ho)n(we)n(v)o
(er)m(,)19 b(e)n(v)o(en)h(a)h(block)o(ed)1128 4693 y(thread)e(may)h(e)o
(x)o(ecute)f(in)h(a)g(timeslice)h(donated)e(to)h(it)h(by)f(ipc.)779
4859 y Fs(\223in)m(v\224)158 b FI(\(0xFFFFFFFF\))28 b(The)g(current)f
(priority)g(and)g(timeslice)i(length)e(of)h(the)g(thread)f(is)i(not)
1128 4958 y(modi\002ed.)156 5186 y Fs(e)n(xt)21 b(pr)m(eempter)779
5181 y FI(v)n(alid)184 b(De\002nes)22 b(the)g(e)o(xternal)f(preempter)f
(for)i(the)g(destination)f(thread.)29 b(\(Nilthread)21
b(is)i(a)g(v)n(alid)1128 5281 y(id.\))779 5422 y Fs(\223in)m(v\224)158
b FI(\(0xFFFFFFFF)-7 b(,)p Fv(\030)p FI(\))20 b(The)g(current)f(e)o
(xternal)f(preempter)h(of)h(the)g(thread)f(is)i(not)f(changed.)p
eop
%%Page: 27 27
27 26 bop 322 -290 a FB(THREAD)p 664 -290 25 4 v 30 w(SCHEDULE)2716
b FI(27)322 -83 y Fs(old)20 b(par)o(am)g(wor)m(d)945
-46 y FI(v)n(alid)p 1349 -154 532 4 v 1349 12 4 167 v
410 w Fp(m)1582 -38 y Fk(t)1627 -32 y Fr(\(8\))p 1877
12 V 1349 15 532 4 v 1880 -154 266 4 v 1880 12 4 167
v 1933 -46 a Fp(e)1966 -38 y Fk(t)2011 -32 y Fr(\(4\))p
2143 12 V 1880 15 266 4 v 2146 -154 V 2146 12 4 167 v
2200 -46 a Fp(ts)2275 -32 y Fr(\(4\))p 2408 12 V 2146
15 266 4 v 2412 -154 532 4 v 2412 12 4 167 v 2600 -46
a FE(\030)2672 -32 y Fr(\(8\))p 2940 12 V 2412 15 532
4 v 2943 -154 V 2943 12 4 167 v 3106 -46 a FF(prio)3229
-32 y Fr(\(8\))p 3471 12 V 2943 15 532 4 v 945 153 a
Fs(prio)265 b FI(Old)20 b(priority)f(of)h(destination)f(thread.)945
295 y Fy(m)1018 307 y Fq(t)1047 295 y Fy(;)14 b(e)1123
307 y Fq(t)1349 295 y FI(Old)20 b(timeslice)h(length)e(of)h(the)g
(destination)f(thread:)25 b Fu(4)2939 264 y Fx(15)p Fn(\000)p
Fq(e)3088 272 y Fi(t)3120 295 y Fy(m)3193 307 y Fq(t)3242
295 y Fy(\026s)p FI(.)945 436 y Fy(ts)1035 428 y Fx(=)1349
436 y FI(Thread)19 b(state:)1028 535 y Fu(0)f(+)g Fy(k)135
b Fs(Running)o(.)23 b FI(The)d(thread)f(is)i(ready)e(to)h(e)o(x)o
(ecute)f(at)i(user)n(-le)n(v)o(el.)1028 635 y Fu(4)d(+)g
Fy(k)135 b Fs(Sending)o(.)54 b FI(A)30 b(user)n(-in)m(v)n(ok)o(ed)e
(ipc)j(send)f(operation)f(currently)f(transfers)i(an)h(outgoing)1349
735 y(message.)1028 834 y Fu(8)18 b(+)g Fy(k)135 b Fs(Receiving)o(.)30
b FI(A)23 b(user)n(-in)m(v)n(ok)o(ed)c(ipc)k(recei)n(v)o(e)e(operation)
f(currently)h(recei)n(v)o(es)g(an)i(imcom-)1349 934 y(ing)d(message.)
1028 1034 y(C)266 b Fs(W)-8 b(aiting)18 b FI(for)f(recei)n(v)o(e.)23
b(A)18 b(user)n(-in)m(v)n(ok)o(ed)d(ipc)j(recei)n(v)o(e)f(operation)f
(currently)g(w)o(aits)i(for)f(an)1349 1133 y(incoming)h(message.)1028
1233 y(D)261 b Fs(P)-7 b(ending)20 b FI(send.)29 b(A)22
b(user)n(-in)m(v)n(ok)o(ed)d(ipc)j(send)f(operation)f(currently)f(w)o
(aits)k(for)e(the)g(desti-)1349 1332 y(nation)e(\(recipient\))g(to)h
(become)f(ready)g(to)i(recei)n(v)o(e.)1028 1432 y(E)270
b(Reserv)o(ed.)1028 1532 y(F)275 b Fs(Dead.)24 b FI(The)c(thread)f(is)j
(unable)d(to)h(e)o(x)o(ecute.)1070 1698 y Fy(k)1136 1690
y Fx(=)1208 1698 y FI(0)99 b Fs(K)m(ernel)21 b(inactive)o(.)j
FI(The)c(k)o(ernel)f(does)h(not)g(e)o(x)o(ecute)f(an)h(automatic)f(RPC)
j(for)d(the)i(thread.)1208 1797 y(1)99 b Fs(P)-7 b(a)o(g)o(er)p
FI(.)25 b(The)20 b(k)o(ernel)f(e)o(x)o(ecutes)h(a)g(pagef)o(ault)f(RPC)
j(to)e(the)g(thread')-5 b(s)20 b(pager)-5 b(.)1208 1897
y(2)99 b Fs(Internal)23 b(pr)m(eempter)-9 b(.)33 b FI(The)23
b(k)o(ernel)g(e)o(x)o(ecutes)f(a)i(preemption)d(RPC)k(to)e(the)h
(thread')-5 b(s)23 b(in-)1349 1997 y(ternal)d(preempter)-5
b(.)1208 2096 y(3)99 b Fs(External)31 b(pr)m(eempter)-9
b(.)58 b FI(The)32 b(k)o(ernel)e(e)o(x)o(ecutes)h(a)h(preemption)d(RPC)
k(to)e(the)h(thread')-5 b(s)1349 2196 y(e)o(xternal)19
b(preempter)-5 b(.)945 2362 y Fs(\223in)m(v\224)213 b
FI(\(0xFFFFFFFF\))33 b(The)f(addressed)f(thread)h(does)g(either)g(not)g
(e)o(xist)h(or)f(has)h(a)g(priority)1349 2461 y(which)21
b(e)o(xceeds)g(the)g(current)g(thread')-5 b(s)21 b Fs(mcp)p
FI(.)29 b(All)22 b(other)f(return)f(parameters)g(are)i(unde-)1349
2561 y(\002ned)e(\()p Fv(\030)p FI(\).)322 2739 y Fs(old)g(e)n(xt)h(pr)
m(eempter)1294 2738 y FI(Old)f(e)o(xternal)f(preempter)f(of)i(the)g
(destination)g(thread.)322 2905 y Fs(partner)1294 2901
y FI(P)o(artner)k(of)g(an)h(acti)n(v)o(e)f(user)n(-in)m(v)n(ok)o(ed)f
(ipc)i(operation.)37 b(This)25 b(parameter)e(is)j(only)e(v)n(alid,)1294
3000 y(if)e(the)h(thread')-5 b(s)21 b(user)h(state)h(is)g
Fs(sending)o(,)f(r)m(eceiving)o(,)g(pending)e FI(or)i
Fs(waiting)g FI(\(4.)12 b(.)g(.)g(D\).)22 b(An)1294 3100
y(in)m(v)n(alid)j(thread)h(id)g(\(0xFFFFFFFF)-7 b(,)p
Fv(\030)p FI(\))27 b(is)g(deli)n(v)o(ered)e(if)i(there)f(is)h(no)f
(speci\002c)h(partner)m(,)1294 3200 y(i.e.)20 b(if)g(the)h(thread)e(is)
i(in)f(an)h(open)e(recei)n(v)o(e)g(state.)322 3375 y
Fs(time)p 1301 3288 V 1301 3454 4 167 v 1461 3396 a Fp(m)1523
3404 y Fk(w)1590 3410 y Fr(\(8\))p 1829 3454 V 1301 3457
532 4 v 1832 3288 266 4 v 1832 3454 4 167 v 1874 3396
a Fp(e)1907 3404 y Fk(w)1973 3410 y Fr(\(4\))p 2094 3454
V 1832 3457 266 4 v 2098 3288 V 2098 3454 4 167 v 2146
3396 a Fp(e)2179 3404 y Fk(p)2232 3410 y Fr(\(4\))p 2360
3454 V 2098 3457 266 4 v 2363 3288 1063 4 v 2363 3454
4 167 v 2744 3396 a Fp(T)2785 3408 y Fk(hig)r(h)2932
3410 y Fr(\(16\))p 3423 3454 V 2363 3457 1063 4 v 3509
3396 a FI(EDX)p 1301 3461 2126 4 v 1301 3627 4 167 v
2228 3569 a Fp(T)2269 3581 y Fk(low)2386 3583 y Fr(\(32\))p
3423 3627 V 1301 3630 2126 4 v 3509 3569 a FI(ECX)945
3735 y Fy(T)307 b FI(Cpu)19 b(time)g(\(48-bit)f(v)n(alue\))g(in)h
(microseconds)e(which)h(has)i(been)e(consumed)f(by)i(the)g(des-)1301
3834 y(tination)g(thread.)945 4000 y Fy(m)1018 4012 y
Fq(w)1072 4000 y Fy(;)14 b(e)1148 4012 y Fq(w)1301 4000
y FI(Current)28 b(user)n(-le)n(v)o(el)g(w)o(ak)o(eup)f(of)i(the)g
(destination)f(thread,)h(encoded)f(lik)o(e)h(a)g(timeout.)1301
4100 y(The)d(v)n(alue)f(denotes)h(the)h(still)g(remaining)e(timeout)g
(interv)n(al.)43 b(V)-9 b(alid)26 b(only)g(if)h(the)f(user)1301
4200 y(state)21 b(is)g Fs(waiting)f FI(\(C\))g(or)g Fs(pending)e
FI(\(D\).)945 4366 y Fy(e)984 4378 y Fq(p)1301 4366 y
FI(Ef)n(fecti)n(v)o(e)e(pagef)o(ault)g(w)o(ak)o(eup)g(of)h(the)h
(destination)e(thread,)h(encoded)f(lik)o(e)h(a)h(4-bit)f(page-)1301
4465 y(f)o(ault)f(timeout.)24 b(The)16 b(v)n(alue)g(denotes)g(the)h
(still)h(remaining)d(timeout)h(interv)n(al.)23 b(V)-9
b(alid)17 b(only)1301 4565 y(if)j(the)g(k)o(ernel)g(state)h(is)g
Fs(pa)o(g)o(er)f FI(\()p Fy(k)2271 4557 y Fx(=)2336 4565
y Fu(1)p FI(\).)p eop
%%Page: 28 28
28 27 bop 156 -290 a FI(28)2754 b FB(L)-8 b(THREAD)p
3379 -290 25 4 v 30 w(EX)p 3520 -290 V 29 w(REGS)156
310 y Fh(lthr)m(ead)p 610 310 44 4 v 51 w(ex)p 797 310
V 51 w(r)m(egs)p 2151 347 4 100 v 2809 347 V 2151 447
V 2809 447 V 2151 547 V 2809 547 V 2151 646 V 2202 616
a Fg(\000)21 b FI(INT)f(0x35)p Fg(!)p 2809 646 V 1526
318 a Fs(lthr)m(ead)g(no)98 b FF(EAX)p 2151 347 V 2809
347 V 757 w(EAX)i Fs(old)19 b(EFLA)m(GS)1724 417 y(ESP)98
b FF(ECX)p 2151 447 V 2809 447 V 761 w(ECX)104 b Fs(old)19
b(ESP)1738 517 y(EIP)98 b FF(EDX)p 2151 547 V 2809 547
V 757 w(EDX)i Fs(old)19 b(EIP)1420 616 y(int)i(pr)m(eempter)98
b FF(EBX)p 2151 646 V 2809 646 V 761 w(EBX)104 b Fs(old)19
b(pr)m(eempter)1802 716 y Fv(\030)99 b FF(EBP)p 2151
746 V 2809 746 V 772 w(EBP)115 b Fv(\030)1675 816 y Fs(pa)o(g)o(er)98
b FF(ESI)p 2151 846 V 2809 846 V 794 w(ESI)137 b Fs(old)19
b(pa)o(g)o(er)1802 915 y Fv(\030)99 b FF(EDI)p 2151 945
V 2809 945 V 783 w(EDI)126 b Fv(\030)156 1194 y FI(This)21
b(function)d(reads)i(and)g(writes)g(some)g(re)o(gister)g(v)n(alues)g
(of)g(a)g(thread)g(in)g(the)g(current)f(task.)281 1312
y(It)i(also)f(creates)h(threads.)j(Conceptually)-5 b(,)18
b(creating)i(a)g(task)h(includes)f(creating)f(all)i(of)f(its)h
(threads.)k(Except)20 b(lthread)f(0,)156 1411 y(all)25
b(these)f(threads)g(run)f(an)h(idle)g(loop.)35 b(Of)25
b(course,)e(the)i(k)o(ernel)e(does)g(neither)h(allocate)f(control)g
(blocks)g(nor)h(time)g(slices)156 1511 y(etc.)h(to)g(them.)37
b(Setting)24 b(stack)h(and)f(instruction)f(pointer)g(of)h(such)g(a)h
(thread)f(to)g(v)n(alid)g(v)n(alues)g(then)g(really)g(generates)g(the)
156 1610 y(thread.)281 1728 y(Note)17 b(that)h(this)g(operation)d
(reads)i(and)g(writes)h(the)g Fs(user)n(-le)o(vel)f FI(re)o(gisters)g
(\(ESP)-9 b(,)17 b(EIP)h(and)f(EFLA)m(GS\).)f(Ongoing)g(k)o(ernel)156
1828 y(acti)n(vities)26 b(are)f(not)g(af)n(fected.)39
b(Ho)n(we)n(v)o(er)23 b(an)i(ipc)g(operation)f(is)i(cancelled)e(or)h
(aborted.)38 b(If)26 b(the)f(ipc)g(is)h(either)f(w)o(aiting)g(to)156
1927 y(send)g(a)g(message)g(or)g(w)o(aiting)g(to)g(recei)n(v)o(e)f(a)h
(message,)h(i.e.)f(a)g(message)g(transfer)f(is)i(not)e(yet)h(running,)f
(ipc)h(is)h(cancelled)156 2027 y(\(completion)20 b(code)h(0x40)g(or)g
(0x50\).)28 b(If)22 b(a)g(message)g(transfer)f(is)i(currently)d
(running,)g(ipc)i(is)h(aborted)d(\(completion)g(code)156
2126 y(0xC0)g(or)g(0xD0\).)156 2462 y Ft(P)o(arameters)156
2660 y Fs(lthr)m(ead)g(no)p 1128 2574 67 4 v 1128 2740
4 167 v 1144 2681 a Fp(v)p 1191 2740 V 1128 2743 67 4
v 1194 2574 1595 4 v 1194 2740 4 167 v 732 w FF(0)1960
2695 y Fr(\(24\))p 2785 2740 V 1194 2743 1595 4 v 2788
2574 465 4 v 2788 2740 4 167 v 2879 2681 a FF(lthread)3080
2695 y Fr(\(7\))p 3250 2740 V 2788 2743 465 4 v 1128
2848 a FI(Number)f(of)g(addressed)h(lthread)f(\(0.)12
b(.)g(.)g(127\))19 b(inside)h(the)g(current)f(task.)779
3014 y Fy(v)836 3006 y Fx(=)901 3014 y Fu(0)185 b FI(If)24
b(ESP)g(and)g(EIP)g(are)g(v)n(alid,)g(the)o(y)f(specify)g(32-bit)g
(protected-mode)e(v)n(alues.)36 b(The)23 b(ad-)1128 3113
y(dressed)c(thread)h(will)h(e)o(x)o(ecute)d(in)j(32-bit)e(protected)g
(mode)g(afterw)o(ards.)779 3254 y Fy(v)836 3246 y Fx(=)901
3254 y Fu(1)185 b FI(If)20 b(ESP)g(and)g(EIP)g(are)g(v)n(alid,)f(the)o
(y)h(specify)f(16-bit)g(V86-mode)f(v)n(alues.)24 b(The)c(addressed)1128
3354 y(thread)f(will)i(e)o(x)o(ecute)e(in)h(V86)g(mode)f(afterw)o
(ards.)779 3520 y Fy(u)841 3512 y Fx(=)905 3520 y Fu(0)181
b FI(The)20 b(thread')-5 b(s)19 b Fs(auto-pr)l(opa)o(gating)d
FI(status)21 b(is)g(not)f(updated.)779 3661 y Fy(u)841
3653 y Fx(=)905 3661 y Fu(1)181 b FI(The)20 b(thread')-5
b(s)19 b Fs(auto-pr)l(opa)o(gating)d FI(status)21 b(is)g(updated)e(by)h
Fy(a)p FI(.)779 3827 y Fy(a)837 3819 y Fx(=)902 3827
y Fu(0)184 b FI(If)20 b Fy(u)1266 3819 y Fx(=)1330 3827
y Fu(1)p FI(,)g(the)g(thread)f(is)j(set)f(to)f Fs(non)f(auto-pr)l(opa)o
(gating)p FI(.)779 3968 y Fy(a)837 3960 y Fx(=)902 3968
y Fu(1)184 b FI(If)20 b Fy(u)1266 3960 y Fx(=)1330 3968
y Fu(1)p FI(,)g(the)g(thread)f(is)j(set)f(to)f Fs(auto-pr)l(opa)o
(gating)p FI(.)156 4163 y Fs(ESP)779 4143 y FI(v)n(alid)184
b(Ne)n(w)24 b(stack)g(pointer)e(\(ESP\))i(for)f(the)h(thread.)34
b(It)25 b(must)e(point)g(into)h(the)g(user)n(-accessible)1128
4243 y(part)c(of)g(the)g(address)f(space.)779 4384 y
Fs(\223in)m(v\224)158 b FI(\(0xFFFFFFFF\))20 b(The)g(e)o(xisting)f
(stack)i(pointer)e(is)i(not)f(modi\002ed.)156 4577 y
Fs(EIP)779 4556 y FI(v)n(alid)184 b(Ne)n(w)36 b(instruction)f(pointer)f
(\(EIP\))i(for)f(the)h(thread.)71 b(It)36 b(must)g(point)g(into)f(the)h
(user)n(-)1128 4655 y(accessible)20 b(part)g(of)g(the)g(address)g
(space.)779 4796 y Fs(\223in)m(v\224)158 b FI(\(0xFFFFFFFF\))20
b(The)g(e)o(xisting)f(instruction)g(pointer)g(is)i(not)f(modi\002ed.)
156 4990 y Fs(int)h(pr)m(eempter)779 4986 y FI(v)n(alid)184
b(De\002nes)20 b(the)g(internal)g(preempter)e(used)i(by)g(the)g
(thread.)k(\()p Fs(Nil)d FI(is)g(a)g(v)n(alid)e(id.\))779
5118 y Fs(\223in)m(v\224)158 b FI(\(0xFFFFFFFF)-7 b(,)p
Fv(\030)p FI(\))20 b(The)g(e)o(xisting)f(internal)g(preempter)g(id)h
(is)h(not)f(modi\002ed.)156 5294 y Fs(pa)o(g)o(er)779
5289 y FI(v)n(alid)184 b(De\002nes)20 b(the)g(pager)f(used)h(by)g(the)g
(thread.)779 5422 y Fs(\223in)m(v\224)158 b FI(\(0xFFFFFFFF)-7
b(,)p Fv(\030)p FI(\))20 b(The)g(e)o(xisting)f(pager)g(id)i(is)g(not)f
(modi\002ed.)p eop
%%Page: 29 29
29 28 bop 322 -290 a FB(L)-8 b(THREAD)p 707 -290 25 4
v 30 w(EX)p 848 -290 V 30 w(REGS)2754 b FI(29)322 -83
y Fs(old)20 b(EFLA)m(GS)1294 -103 y FI(Flags)h(of)f(the)h(thread.)k
(The)c Fs(VM)g FI(\003ag)g(speci\002es)g(whether)e(the)i(thread)f
(currently)f(runs)h(in)1294 -3 y(32-bit)j(protected)f(mode)i(\()p
Fs(VM)2222 -11 y Fx(=)2286 -3 y Fu(0)p FI(\))g(or)f(in)i(V86)e(mode)g
(\()p Fs(VM)3101 -11 y Fx(=)3166 -3 y Fu(1)p FI(\).)36
b(Note)24 b(that)g(this)h(\003ag)1294 96 y(determines)19
b(the)h(format)f(of)h(the)g(deli)n(v)o(ered)f(old)g(ESP)i(and)f(EIP)-9
b(.)322 274 y Fs(old)20 b(ESP)1294 273 y FI(Old)g(stack)g(pointer)f
(\(ESP\))h(of)g(the)h(thread.)322 457 y Fs(old)f(ESP)1294
456 y FI(Old)g(instruction)f(pointer)g(\(EIP\))h(of)f(the)i(thread.)322
640 y Fs(old)f(int)h(pr)m(eempter)1294 639 y FI(Id)f(of)g(the)g
(thread')-5 b(s)19 b(old)h(internal)g(preempter)e(\(may)h(be)h
(nilthread\).)322 822 y Fs(old)g(pa)o(g)o(er)1294 821
y FI(Id)g(of)g(the)g(thread')-5 b(s)19 b(old)h(pager)-5
b(.)322 1274 y Ft(V86-mode)26 b(P)n(ointers)322 1682
y Fs(ESP)-11 b(,)20 b(old)g(ESP)p 1294 1605 1063 4 v
1294 1771 4 167 v 1723 1713 a FF(SS)1814 1727 y Fr(\(16\))p
2353 1771 V 1294 1774 1063 4 v 2356 1605 V 2356 1771
4 167 v 2786 1713 a FF(SP)2877 1727 y Fr(\(16\))p 3416
1771 V 2356 1774 1063 4 v 322 1922 a Fs(EIP)-11 b(,)20
b(old)g(EIP)p 1294 1845 V 1294 2011 4 167 v 1720 1953
a FF(CS)1818 1967 y Fr(\(16\))p 2353 2011 V 1294 2014
1063 4 v 2356 1845 V 2356 2011 4 167 v 2793 1953 a FF(IP)2869
1967 y Fr(\(16\))p 3416 2011 V 2356 2014 1063 4 v 322
2585 a Ft(Example)322 2741 y FI(Signalling)g(can)g(be)g(implemented)e
(as)j(follo)n(ws:)442 2936 y(signal)f(\(lthread\))f(:)562
3036 y(esp)i(:=)f(recei)n(v)o(e)f(signal)h(stack)h(;)562
3135 y(eip)f(:=)h(recei)n(v)o(e)e(signal)h(;)562 3235
y(mem)g([esp)g(\226)g(\226])g(:=)h(0)f(;)562 3335 y(lthread)g(e)o(x)f
(re)o(gs)h(\(lthread,)f(esp,)h(eip,)g(e\003ags,)g(\226,)g(\226\))g(;)
562 3434 y(mem)g([esp)g(\226)g(\226])g(:=)h(e\003ags)f(;)562
3534 y(mem)g([esp)g(\226)g(\226])g(:=)h(eip)f(;)562 3634
y(mem)g([idle)g(stack)g(\226)h(w)o(ordlength])c(:=)k(esp)f(.)442
3841 y(recei)n(v)o(e)f(signal)i(:)562 3941 y(push)f(all)h(re)o(gs)e(;)
562 4040 y Fz(while)i FI(mem)f([esp)g(+)h(8)f Fv(\002)g
FI(w)o(ordlength])e(=)i(0)h Fz(do)682 4140 y FI(thread)e(switch)i
(\(nilthread\))562 4240 y Fz(od)g FI(;)562 4339 y(pop)e(all)i(re)o(gs)f
(;)562 4439 y(pop)f(\(esp\))h(;)562 4538 y(jmp)g(\(signal)g(eip\))g(.)p
eop
%%Page: 30 30
30 29 bop 156 -290 a FI(30)3088 b FB(T)-8 b(ASK)p 3542
-290 25 4 v 30 w(NEW)156 324 y Fh(task)p 421 324 44 4
v 51 w(new)p 2151 335 4 100 v 2809 335 V 2151 434 V 2809
434 V 2151 534 V 2809 534 V 2151 634 V 2202 604 a Fg(\000)21
b FI(INT)f(0x36)p Fg(!)p 2809 634 V 1350 305 a Fs(mcp)g(/)h(ne)o(w)g(c)
o(hief)98 b FF(EAX)p 2151 335 V 2809 335 V 757 w(EAX)i
Fv(\030)1505 404 y Fs(initial)20 b(ESP)98 b FF(ECX)p
2151 434 V 2809 434 V 761 w(ECX)104 b Fv(\030)1518 504
y Fs(initial)21 b(EIP)98 b FF(EDX)p 2151 534 V 2809 534
V 757 w(EDX)i Fv(\030)1675 604 y Fs(pa)o(g)o(er)e FF(EBX)p
2151 634 V 2809 634 V 761 w(EBX)104 b Fv(\030)1802 703
y(\030)99 b FF(EBP)p 2151 733 V 2809 733 V 772 w(EBP)115
b Fv(\030)1578 803 y Fs(dest)21 b(task)99 b FF(ESI)p
2151 833 V 2809 833 V 794 w(ESI)137 b Fs(ne)o(w)20 b(task)1802
902 y Fv(\030)99 b FF(EDI)p 2151 932 V 2809 932 V 783
w(EDI)126 b Fv(\030)156 1196 y FI(This)25 b(function)e(deletes)h
(and/or)g(creates)g(a)h(task.)38 b(Deletion)24 b(of)g(a)h(task)g(means)
f(that)h(the)f(address)h(space)f(of)g(the)h(task)g(and)156
1295 y(all)g(threads)f(of)g(the)g(task)h(disappear)-5
b(.)36 b(The)24 b(cputime)f(of)h(all)h(deleted)f(threads)f(is)j(added)d
(to)h(the)g(cputime)g(of)g(the)g(deleting)156 1395 y(thread.)g(If)c
(the)h(deleted)e(task)i(w)o(as)g(chief)e(of)h(a)h(clan,)f(all)h(tasks)f
(of)g(the)g(clan)g(are)h(deleted)e(as)i(well.)281 1527
y(T)-7 b(asks)26 b(may)g(be)f(created)g(as)i Fs(active)e
FI(or)h Fs(inactive)p FI(.)41 b(F)o(or)25 b(an)h(acti)n(v)o(e)f(task,)j
(a)e(ne)n(w)g(address)f(space)h(is)g(created)f(together)156
1626 y(with)18 b(128)e(threads.)23 b(Lthread)16 b(0)i(is)g(started,)g
(the)f(other)f(ones)h(w)o(ait)h(for)f(a)g(\223real\224)g(creation)g(by)
g(lthread)p 3065 1626 25 4 v 28 w(e)o(x)p 3171 1626 V
29 w(re)o(gs.)24 b(An)17 b(inacti)n(v)o(e)156 1726 y(task)24
b(is)f(empty)-5 b(.)32 b(It)23 b(occupies)f(no)h(resources,)f(has)h(no)
g(address)f(space)h(and)f(no)h(threads.)32 b(Communication)21
b(with)i(inacti)n(v)o(e)156 1826 y(tasks)i(is)g(not)f(possible.)36
b(Loosely)23 b(speaking,)h(inacti)n(v)o(e)f(tasks)i(are)f(not)g(really)
f(e)o(xisting)h(b)n(ut)g(represent)f(only)g(the)h(right)g(to)156
1925 y(create)c(an)g(acti)n(v)o(e)g(task.)281 2057 y(A)f(ne)n(wly)f
(created)g(task)g(gets)h(the)g(creator)e(as)i(its)h(chief,)e(i.e.)h(it)
g(is)g(created)f(inside)g(the)h(creator')-5 b(s)18 b(clan.)24
b(Symmetrically)-5 b(,)156 2157 y(a)21 b(task)g(can)f(only)f(be)h
(deleted)g(either)f(directly)h(by)f(its)j(chief)d(\(its)i(creator\))e
(or)h(indirectly)f(by)h(a)g(higher)n(-le)n(v)o(el)e(chief.)156
2572 y Ft(P)o(arameters)156 2797 y Fs(dest)j(task)1128
2777 y FI(T)-7 b(ask)18 b(id)h(of)f(an)g Fs(e)n(xisting)g
FI(task)h(\(acti)n(v)o(e)e(or)h(inacti)n(v)o(e\))f(whose)h(chief)f(is)j
(the)e(current)f(task.)24 b(If)1128 2876 y(one)19 b(of)g(these)h
(preconditions)d(is)k(not)e(ful\002lled,)g(the)g(system)h(call)g(has)g
(no)f(ef)n(fect.)24 b(Simul-)1128 2976 y(taneously)-5
b(,)18 b(a)i(ne)n(w)f(task)h Fs(with)g(the)g(same)g(task)g(number)f
FI(is)h(created.)k(It)c(may)g(be)f(acti)n(v)o(e)g(or)1128
3076 y(inacti)n(v)o(e)g(\(see)h(ne)o(xt)g(parameter\).)156
3265 y Fs(pa)o(g)o(er)779 3253 y Fn(6)p Fx(=)851 3261
y Fs(nil)189 b FI(The)17 b(ne)n(w)g(task)g(is)h(created)f(as)h
Fs(active)p FI(.)23 b(The)17 b(speci\002ed)g(pager)f(is)j(associated)e
(with)g(lthread)1128 3360 y(0.)779 3452 y Fx(=)851 3460
y Fs(nil)189 b FI(\(0\))19 b(The)h(ne)n(w)g(task)h(is)g(created)e(as)i
Fs(inactive)p FI(.)j(No)d(lthread)e(is)i(created.)156
3669 y Fs(ESP)1128 3649 y FI(Initial)28 b(stack)g(pointer)f(for)g
(lthread)h(0)g(if)g(the)g(ne)n(w)g(task)h(is)g(created)e(as)i(an)f
(acti)n(v)o(e)g(one.)1128 3749 y(Ignored)18 b(otherwise.)156
3957 y Fs(EIP)1128 3935 y FI(Initial)27 b(instruction)e(pointer)h(for)h
(lthread)f(0)h(if)g(the)g(ne)n(w)g(task)h(is)g(created)e(as)i(an)f
(acti)n(v)o(e)1128 4035 y(one.)d(Ignored)18 b(otherwise.)156
4224 y Fs(mcp)1128 4220 y FI(Maximum)23 b(controlled)g(priority)g
(\(mcp\))g(de\002nes)i(the)f(highest)g(priority)g(which)g(can)g(be)1128
4319 y(ruled)18 b(by)g(the)h(ne)n(w)f(task)i(acting)e(as)h(a)h
(scheduler)-5 b(.)23 b(The)c(ne)n(w)f(task')-5 b(s)20
b(ef)n(fecti)n(v)o(e)d(mcp)h(is)i(the)1128 4419 y(minimum)e(of)i(the)h
(creator')-5 b(s)19 b(mcp)h(and)g(the)g(speci\002ed)g(mcp.)1128
4519 y(EAX)i(contains)f(this)h(parameter)m(,)e(if)i(the)f(ne)n(wly)g
(generated)f(task)i(is)h(an)e Fs(active)h FI(task,)g(i.e.)1128
4618 y(has)e(a)h(pager)e(and)h(at)g(least)h(lthread)f(0.)156
4829 y Fs(ne)o(w)h(c)o(hief)1128 4824 y FI(Speci\002es)d(the)f(chief)g
(of)g(the)h(ne)n(w)f(inacti)n(v)o(e)f(task.)25 b(This)17
b(mechanism)f(permits)h(to)h(transfer)1128 4924 y(inacti)n(v)o(e)30
b(\(\223empty\224\))e(tasks)k(to)f(other)e(tasks.)57
b(T)m(ransferring)29 b(an)h(inacti)n(v)o(e)g(task)h(to)g(the)1128
5023 y(speci\002ed)19 b(chief)g(means)g(to)h(transfer)f(the)g(related)g
(right)g(to)h(create)f(a)h(task.)25 b(Note)19 b(that)h(the)1128
5123 y(task)g(number)f(remains)g(unchanged.)1128 5223
y(EAX)26 b(contains)g(this)h(parameter)m(,)f(if)h(the)g(ne)n(wly)f
(generated)e(task)j(is)h(an)e Fs(inactive)g FI(task,)1128
5322 y(i.e.)f(has)h(no)f(pager)f(and)h(no)g(threads.)39
b(EAX)26 b(contains)e(only)h(the)g(lo)n(wer)g(32)g(bits)h(of)f(the)1128
5422 y(ne)n(w)20 b(chief)5 b(')-5 b(s)19 b(task)i(id.)k(\(The)19
b(chief)h(must)g(reside)g(in)h(the)f(same)g(site.\))p
eop
%%Page: 31 31
31 30 bop 322 -290 a FB(CHAPTER)21 b(2.)46 b(L4/X86)2749
b FI(31)322 -83 y Fs(ne)o(w)21 b(task)f(id)945 -111 y
Fn(6)p Fx(=)996 -103 y Fy(nil)194 b FI(T)-7 b(ask)27
b(creation)f(succeeded.)43 b(If)27 b(the)g(ne)n(w)f(task)h(is)h(acti)n
(v)o(e,)g(the)f(ne)n(w)f(task)h(id)g(will)h(ha)n(v)o(e)1294
-3 y(a)h(ne)n(w)g(v)o(ersion)e(number)h(so)h(that)g(it)g(dif)n(fers)f
(from)g(all)i(task)f(ids)g(used)g(earlier)-5 b(.)51 b(Chief)1294
96 y(and)28 b(task)h(number)d(are)j(the)f(same)h(as)g(in)g
Fs(dest)g(task)p FI(.)50 b(If)28 b(the)h(ne)n(w)f(task)h(is)h(created)d
(in-)1294 196 y(acti)n(v)o(e,)j(the)e(chief)h(is)g(tak)o(en)f(from)g
(the)h Fs(c)o(hief)f FI(parameter;)j(the)e(task)g(number)e(remains)1294
296 y(unchanged.)22 b(The)e(v)o(ersion)f(is)i(unde\002ned)e(so)h(that)h
(the)f(ne)n(w)g(task)g(id)h(might)e(be)i(identical)1294
395 y(with)h(a)h(formerly)e(\(b)n(ut)h(not)g(currently)f(and)h(not)g
(in)g(future\))f(v)n(alid)h(task)h(id.)32 b(This)22 b(is)i(safe)1294
495 y(since)c(communication)d(with)k(inacti)n(v)o(e)e(tasks)i(is)g
(impossible.)945 628 y Fx(=)996 636 y Fy(nil)194 b FI(\(0\))19
b(The)h(task)h(creation)e(f)o(ailed.)p eop
%%Page: 32 32
32 31 bop 156 -290 a FI(32)2750 b FB(CHAPTER)21 b(2.)46
b(L4/X86)156 -57 y FH(2.4)119 b(Pr)n(ocessor)29 b(Mirr)n(oring)156
146 y Ft(2.4.1)99 b(Segments)156 301 y FI(L4)17 b(uses)g(a)h(\003at)f
(\(unse)o(gmented\))d(memory)h(model.)23 b(There)16 b(are)g(only)h(tw)o
(o)g(se)o(gments)f(a)n(v)n(ailable:)23 b Fs(user)p 3113
301 25 4 v 30 w(space)p FI(,)17 b(a)g(read/write)156
401 y(se)o(gment,)22 b(and)g Fs(user)p 767 401 V 30 w(space)p
987 401 V 29 w(e)n(xec)p FI(,)h(an)g(e)o(x)o(ecutable)d(se)o(gment.)31
b(Both)23 b(co)o(v)o(er)e(\(at)h(least\))h(the)g(complete)e(user)n(-le)
n(v)o(el)g(address)156 500 y(space.)281 600 y(The)i(v)n(alues)g(of)g
(both)g(se)o(gment)g(selectors)g Fs(ar)m(e)h(unde\002ned)p
FI(.)32 b(When)23 b(a)h(thread)f(is)h(created,)f(its)i(se)o(gment)d(re)
o(gisters)h(SS,)156 700 y(DS,)f(ES,)f(FS)h(and)f(GS)g(are)g
(initialized)g(with)g Fs(user)p 1621 700 V 30 w(space)p
FI(,)g(CS)h(with)f Fs(user)p 2318 700 V 30 w(space)p
2538 700 V 29 w(e)n(xec)p FI(.)28 b(Whene)n(v)o(er)19
b(the)i(k)o(ernel)f(detects)i(a)156 799 y(general)17
b(protection)g(e)o(xception)f(and)h(the)h(se)o(gment)f(re)o(gisters)h
(are)g(not)g(loaded)f(properly)-5 b(,)15 b(it)k(reloads)f(them)f(with)i
(the)f(abo)o(v)o(e)156 899 y(mentioned)h(selectors.)25
b(From)19 b(the)i(user')-5 b(s)20 b(point)f(of)h(vie)n(w)-5
b(,)20 b(the)g(se)o(gment)f(re)o(gisters)h(cannot)f(be)h(modi\002ed.)
281 999 y(Ho)n(we)n(v)o(er)m(,)25 b(the)h(binary)e(representation)g(of)
h Fs(user)p 1731 999 V 30 w(space)g FI(and)g Fs(user)p
2265 999 V 30 w(space)p 2485 999 V 29 w(e)n(xec)h FI(may)f(change)g(at)
h(an)o(y)f(point)g(during)156 1098 y(program)18 b(e)o(x)o(ecution.)23
b(Ne)n(v)o(er)c(rely)h(on)g(this)h(v)n(alue.)281 1198
y(Furthermore,)f(the)j(LSL)g(\(load)f(se)o(gment)f(limit\))i(machine)e
(instruction)h(may)g(deli)n(v)o(er)f(wrong)h(se)o(gment)f(limits,)j(e)n
(v)o(en)156 1297 y(\003oating)c(ones.)25 b(The)19 b(result)i(of)f(this)
g(instruction)f(is)i(al)o(w)o(ays)g(unde\002ned.)156
1535 y Ft(2.4.2)99 b(Exception)26 b(Handling)156 1691
y FI(#PF)19 b(\(page)e(f)o(ault\),)h(#MC)g(\(machine)f(check)g(e)o
(xception\))f(and)i(some)g(#GP)g(\(general)f(protection\))f(e)o
(xceptions)g(are)j(handled)156 1790 y(by)31 b(the)g(k)o(ernel.)56
b(The)31 b(other)f(e)o(xceptions)f(are)i(mirrored)e(to)i(the)g(virtual)
f(processor)f(of)i(the)g(thread)f(which)g(raised)h(the)156
1890 y(e)o(xception.)281 1990 y(The)20 b(mirrored)e(e)o(xception)g
(handling)h(w)o(orks)g(as)i(described)e(in)i(the)f(processor)f
(manuals.)156 2113 y Fs(LIDT)63 b([EAX])1128 2104 y FI(This)30
b(machine)f(instruction)g(is)i(emulated)e(by)h(the)g(k)o(ernel)g(and)f
(operates)h(per)f(thread.)1128 2204 y(An)o(y)d(thread)g(should)h
(install)g(an)g(IDT)h(by)e(this)i(instruction.)45 b(The)26
b(length)h(\002eld)g(of)g(the)1128 2303 y(IDT)e(v)o(ector)f(is)i(not)e
(interpreted.)38 b(The)25 b(IDT)g(has)g(al)o(w)o(ays)h(a)f(length)f(of)
h(256)f(bytes,)i(i.e.)1128 2403 y(co)o(v)o(ers)19 b(the)h(Intel-reserv)
o(ed)d(e)o(xceptions)i(0)h(to)h(31.)1128 2544 y(The)i(IDT)h(must)g(ha)n
(v)o(e)g(the)f(format)g(described)g(in)h(the)g(processor)f(manuals.)35
b(Ho)n(we)n(v)o(er)m(,)1128 2644 y(only)25 b(trap)h(gates)g(can)g(be)g
(used)f(in)i(a)f(user)n(-le)n(v)o(el)f(IDT)-6 b(.)26
b(The)g(se)o(gment)f(selectors)h(in)g(the)1128 2743 y(IDT)20
b(are)g(ignored,)e(since)i(all)h(se)o(gments)f(describe)f(the)h(\003at)
h(address)f(space.)1128 2885 y(In)m(v)n(alid)30 b(IDT)i(addresses)f(or)
h(in)m(v)n(alid)e(e)o(xception-handler)e(addresses)k(do)f(not)g(raise)i
(a)1128 2984 y(double)18 b(f)o(ault;)j(instead,)e(the)i(current)d
(thread)i(is)h(shut)f(do)n(wn.)156 3121 y(Note)j(that)g(this)g
(mechanism)f(deals)h(only)f(with)h(e)o(xceptions,)f(not)g(INT)h
Fy(n)g FI(instructions.)32 b(Ex)o(ecuting)20 b(an)j(INT)g
Fy(n)g FI(in)g(32-bit)156 3220 y(mode)i(will)i(al)o(w)o(ays)f(raise)g
(a)g(#GP)g(\(general)f(protection\).)39 b(The)26 b(general-protection)c
(handler)i(may)i(interpret)e(the)i(error)156 3320 y(code)20
b(\()p Fu(8)p Fy(n)d Fu(+)h(2)p FI(,)i(see)h(processor)e(manual\))g
(and)g(emulate)h(the)g(INT)g Fy(n)h FI(accordingly)-5
b(.)156 3557 y Ft(2.4.3)99 b(Deb)n(ug)26 b(Registers)156
3713 y FI(User)n(-le)n(v)o(el)21 b(deb)n(ug)f(re)o(gisters)h(e)o(xist)g
(per)g(thread.)27 b(DR0.)12 b(.)g(.)g(3,)22 b(DR6)f(and)g(DR7)g(can)g
(be)h(accessed)f(by)g(the)g(machine)f(insruc-)156 3813
y(tions)i Fc(MO)l(V)j(DRx,n)d FI(and)g Fc(MO)l(V)i(r)l(,DRx)p
FI(.)30 b(Ho)n(we)n(v)o(er)m(,)20 b(only)h(task-local)g(breakpoints)f
(can)i(be)g(acti)n(v)n(ated,)f(i.e.)h(bits)g(L0.)12 b(.)g(.)g(3)156
3912 y(in)21 b(DR7)f(cannot)f(be)i(set.)k(Breakpoints)19
b(operate)g(per)h(thread.)k(Breakpoints)19 b(are)h(signalled)g(as)h
(#DB)f(e)o(xception)f(\(INT)g(1\).)281 4012 y(Note)h(that)g(user)n(-le)
n(v)o(el)f(breakpoints)g(are)h(suspended)e(when)i(k)o(ernel)f
(breakpoints)f(are)j(set)g(by)e(the)i(k)o(ernel)e(deb)n(ugger)-5
b(.)p eop
%%Page: 33 33
33 32 bop 322 -290 a FB(2.5.)45 b(THE)21 b(KERNEL-INFO)e(P)-8
b(A)m(GE)2388 b FI(33)322 -57 y FH(2.5)119 b(The)31 b(K)m(er)n(nel-Inf)
m(o)f(P)o(age)322 129 y FI(The)h(k)o(ernel-info)d(page)i(contains)h(k)o
(ernel-v)o(ersion)c(data,)33 b(memory)d(descriptors)f
Fs(and)h(the)h(cloc)n(k)p FI(.)57 b(The)30 b(remainder)f(of)322
229 y(the)e(page)f(is)i(unde\002ned.)43 b(\(In)26 b(f)o(act,)j(it)f
(contains)e(k)o(ernel)g(code.\))44 b(The)26 b(k)o(ernel-info)f(page)h
(is)i(mapped)d Fs(r)m(ead-only)g FI(in)i(the)322 328
y Fy(\033)369 340 y Fx(0)407 328 y FI(-address)g(space.)45
b Fy(\033)1010 340 y Fx(0)1076 328 y FI(can)27 b(use)g(the)h(memory)d
(descriptors)h(for)h(its)h(memory)d(management.)44 b
Fy(\033)3257 340 y Fx(0)3323 328 y FI(can)27 b(map)f(the)i(page)322
428 y(read-only)18 b(to)j(other)e(address)h(spaces.)p
322 623 3189 4 v 322 1039 4 416 v 1701 980 a FF(L4)d(v)o(ersion)h
(parts)p 3507 1039 V 322 1042 3189 4 v 1550 w Fy(L)g
Fv(\002)g Fu(16)p 322 1236 1595 4 v 322 1402 4 167 v
1092 1344 a FE(\030)p 1913 1402 V 322 1405 1595 4 v 1916
1236 798 4 v 1916 1402 4 167 v 982 w FF(b)o(us)e(frequenc)o(y)p
2710 1402 V 1916 1405 798 4 v 2713 1236 V 2713 1402 4
167 v 346 w(processor)i(frequenc)o(y)p 3507 1402 V 2713
1405 798 4 v 366 w FI(0xB0)p 322 1408 1595 4 v 322 1574
4 167 v 1092 1516 a FE(\030)p 1913 1574 V 322 1577 1595
4 v 1916 1408 V 1916 1574 4 167 v 1495 w FF(clock)p 3507
1574 V 1916 1577 1595 4 v 954 w FI(0xA0)p 322 1580 798
4 v 322 1746 4 167 v 435 1688 a FF(dedicated)i(mem4.high)p
1116 1746 V 322 1749 798 4 v 1119 1580 V 1119 1746 4
167 v 236 w(dedicated)g(mem4.lo)n(w)p 1913 1746 V 1119
1749 798 4 v 1916 1580 V 1916 1746 4 167 v 236 w(dedicated)g(mem3.high)
p 2710 1746 V 1916 1749 798 4 v 2713 1580 V 2713 1746
4 167 v 236 w(dedicated)g(mem3.lo)n(w)p 3507 1746 V 2713
1749 798 4 v 369 w FI(0x90)p 322 1752 V 322 1918 4 167
v 435 1860 a FF(dedicated)g(mem2.high)p 1116 1918 V 322
1921 798 4 v 1119 1752 V 1119 1918 4 167 v 236 w(dedicated)g(mem2.lo)n
(w)p 1913 1918 V 1119 1921 798 4 v 1916 1752 V 1916 1918
4 167 v 236 w(dedicated)g(mem1.high)p 2710 1918 V 1916
1921 798 4 v 2713 1752 V 2713 1918 4 167 v 236 w(dedicated)g(mem1.lo)n
(w)p 3507 1918 V 2713 1921 798 4 v 369 w FI(0x80)p 322
1924 V 322 2090 4 167 v 435 2031 a FF(dedicated)g(mem0.high)p
1116 2090 V 322 2093 798 4 v 1119 1924 V 1119 2090 4
167 v 236 w(dedicated)g(mem0.lo)n(w)p 1913 2090 V 1119
2093 798 4 v 1916 1924 V 1916 2090 4 167 v 251 w(reserv)o(ed)f
(mem1.high)p 2710 2090 V 1916 2093 798 4 v 2713 1924
V 2713 2090 4 167 v 266 w(reserv)o(ed)g(mem1.lo)n(w)p
3507 2090 V 2713 2093 798 4 v 384 w FI(0x70)p 322 2095
V 322 2261 4 167 v 450 2203 a FF(reserv)o(ed)g(mem0.high)p
1116 2261 V 322 2264 798 4 v 1119 2095 V 1119 2261 4
167 v 266 w(reserv)o(ed)g(mem0.lo)n(w)p 1913 2261 V 1119
2264 798 4 v 1916 2095 V 1916 2261 4 167 v 328 w(main)f(mem.high)p
2710 2261 V 1916 2264 798 4 v 2713 2095 V 2713 2261 4
167 v 391 w(main)f(mem.lo)n(w)p 3507 2261 V 2713 2264
798 4 v 446 w FI(0x60)p 322 2267 3189 4 v 322 2433 4
167 v 1889 2375 a FE(\030)p 3507 2433 V 322 2436 3189
4 v 1812 w FI(0x50)p 322 2439 V 322 2605 4 167 v 1889
2547 a FE(\030)p 3507 2605 V 322 2608 3189 4 v 1812 w
FI(0x40)p 322 2611 V 322 2777 4 167 v 1889 2719 a FE(\030)p
3507 2777 V 322 2780 3189 4 v 1812 w FI(0x30)p 322 2783
V 322 2949 4 167 v 1889 2891 a FE(\030)p 3507 2949 V
322 2952 3189 4 v 1812 w FI(0x20)p 322 2955 V 322 3121
4 167 v 1889 3063 a FE(\030)p 3507 3121 V 322 3124 3189
4 v 1812 w FI(0x10)p 322 3127 1196 4 v 322 3293 4 167
v 893 3234 a FE(\030)p 1515 3293 V 322 3296 1196 4 v
1518 3127 200 4 v 1518 3293 4 167 v 653 w FF(2)p 1714
3293 V 1518 3296 200 4 v 1717 3127 V 1717 3293 4 167
v 159 w Fp(L)p 1913 3293 V 1717 3296 200 4 v 1916 3127
798 4 v 1916 3293 4 167 v 300 w FF(v)o(ersion)i(w)o(ord)p
2710 3293 V 1916 3296 798 4 v 2713 3127 V 2713 3293 4
167 v 512 w(\223L4)p Fp(\026)p FF(K\224)p 3507 3293 V
2713 3296 798 4 v 534 w FI(0x00)913 3460 y(+0xC)708 b(+8)g(+4)g(+0)322
3694 y Fs(mem.low)1294 3693 y FI(Physical)19 b(address)h(of)g(\002rst)h
(byte)f(of)g(re)o(gion.)j(Must)e(be)f(page)f(aligned.)322
3872 y Fs(mem.high)1294 3867 y FI(Physical)30 b(address)h(of)f(\002rst)
i(byte)e(be)o(yond)f(the)i(re)o(gion.)55 b(Must)31 b(be)g(page)f
(aligned.)56 b(If)1294 3967 y Fs(mem.high)1640 3959 y
Fx(=)1711 3967 y FI(0,)20 b(the)h(re)o(gion)d(is)j(empty)-5
b(.)322 4142 y Fs(main)20 b(mem)1294 4141 y FI(Main)g(memory)e(re)o
(gion.)322 4320 y Fs(r)m(eserved)j(mem)1294 4300 y FI(This)g(re)o(gion)
e(must)i(not)g(be)g(used.)26 b(It)21 b(contains)g(k)o(ernel)f(code)g
(\(reserv)o(ed)f(mem0\))h(or)g(data)1294 4399 y(\(reserv)o(ed)e(mem1\))
h(grabbed)f(by)i(the)g(k)o(ernel)g(before)e Fy(\033)2899
4411 y Fx(0)2958 4399 y FI(w)o(as)j(initialized.)322
4577 y Fs(dedicated)e(mem)1294 4557 y FI(This)c(re)o(gion)f(contains)h
(dedicated)f(memory)f(which)i(cannot)f(be)i(used)f(as)h(standard)e
(mem-)1294 4656 y(ory)-5 b(.)24 b(F)o(or)19 b(e)o(xample,)g([640K,)g
(1M])g(is)i(a)g(popular)d(dedicated)h(memory)g(re)o(gion.)322
4834 y Fs(cloc)n(k)1294 4833 y FI(System)h(clock)g(in)g
Fy(\026)p FI(s.)322 5017 y Fs(pr)l(ocessor)h(fr)m(equency)1294
5016 y FI(Processor')-5 b(s)20 b(e)o(xternal)f(clock)g(rate)h(in)h
(MHz.)322 5200 y Fs(b)n(us)g(fr)m(equency)1294 5199 y
FI(Processor')-5 b(s)20 b(e)o(xternal)f(clock)g(rate)h(in)h(MHz.)p
eop
%%Page: 34 34
34 33 bop 156 -290 a FI(34)2750 b FB(CHAPTER)21 b(2.)46
b(L4/X86)156 -57 y FH(2.6)119 b(P)o(age-F)m(ault)30 b(and)h(Pr)n
(eemption)f(RPC)156 312 y Ft(P)o(age)25 b(F)n(ault)f(RPC)156
660 y Fz(k)o(er)o(nel)d(sends:)779 681 y FI(w0)f(\(EDX\))p
1227 573 1993 4 v 1227 739 4 167 v 819 w FF(f)o(ault)f(address)f(/)f(4)
2386 695 y Fr(\(30\))p 3216 739 V 1227 742 1993 4 v 3219
573 67 4 v 3219 739 4 167 v 3227 681 a Fp(w)p 3282 739
V 3219 742 67 4 v 3286 573 V 3286 739 4 167 v 14 w FE(\030)p
3349 739 V 3286 742 67 4 v 779 853 a FI(w1)j(\(EBX\))p
1227 745 2126 4 v 1227 911 4 167 v 803 w FF(f)o(aulting)g(user)o(-le)n
(v)o(el)f(EIP)2540 867 y Fr(\(32\))p 3349 911 V 1227
914 2126 4 v 779 1053 a Fy(w)855 1045 y Fx(=)919 1053
y Fu(0)266 b FI(Read)20 b(page)g(f)o(ault.)779 1152 y
Fy(w)855 1144 y Fx(=)919 1152 y Fu(1)266 b FI(Write)21
b(page)e(f)o(ault.)156 1331 y Fz(k)o(er)o(nel)i(r)o(ecei)o(v)o(es:)1128
1310 y FI(The)h(recei)n(v)o(e)f(fpage)g(co)o(v)o(ers)g(the)i(complete)e
(user)h(address)g(space.)32 b(The)22 b(k)o(ernel)f(accepts)1128
1410 y(mappings)g(or)i(grants)g(into)g(this)g(re)o(gion)f(as)i(well)f
(as)h(a)g(simple)f(2-w)o(ord)e(cop)o(y)h(message.)1128
1509 y(The)e(recei)n(v)o(ed)e(message)i(is)h(ignored!)p
911 1675 2092 4 v 909 1775 4 100 v 1060 1745 a(timeouts)p
1494 1775 V 199 w(PF)g(at)158 b(PF)21 b(at)g(ipc)f(in)236
b(PF)21 b(at)g(ipc)f(in)p 3000 1775 V 909 1875 V 1069
1845 a(used)f(for)p 1494 1875 V 224 w(user)206 b(recei)n(v)o(er')-5
b(s)319 b(sender')-5 b(s)p 3000 1875 V 909 1974 V 961
1944 a(pagef)o(ault)18 b(RPC)p 1494 1974 V 108 w(le)n(v)o(el)263
b(space)432 b(space)p 3000 1974 V 911 1978 2092 4 v 909
2077 4 100 v 1146 2047 a(snd)p 1494 2077 V 329 w Fv(1)145
b FI(sender')-5 b(s)19 b(snd)h(pf)99 b(recei)n(v)o(er')-5
b(s)19 b(rcv)h(pf)p 3000 2077 V 909 2177 V 1150 2147
a(rcv)p 1494 2177 V 334 w Fv(1)145 b FI(sender')-5 b(s)19
b(snd)h(pf)99 b(recei)n(v)o(er')-5 b(s)19 b(rcv)h(pf)p
3000 2177 V 909 2277 V 1101 2247 a(snd)g(pf)p 1494 2277
V 284 w Fv(1)145 b FI(sender')-5 b(s)19 b(snd)h(pf)99
b(recei)n(v)o(er')-5 b(s)19 b(rcv)h(pf)p 3000 2277 V
909 2376 V 1105 2346 a(rcv)g(pf)p 1494 2376 V 289 w Fv(1)145
b FI(sender')-5 b(s)19 b(snd)h(pf)99 b(recei)n(v)o(er')-5
b(s)19 b(rcv)h(pf)p 3000 2376 V 911 2380 2092 4 v 156
2910 a Ft(Pr)n(eemption)27 b(RPC)156 3258 y Fz(k)o(er)o(nel)21
b(sends:)779 3279 y FI(w0)f(\(EDX\))p 1227 3171 2126
4 v 1227 3337 4 167 v 902 w FF(user)o(-le)n(v)o(el)g(ESP)2436
3293 y Fr(\(32\))p 3349 3337 V 1227 3340 2126 4 v 779
3452 a FI(w1)g(\(EBX\))p 1227 3344 V 1227 3510 4 167
v 915 w FF(user)o(-le)n(v)o(el)f(EIP)2428 3466 y Fr(\(32\))p
3349 3510 V 1227 3513 2126 4 v 156 3729 a Fz(k)o(er)o(nel)i(r)o(ecei)o
(v)o(es:)1128 3728 y FI(The)f(k)o(ernel)f(accepts)h(only)f(a)i(simple)f
(2-w)o(ord)f(reply)-5 b(.)24 b(Its)c(content)g(is)h(ignored!)p
1537 3895 839 4 v 1535 3995 4 100 v 1722 3965 a(timeouts)p
2191 3995 V 2374 3995 V 1535 4094 V 1730 4064 a(used)f(for)p
2191 4094 V 2374 4094 V 1535 4194 V 1587 4164 a(preemption)e(RPC)p
2191 4194 V 2374 4194 V 1537 4197 839 4 v 1535 4297 4
100 v 1807 4267 a(snd)p 2191 4297 V 320 w Fv(1)p 2374
4297 V 1535 4396 V 1812 4367 a FI(rcv)p 2191 4396 V 324
w Fv(1)p 2374 4396 V 1535 4496 V 1762 4466 a FI(snd)j(pf)p
2191 4496 V 274 w Fv(1)p 2374 4496 V 1535 4596 V 1767
4566 a FI(rcv)f(pf)p 2191 4596 V 279 w Fv(1)p 2374 4596
V 1537 4599 839 4 v eop
%%Page: 35 35
35 34 bop 322 -290 a FB(2.7.)45 b Fy(\033)540 -278 y
Fx(0)599 -290 y FB(RPC)22 b(PR)m(O)m(T)o(OCOL)2631 b
FI(35)322 -57 y FH(2.7)119 b Fb(\033)658 -39 y Fu(0)734
-57 y FH(RPC)30 b(pr)n(otocol)322 147 y Fy(\033)369 159
y Fx(0)435 147 y FI(is)f(the)f(initial)g(address)f(space.)48
b(Although)26 b(it)i(is)h Fs(not)e FI(part)g(of)h(the)g(k)o(ernel,)g
(its)h(basic)f(protocol)e(is)i(de\002ned)f(with)h(the)322
247 y(Nucleus.)d(Special)20 b Fy(\033)953 259 y Fx(0)1012
247 y FI(implementations)e(may)i(e)o(xtend)e(this)j(protocol.)447
356 y(The)27 b(address)f(space)h Fy(\033)1139 368 y Fx(0)1204
356 y FI(is)h(idempotent,)f(i.e.)45 b(all)28 b(virtual)e(addresses)h
(in)g(this)g(address)g(space)g(are)f(identical)h(to)g(the)322
456 y(corresponding)19 b(physical)h(address.)28 b(Note)22
b(that)g(pages)f(requested)f(from)g Fy(sig)s(ma)2710
468 y Fx(0)2769 456 y FI(continue)g(to)h(be)h(mapped)e(idempotent)322
555 y(if)h(the)f(recei)n(v)o(er)f(speci\002es)i(its)g(complete)e
(address)h(space)g(as)h(recei)n(v)o(e)e(fpage.)447 665
y Fy(\033)494 677 y Fx(0)555 665 y FI(gi)n(v)o(es)k(pages)f(to)h(the)g
(k)o(ernel)g(and)f(to)h(arbitrary)f(tasks,)i(b)n(ut)f(only)f(once.)32
b(The)23 b(idea)g(is)h(that)f(all)g(pagers)g(request)f(the)322
764 y(memory)e(the)o(y)h(need)g(in)g(the)h(startup)f(phase)g(of)g(the)h
(system)f(so)h(that)g(afterw)o(ards)e Fy(\033)2761 776
y Fx(0)2821 764 y FI(has)i(spent)f(all)h(its)g(memory)-5
b(.)27 b(Further)322 864 y(requests)20 b(will)h(then)f(automatically)f
(denied.)322 1155 y Ft(K)n(er)o(nel)25 b(Communication)322
1422 y Fy(\033)369 1434 y Fx(0)428 1422 y Fz(r)o(ecei)o(v)o(es)20
b(fr)o(om)f(a)h Fa(k)n(ernel)g Fz(thr)o(ead:)945 1641
y FI(w0)g(\(EDX\))p 1393 1533 1993 4 v 1393 1699 4 167
v 857 w FF(FFFFFFFF/4)2514 1655 y Fr(\(30\))p 3382 1699
V 1393 1702 1993 4 v 3385 1533 67 4 v 3385 1699 4 167
v 3402 1641 a FF(0)p 3448 1699 V 3385 1702 67 4 v 3452
1533 V 3452 1699 4 167 v 33 w(0)p 3515 1699 V 3452 1702
67 4 v 945 1814 a FI(w1)g(\(EBX\))p 1393 1706 2126 4
v 1393 1872 4 167 v 1074 w FE(\030)2435 1828 y Fr(\(32\))p
3515 1872 V 1393 1875 2126 4 v 322 2101 a Fs(Intended)f(Action:)1294
2081 y FI(F)o(or)g(reply)-5 b(,)19 b Fy(\033)1682 2093
y Fx(0)1739 2081 y FI(should)g Fs(gr)o(ant)g FI(a)h(page)f(\(4K\))g(to)
h(the)g(k)o(ernel)f(thread.)24 b(The)19 b(page)g(might)g(be)1294
2180 y(located)i(at)i(an)f(arbitrary)e(position)h(b)n(ut)h(must)g
(contain)f(ordinary)f(memory)-5 b(.)28 b(If)22 b(no)g(more)1294
2280 y(memory)c(is)j(a)n(v)n(ailable,)f Fy(\033)2052
2292 y Fx(0)2110 2280 y FI(should)f(reply)h(a)g(0-w)o(ord)f(instead)h
(of)g(a)h(page.)322 2469 y Fy(\033)369 2481 y Fx(0)428
2469 y Fz(r)o(ecei)o(v)o(es)f(fr)o(om)f(a)h Fa(k)n(ernel)g
Fz(thr)o(ead:)945 2688 y FI(w0)g(\(EDX\))p 1393 2580
2059 4 v 1393 2746 4 167 v 1047 w FF(0)2391 2702 y Fr(\(31\))p
3448 2746 V 1393 2749 2059 4 v 3452 2580 67 4 v 3452
2746 4 167 v 3468 2688 a FF(1)p 3515 2746 V 3452 2749
67 4 v 945 2861 a FI(w1)g(\(EBX\))p 1393 2753 1595 4
v 1393 2919 4 167 v 809 w FE(\030)2169 2875 y Fr(\(24\))p
2984 2919 V 1393 2922 1595 4 v 2987 2753 532 4 v 2987
2919 4 167 v 3186 2861 a FF(0)3236 2875 y Fr(\(8\))p
3515 2919 V 2987 2922 532 4 v 322 3148 a Fs(Intended)f(r)m(eply:)945
3185 y FI(w0)h(\(EDX\))p 1393 3077 2126 4 v 1393 3243
4 167 v 1077 w Fp(k)2427 3199 y Fr(\(32\))p 3515 3243
V 1393 3246 2126 4 v 945 3358 a FI(w1)g(\(EBX\))p 1393
3250 V 1393 3416 4 167 v 1074 w FE(\030)2435 3372 y Fr(\(32\))p
3515 3416 V 1393 3419 2126 4 v 1393 3557 a Fy(k)29 b
FI(is)d(the)g(number)d(of)j(pages)f(recommended)d(by)j
Fy(\033)2916 3569 y Fx(0)2980 3557 y FI(for)g(k)o(ernel)g(use)h
(\(pagetables)e(and)1393 3657 y(other)19 b(k)o(ernel-internal)f
(data\).)322 3980 y Ft(General)25 b(Memory)g(Mapping)322
4265 y Fy(\033)369 4277 y Fx(0)428 4265 y Fz(r)o(ecei)o(v)o(es)20
b(fr)o(om)f(a)h Fa(non-k)n(ernel)g Fz(thr)o(ead:)945
4484 y FI(w0)g(\(EDX\))p 1393 4376 1993 4 v 1393 4542
4 167 v 857 w FF(FFFFFFFF/4)2514 4498 y Fr(\(30\))p 3382
4542 V 1393 4545 1993 4 v 3385 4376 67 4 v 3385 4542
4 167 v 3402 4484 a FF(0)p 3448 4542 V 3385 4545 67 4
v 3452 4376 V 3452 4542 4 167 v 33 w(0)p 3515 4542 V
3452 4545 67 4 v 945 4657 a FI(w1)g(\(EBX\))p 1393 4549
2126 4 v 1393 4715 4 167 v 1074 w FE(\030)2435 4671 y
Fr(\(32\))p 3515 4715 V 1393 4718 2126 4 v 322 4944 a
Fs(Intended)f(Action:)1294 4924 y FI(F)o(or)e(reply)-5
b(,)17 b Fy(\033)1678 4936 y Fx(0)1735 4924 y FI(should)f
Fs(map)i FI(a)g(page)g(\(4K\))f(writable)g(to)h(the)g(requester)-5
b(.)24 b(The)18 b(page)f(might)1294 5023 y(be)28 b(located)g(at)h(an)g
(arbitrary)e(position)h(b)n(ut)g(must)h(contain)f(ordinary)e(memory)-5
b(.)48 b(If)29 b(no)1294 5123 y(more)19 b(free)h(page)f(is)j(a)n(v)n
(ailable,)d Fy(\033)2273 5135 y Fx(0)2331 5123 y FI(should)h(reply)f(a)
i(0-w)o(ord)d(instead)i(of)g(a)h(page.)1294 5223 y(The)h(mapped)e(page)
h(must)i(be)f(mark)o(ed)e(and)i(must)g(not)g(further)e(be)i(mapped)f
(or)h(granted)1294 5322 y(by)17 b Fy(\033)1442 5334 y
Fx(0)1497 5322 y FI(to)h(another)e(task.)24 b(Ho)n(we)n(v)o(er)m(,)16
b(multiple)g(mapping)g(to)h(the)g(same)h(requester)e(should)1294
5422 y(be)k(supported.)p eop
%%Page: 36 36
36 35 bop 156 -290 a FI(36)2750 b FB(CHAPTER)21 b(2.)46
b(L4/X86)156 -82 y Fy(\033)203 -70 y Fx(0)262 -82 y Fz(r)o(ecei)o(v)o
(es)20 b(fr)o(om)f(any)h(thr)o(ead:)779 137 y FI(w0)g(\(EDX\))p
1227 29 1993 4 v 1227 195 4 167 v 731 w FF(address)2075
129 y Fm(\024)2140 137 y FF(40000000/4)2474 151 y Fr(\(30\))p
3216 195 V 1227 198 1993 4 v 3219 29 67 4 v 3219 195
4 167 v 3236 137 a FF(0)p 3282 195 V 3219 198 67 4 v
3286 29 V 3286 195 4 167 v 33 w(0)p 3349 195 V 3286 198
67 4 v 779 309 a FI(w1)g(\(EBX\))p 1227 201 2126 4 v
1227 368 4 167 v 1074 w FE(\030)2269 323 y Fr(\(32\))p
3349 368 V 1227 371 2126 4 v 156 587 a Fs(Intended)f(Action:)1128
567 y FI(F)o(or)e(reply)-5 b(,)17 b Fy(\033)1512 579
y Fx(0)1567 567 y FI(should)g Fs(map)g FI(the)h(speci\002ed)f(physical)
g(page)f(frame)h(\(4K\))g(writable)g(to)h(the)1128 666
y(requester)-5 b(.)33 b(If)23 b(the)h(page)e(is)j(already)d(mapped)g
(or)h(is)h(not)f(a)n(v)n(ailable,)g Fy(\033)3193 678
y Fx(0)3255 666 y FI(should)f(reply)h(a)1128 766 y(0-w)o(ord)18
b(instead)i(of)g(a)h(page.)1128 866 y(The)g(mapped)g(page)g(must)h(be)g
(mark)o(ed)f(and)h(must)g(not)g(further)e(be)i(mapped)f(or)h(granted)
1128 965 y(by)17 b Fy(\033)1276 977 y Fx(0)1331 965 y
FI(to)h(another)e(task.)24 b(Ho)n(we)n(v)o(er)m(,)16
b(multiple)g(mapping)g(to)h(the)g(same)h(requester)e(should)1128
1065 y(be)k(supported.)156 1243 y Fy(\033)203 1255 y
Fx(0)262 1243 y Fz(r)o(ecei)o(v)o(es)g(fr)o(om)f(any)h(thr)o(ead:)779
1462 y FI(w0)g(\(EDX\))p 1227 1354 1993 4 v 1227 1521
4 167 v 607 w FF(40000000/4)2069 1454 y Fk(<)2134 1462
y Fp(a)2188 1454 y Fm(\024)2253 1462 y FF(C0000000/4)2598
1476 y Fr(\(30\))p 3216 1521 V 1227 1524 1993 4 v 3219
1354 67 4 v 3219 1521 4 167 v 3236 1462 a FF(0)p 3282
1521 V 3219 1524 67 4 v 3286 1354 V 3286 1521 4 167 v
33 w(0)p 3349 1521 V 3286 1524 67 4 v 779 1635 a FI(w1)g(\(EBX\))p
1227 1527 2126 4 v 1227 1693 4 167 v 1074 w FE(\030)2269
1649 y Fr(\(32\))p 3349 1693 V 1227 1696 2126 4 v 156
1913 a Fs(Intended)f(Action:)1128 1892 y FI(F)o(or)c(reply)-5
b(,)16 b Fy(\033)1509 1904 y Fx(0)1563 1892 y FI(should)f
Fs(map)g FI(the)h(physical)f(4M)h(superpage)e(with)i(address)g
Fy(a)s Fv(\000)s Fu(40000000)1128 1992 y FI(writable)22
b(to)h(the)g(requester)-5 b(.)32 b(If)22 b(the)h(page)f(is)i(already)d
(mapped)h(or)g(is)i(not)e(a)n(v)n(ailable,)h Fy(\033)3694
2004 y Fx(0)1128 2092 y FI(should)c(reply)g(a)i(0-w)o(ord)e(instead)h
(of)f(a)i(page.)1128 2191 y(The)29 b(mapped)f(superpage)g(must)i(be)g
(mark)o(ed)e(and)h(must)h(not)f(further)g(be)g(mapped)f(or)1128
2291 y(granted)h(by)i Fy(\033)1570 2303 y Fx(0)1639 2291
y FI(to)g(another)e(task.)58 b(Ho)n(we)n(v)o(er)m(,)31
b(multiple)f(mapping)f(to)i(the)g(same)g(re-)1128 2391
y(quester)19 b(should)g(be)i(supported.)156 2569 y Fy(\033)203
2581 y Fx(0)262 2569 y Fz(r)o(ecei)o(v)o(es)f(fr)o(om)f(any)h(thr)o
(ead:)779 2788 y FI(w0)g(\(EDX\))p 1227 2680 2059 4 v
1227 2846 4 167 v 1047 w FF(0)2225 2802 y Fr(\(31\))p
3282 2846 V 1227 2849 2059 4 v 3286 2680 67 4 v 3286
2846 4 167 v 3302 2788 a FF(1)p 3349 2846 V 3286 2849
67 4 v 779 2961 a FI(w1)g(\(EBX\))p 1227 2853 1595 4
v 1227 3019 4 167 v 809 w FE(\030)2003 2975 y Fr(\(24\))p
2817 3019 V 1227 3022 1595 4 v 2821 2853 532 4 v 2821
3019 4 167 v 3020 2961 a FF(1)3070 2975 y Fr(\(8\))p
3349 3019 V 2821 3022 532 4 v 156 3238 a Fs(Intended)f(Action:)1128
3218 y FI(F)o(or)h(reply)-5 b(,)18 b Fy(\033)1516 3230
y Fx(0)1575 3218 y FI(should)h Fs(map)h(r)m(ead)g(only)f
FI(the)h(k)o(ernel)g(info)f(page)h(to)g(the)g(requester)-5
b(.)1128 3318 y(This)20 b(page)g(can)g(be)g(mapped)e(multiply)-5
b(.)p eop
%%Page: 37 37
37 36 bop 322 -290 a FB(2.8.)45 b(ST)-8 b(AR)j(TING)21
b(L4)2834 b FI(37)322 -57 y FH(2.8)119 b(Starting)31
b(L4)322 208 y FI(F)o(or)20 b(booting)f(L4,)g(see)i(appendix)d(A.)447
349 y(After)24 b(booting,)g(L4)h(enters)f(protected)f(mode)h(if)h
(started)g(in)g(real)f(mode,)h(enables)f(paging)f(and)i(initializes)g
(itself.)39 b(It)322 449 y(generates)19 b(the)h(basic)g(address)g
(space-serv)o(ers)e Fy(\033)1752 461 y Fx(0)1810 449
y FI(and)i(a)g(task)g Fs(r)l(oot)h(server)g FI(which)e(is)i(intended)d
(to)i(boot)f(the)h(higher)n(-le)n(v)o(el)322 548 y(system.)447
689 y Fy(\033)494 701 y Fx(0)555 689 y FI(and)i(the)g
Fs(r)l(oot)h(server)g FI(are)f(user)n(-le)n(v)o(el)g(tasks)h(and)f(not)
g(part)g(of)g(the)g(pure)g(Nucleus.)31 b(The)22 b(prede\002ned)f(ones)h
(can)g(be)322 789 y(replaced)g(by)h(modifying)e(the)i(follo)n(wing)e
(table)i(in)h(the)f(L4)g(image)f(before)g(starting)h(L4.)33
b(The)23 b(k)o(ernel)f(deb)n(ugger)f Fs(kdeb)n(ug)322
889 y FI(is)h(also)e(not)g(part)g(of)g(the)g(Nucleus)g(and)f(can)h
(accordingly)e(be)i(replaced)f(by)h(modifying)e(the)i(table.)p
322 1126 798 4 v 322 1292 4 167 v 435 1234 a FF(dedicated)g(mem4.high)p
1116 1292 V 322 1295 798 4 v 1119 1126 V 1119 1292 4
167 v 236 w(dedicated)g(mem4.lo)n(w)p 1913 1292 V 1119
1295 798 4 v 1916 1126 V 1916 1292 4 167 v 236 w(dedicated)g(mem3.high)
p 2710 1292 V 1916 1295 798 4 v 2713 1126 V 2713 1292
4 167 v 236 w(dedicated)g(mem3.lo)n(w)p 3507 1292 V 2713
1295 798 4 v 286 w FI(0x1090)p 322 1298 V 322 1464 4
167 v 435 1406 a FF(dedicated)g(mem2.high)p 1116 1464
V 322 1467 798 4 v 1119 1298 V 1119 1464 4 167 v 236
w(dedicated)g(mem2.lo)n(w)p 1913 1464 V 1119 1467 798
4 v 1916 1298 V 1916 1464 4 167 v 236 w(dedicated)g(mem1.high)p
2710 1464 V 1916 1467 798 4 v 2713 1298 V 2713 1464 4
167 v 236 w(dedicated)g(mem1.lo)n(w)p 3507 1464 V 2713
1467 798 4 v 286 w FI(0x1080)p 322 1469 3189 4 v 322
1636 4 167 v 1889 1577 a FE(\030)p 3507 1636 V 322 1639
3189 4 v 1729 w FI(0x1070)p 322 1641 V 322 1807 4 167
v 1889 1749 a FE(\030)p 3507 1807 V 322 1810 3189 4 v
1729 w FI(0x1060)p 322 1813 798 4 v 322 1979 4 167 v
457 1921 a FF(kdeb)o(ug)e(permissions)p 1116 1979 V 322
1982 798 4 v 1119 1813 V 1119 1979 4 167 v 251 w(kdeb)o(ug)g
(con\002guration)p 1913 1979 V 1119 1982 798 4 v 1916
1813 V 1916 1979 4 167 v 491 w FE(\030)p 2710 1979 V
1916 1982 798 4 v 2713 1813 V 2713 1979 4 167 v 547 w
FF(L4)e(con\002guration)p 3507 1979 V 2713 1982 798 4
v 342 w FI(0x1050)p 322 1985 V 322 2151 4 167 v 484 2093
a Fl(r)m(oot)i(server)f FF(end+1)p 1116 2151 V 322 2154
798 4 v 1119 1985 V 1119 2151 4 167 v 335 w Fl(r)m(oot)h(server)f
FF(be)o(gin)p 1913 2151 V 1119 2154 798 4 v 1916 1985
V 1916 2151 4 167 v 303 w Fl(r)m(oot)h(server)f FF(start)h(EIP)p
2710 2151 V 1916 2154 798 4 v 2713 1985 V 2713 2151 4
167 v 252 w Fl(r)m(oot)f(server)h FF(start)g(ESP)p 3507
2151 V 2713 2154 798 4 v 284 w FI(0x1040)p 322 2157 V
322 2323 4 167 v 592 2265 a Fp(\033)632 2274 y Fr(1)683
2265 y FF(end+1)p 1116 2323 V 322 2326 798 4 v 1119 2157
V 1119 2323 4 167 v 551 w Fp(\033)1439 2274 y Fr(1)1490
2265 y FF(be)o(gin)p 1913 2323 V 1119 2326 798 4 v 1916
2157 V 1916 2323 4 167 v 519 w Fp(\033)2194 2274 y Fr(1)2245
2265 y FF(start)g(EIP)p 2710 2323 V 1916 2326 798 4 v
2713 2157 V 2713 2323 4 167 v 468 w Fp(\033)2984 2274
y Fr(1)3035 2265 y FF(start)g(ESP)p 3507 2323 V 2713
2326 798 4 v 392 w FI(0x1030)p 322 2329 V 322 2495 4
167 v 592 2437 a Fp(\033)632 2446 y Fr(0)683 2437 y FF(end+1)p
1116 2495 V 322 2498 798 4 v 1119 2329 V 1119 2495 4
167 v 551 w Fp(\033)1439 2446 y Fr(0)1490 2437 y FF(be)o(gin)p
1913 2495 V 1119 2498 798 4 v 1916 2329 V 1916 2495 4
167 v 519 w Fp(\033)2194 2446 y Fr(0)2245 2437 y FF(start)g(EIP)p
2710 2495 V 1916 2498 798 4 v 2713 2329 V 2713 2495 4
167 v 468 w Fp(\033)2984 2446 y Fr(0)3035 2437 y FF(start)g(ESP)p
3507 2495 V 2713 2498 798 4 v 392 w FI(0x1020)p 322 2501
V 322 2667 4 167 v 534 2609 a Fl(kdeb)o(ug)g FF(end+1)p
1116 2667 V 322 2670 798 4 v 1119 2501 V 1119 2667 4
167 v 435 w Fl(kdeb)o(ug)g FF(be)o(gin)p 1913 2667 V
1119 2670 798 4 v 1916 2501 V 1916 2667 4 167 v 390 w
Fl(kdeb)o(ug)g FF(e)o(xception)p 2710 2667 V 1916 2670
798 4 v 2713 2501 V 2713 2667 4 167 v 420 w Fl(kdeb)o(ug)g
FF(init)p 3507 2667 V 2713 2670 798 4 v 415 w FI(0x1010)913
2835 y(+0xC)708 b(+8)g(+4)g(+0)322 3075 y(0x1010)20 b(.)12
b(.)g(.)g(are)23 b(of)n(fsets)g(relati)n(v)o(e)e(to)i(the)f(load)g
(address.)31 b(The)22 b(EIP)g(and)g(ESP)h(v)n(alues)f(ho)n(we)n(v)o(er)
m(,)e(are)j(absolute)e(32-bit)g(ad-)322 3175 y(dresses.)k(The)17
b(appropriate)f(code)h(must)h(be)g(loaded)f(at)h(these)g(addresses)f
(before)g(L4)h(is)g(started.)24 b(Note)18 b(that)g(the)g(prede\002ned)
322 3275 y(root)i(serv)o(er)f(currently)g(e)o(x)o(ecutes)g(only)g(a)i
(brief)e(k)o(ernel)h(test.)322 3450 y Fs(mem.low)1294
3449 y FI(Physical)f(address)h(of)g(\002rst)h(byte)f(of)g(re)o(gion.)j
(Must)e(be)f(page)f(aligned.)322 3669 y Fs(mem.high)1294
3665 y FI(Physical)30 b(address)h(of)f(\002rst)i(byte)e(be)o(yond)f
(the)i(re)o(gion.)55 b(Must)31 b(be)g(page)f(aligned.)56
b(If)1294 3764 y Fs(mem.high)1640 3756 y Fx(=)1711 3764
y FI(0,)20 b(the)h(re)o(gion)d(is)j(empty)-5 b(.)322
3984 y Fs(dedicated)19 b(mem)1294 3963 y FI(This)c(re)o(gion)f
(contains)h(dedicated)f(memory)f(which)i(cannot)f(be)i(used)f(as)h
(standard)e(mem-)1294 4063 y(ory)-5 b(.)24 b(F)o(or)19
b(e)o(xample,)g([640K,)g(1M])g(is)i(a)g(popular)d(dedicated)h(memory)g
(re)o(gion.)322 4282 y Fs(be)m(gin)1294 4281 y FI(Physical)g(address)h
(of)g(the)g(\002rst)h(byte)f(of)g(a)h(serv)o(er')-5 b(s)19
b(code+data)g(area.)322 4507 y Fs(end)1294 4506 y FI(Physical)g
(address)h(of)g(the)g(last)h(byte)f(of)g(a)h(serv)o(er')-5
b(s)19 b(code+data)g(area.)322 4730 y Fs(start)i(EIP)1294
4729 y FI(Physical)e(address)h(of)g(a)h(serv)o(er')-5
b(s)19 b(initial)i(instruction)e(pointer)g(\(start\).)322
4955 y Fs(start)i(ESP)1294 4954 y FI(Physical)e(address)h(of)g(a)h
(serv)o(er')-5 b(s)19 b(initial)i(stack)f(pointer)f(\(stack)h
(bottom\).)322 5179 y Fs(kdeb)n(ug)f(init)1294 5178 y
FI(Physical)g(address)h(of)g Fs(kdeb)n(ug)p FI(')-5 b(s)19
b(initialization)h(routine.)322 5403 y Fs(kdeb)n(ug)f(e)n(xception)1294
5402 y FI(Physical)g(address)h(of)g Fs(kdeb)n(ug)p FI(')-5
b(s)19 b(deb)n(ug-e)o(xception)e(handler)-5 b(.)p eop
%%Page: 38 38
38 37 bop 156 -290 a FI(38)2750 b FB(CHAPTER)21 b(2.)46
b(L4/X86)156 -83 y Fs(L4)21 b(con\002gur)o(ation)p 1128
-154 1063 4 v 1128 12 4 167 v 1567 -46 a FE(\030)1638
-32 y Fr(\(16\))p 2187 12 V 1128 15 1063 4 v 2190 -154
532 4 v 2190 12 4 167 v 2312 -46 a FF(pnodes)2517 -32
y Fr(\(8\))p 2718 12 V 2190 15 532 4 v 2722 -154 V 2722
12 4 167 v 2868 -46 a FF(ptabs)3025 -32 y Fr(\(8\))p
3250 12 V 2722 15 532 4 v 779 120 a FI(ptabs)173 b(number)29
b(of)h(ptabs)h(\(4K)g(each\))f(per)g(4M)h(of)f(physical)g(memory)f
(which)i(the)f(Nucleus)1128 220 y(should)25 b(allocate)g(for)h(page)f
(tables.)42 b(0)26 b(indicates)g(to)g(use)g(the)g(def)o(ault)f(v)n
(alue.)41 b(A)27 b(v)n(alue)1128 320 y(of)22 b(128,)f(for)h(e)o
(xample,)f(speci\002es)h(that)g(1/8)g(of)g(memory)e(should)i(be)g
(reserv)o(ed)e(for)i(page)1128 419 y(tables.)779 519
y(pnodes)112 b(number)18 b(of)i(pnode)e(entries)i(\(16)g(bytes)g
(each\))f(the)h(Nucleus)g(should)f(allocate)h(per)f(phys-)1128
618 y(ical)h(frame.)k(A)d(v)n(alue)f(of)g(0)g(indicates)g(to)g(use)h
(the)f(def)o(ault)f(v)n(alue.)156 796 y Fs(kdeb)n(ug)g(con\002gur)o
(ation)p 1128 726 798 4 v 1128 892 4 167 v 1408 834 a
FF(port)1532 848 y Fr(\(12\))p 1921 892 V 1128 895 798
4 v 1925 726 266 4 v 1925 892 4 167 v 1958 834 a FF(rate)2074
848 y Fr(\(4\))p 2187 892 V 1925 895 266 4 v 2190 726
465 4 v 2190 892 4 167 v 2346 834 a FE(\030)2417 848
y Fr(\(7\))p 2652 892 V 2190 895 465 4 v 2655 726 67
4 v 2655 892 4 167 v 2672 834 a Fp(s)p 2718 892 V 2655
895 67 4 v 2722 726 532 4 v 2722 892 4 167 v 157 w FF(pages)3030
848 y Fr(\(8\))p 3250 892 V 2722 895 532 4 v 779 1000
a FI(pages)159 b(The)28 b(number)f(of)h(4K)h(pages)g(that)f(kdeb)n(ug)f
(should)h(allocate)h(for)f(its)h(trace)g(b)n(uf)n(fer)-5
b(.)50 b(A)1128 1099 y(v)n(alue)19 b(of)h(0)g(indicates)g(no)g(trace)g
(b)n(uf)n(fer)-5 b(.)779 1199 y Fy(s)832 1191 y Fx(=)897
1199 y Fu(1)189 b FI(The)20 b(Nucleus)f(enters)h(kdeb)n(ug)f(before)g
(starting)h(the)g(root)f(serv)o(er)-5 b(.)779 1298 y(port)214
b(Initially)-5 b(,)21 b(kdeb)n(ug)f(should)h(use)h(the)g(serial)h(line)
f(base)g(IO)g(address)g Fs(port)g FI(for)f(output)g(and)1128
1398 y(input.)i(A)c(port)e(address)h(of)f(0)i(indicates)e(to)i(use)f
(the)g(inte)o(grated)e(console)i(\(k)o(e)o(yboard)d(and)1128
1498 y(display\))k(instead)h(of)g(a)g(serial)h(line.)779
1597 y(rate)224 b(determines)37 b(the)h(def)o(ault)f(baud)h(rate)g(for)
f(kdeb)n(ug)g(when)g(using)h(a)h(serial)f(line.)79 b(If)1128
1697 y Fy(por)r(t)1293 1689 y Fn(6)p Fx(=)1358 1697 y
Fu(0)p FI(,)20 b(this)h(is)g(also)g(the)f(initial)g(baud)f(rate.)25
b(Possible)c(v)n(alues:)922 1789 y Fx(=)987 1797 y Fu(1)99
b FI(115.2)18 b(Kbd)922 1888 y Fx(=)987 1896 y Fu(2)133
b FI(57.6)19 b(Kbd)922 1988 y Fx(=)987 1996 y Fu(3)133
b FI(38.4)19 b(Kbd)922 2087 y Fx(=)987 2095 y Fu(6)133
b FI(19.2)19 b(Kbd)880 2187 y Fx(=)945 2195 y Fu(12)161
b FI(9.6)20 b(Kbd)156 2373 y Fs(kdeb)n(ug)f(permissions)p
1128 2302 1196 4 v 1128 2468 4 167 v 1633 2410 a FE(\030)1705
2424 y Fr(\(18\))p 2320 2468 V 1128 2471 1196 4 v 2323
2302 67 4 v 2323 2468 4 167 v 2339 2410 a Fp(p)p 2386
2468 V 2323 2471 67 4 v 2390 2302 V 2390 2468 4 167 v
36 w(i)p 2453 2468 V 2390 2471 67 4 v 2456 2302 V 2456
2468 4 167 v 29 w(w)p 2519 2468 V 2456 2471 67 4 v 2523
2302 V 2523 2468 4 167 v 23 w(d)p 2586 2468 V 2523 2471
67 4 v 2589 2302 V 2589 2468 4 167 v 31 w(r)p 2652 2468
V 2589 2471 67 4 v 2655 2302 V 2655 2468 4 167 v 21 w(m)p
2718 2468 V 2655 2471 67 4 v 2722 2302 532 4 v 2722 2468
4 167 v 199 w(k)2974 2424 y Fr(\(8\))p 3250 2468 V 2722
2471 532 4 v 779 2576 a Fy(k)839 2568 y Fx(=)904 2576
y Fu(0)182 b FI(An)o(y)19 b(task)i(can)f(use)g(kdeb)n(ug)f(from)g(user)
n(-le)n(v)o(el.)779 2676 y Fy(k)839 2668 y Fq(>)904 2676
y Fu(0)182 b FI(Only)23 b(tasks)g(1)h(to)f Fy(k)k FI(can)c(use)g(kdeb)n
(ug)f(from)g(user)n(-le)n(v)o(el.)33 b(Threads)22 b(of)h(other)f(tasks)
i(will)1128 2775 y(be)c(shut)g(do)n(wn)f(when)h(in)m(v)n(oking)e(kdeb)n
(ug.)779 2875 y Fy(m)866 2867 y Fx(=)931 2875 y Fu(1)155
b FI(Kdeb)n(ug)19 b(may)g(display)h(mapping.)779 2975
y Fy(r)833 2967 y Fx(=)897 2975 y Fu(1)189 b FI(Kdeb)n(ug)19
b(may)g(display)h(user)g(re)o(gisters.)779 3074 y Fy(d)836
3066 y Fx(=)901 3074 y Fu(1)185 b FI(Kdeb)n(ug)19 b(may)g(display)h
(user)g(memory)-5 b(.)779 3174 y Fy(w)855 3166 y Fx(=)919
3174 y Fu(1)167 b FI(Kdeb)n(ug)19 b(may)g(modify)g(memory)-5
b(,)18 b(re)o(gister)m(,)h(mappings)f(and)i(tcbs.)779
3274 y Fy(i)822 3266 y Fx(=)886 3274 y Fu(1)200 b FI(Kdeb)n(ug)19
b(may)g(read)h(from)f(and)h(write)g(to)h(IO)f(ports.)779
3373 y Fy(p)835 3365 y Fx(=)899 3373 y Fu(1)187 b FI(Kdeb)n(ug)19
b(may)g(protocol)g(page)g(f)o(aults)i(and)e(IPC.)p eop
%%Page: 39 39
39 38 bop 322 566 a Fw(A)l(ppendix)43 b(A)322 981 y FA(Booting)322
1463 y FH(PC-compatible)31 b(Machines)322 1648 y FI(L4)18
b(can)g(be)g(loaded)f(at)i(an)o(y)e(16-byte-aligned)d(location)j(be)o
(yond)f(0x1000)g(in)i(physical)f(memory)-5 b(.)22 b(It)c(can)g(be)g
(started)g(in)g(real)322 1748 y(mode)e(or)h(in)g(32-bit)f(protected)f
(mode)h(at)h(address)g(0x100)e(or)i(0x1000)d(relati)n(v)o(e)i(to)h(its)
h(load)e(address.)24 b(The)16 b(protected-mode)322 1847
y(conditions)j(are)h(compliant)f(to)h(the)h(Multiboot)e(Standard)f(V)-9
b(ersion)20 b(0.6.)p 828 1960 2590 4 v 826 2055 4 95
v 1869 2026 a FF(Start)e(Preconditions)p 3416 2055 V
828 2058 2590 4 v 826 2153 4 95 v 1729 2153 V 2017 2124
a(Real)h(Mode)p 2595 2153 V 398 w(32-bit)g(Protected)g(Mode)p
3416 2153 V 828 2156 2590 4 v 826 2251 4 95 v 1100 2222
a(load)f(base)g(\()p Fp(L)p FF(\))p 1729 2251 V 322 w
Fp(L)1840 2214 y Fm(\025)1900 2222 y FF(0x1000,)f(16-byte)i(aligned)p
2595 2251 V 303 w Fp(L)2908 2214 y Fm(\025)2967 2222
y FF(0x1000)p 3416 2251 V 826 2345 V 1077 2317 a(load)f(of)n(fset)g(\()
p Fp(X)5 b FF(\))p 1729 2345 V 323 w Fp(X)1879 2309 y
Fr(=)1937 2317 y FF(0x100)18 b(or)f Fp(X)2266 2309 y
Fr(=)2325 2317 y FF(0x1000)p 2595 2345 V 124 w Fp(X)2722
2309 y Fr(=)2780 2317 y FF(0x100)h(or)f Fp(X)3110 2309
y Fr(=)3168 2317 y FF(0x1000)p 3416 2345 V 826 2440 V
1150 2412 a(Interrupts)p 1729 2440 V 647 w(disabled)p
2595 2440 V 625 w(disabled)p 3416 2440 V 826 2535 V 1151
2506 a(Gate)h(A20)p 1729 2535 V 729 w FE(\030)p 2595
2535 V 752 w FF(open)p 3416 2535 V 826 2629 V 1155 2601
a(EFLA)m(GS)p 1729 2629 V 709 w(I)2135 2593 y Fr(=)2182
2601 y FF(0)p 2595 2629 V 631 w(I)2868 2593 y Fr(=)2915
2601 y FF(0,)e(VM)3088 2593 y Fr(=)3135 2601 y FF(0)p
3416 2629 V 826 2724 V 1218 2695 a(CR0)p 1729 2724 V
746 w(PE)2163 2687 y Fr(=)2209 2695 y FF(0)p 2595 2724
V 588 w(PE)2908 2687 y Fr(=)2954 2695 y FF(1,)g(PG)3105
2687 y Fr(=)3152 2695 y FF(0)p 3416 2724 V 826 2819 V
1207 2790 a(\(E\)IP)p 1729 2819 V 781 w Fp(X)p 2595 2819
V 718 w(L)g Fo(+)g Fp(X)p 3416 2819 V 826 2913 V 1238
2885 a FF(CS)p 1729 2913 V 768 w Fp(L=)p Fo(16)p 2595
2913 V 507 w FF(0,)h(4GB,)f(32-bit)j(e)o(x)o(ec)p 3416
2913 V 826 3008 V 1144 2979 a(SS,DS,ES)p 1729 3008 V
721 w FE(\030)p 2595 3008 V 569 w FF(0,)d(4GB,)h(read/write)p
3416 3008 V 826 3102 V 1211 3074 a(EAX)p 1729 3102 V
788 w FE(\030)p 2595 3102 V 625 w FF(0x2B)n(ADB002)p
3416 3102 V 826 3197 V 1213 3169 a(EBX)p 1729 3197 V
790 w FE(\030)p 2595 3197 V 2962 3145 a Fm(\003)2998
3169 y Fp(P)p 3416 3197 V 828 3200 2590 4 v 826 3295
4 95 v 1164 3267 a FE(h)p Fp(P)25 b Fo(+)16 b(0)p FE(i)p
1729 3295 V 2595 3295 V 1506 w(\030)h FF(OR)g(1)p 3416
3295 V 826 3390 V 1164 3361 a FE(h)p Fp(P)25 b Fo(+)16
b(4)p FE(i)p 1729 3390 V 729 w FF(n/a)p 2595 3390 V 492
w(belo)n(w)j(640)e(K)f(mem)h(in)g(K)p 3416 3390 V 826
3484 V 1164 3456 a FE(h)p Fp(P)25 b Fo(+)16 b(8)p FE(i)p
1729 3484 V 2595 3484 V 1320 w FF(be)o(yond)j(1M)d(mem)h(in)g(K)p
3416 3484 V 828 3488 2590 4 v 826 3582 4 95 v 877 3554
a(all)h(remaining)h(re)o(gisters)g(&)d(\003ags)p 1729
3582 V 2595 3582 V 3416 3582 V 826 3677 V 967 3649 a(\(general,)j
(\003oating)g(point,)p 1729 3677 V 546 w FE(\030)p 2595
3677 V 789 w(\030)p 3416 3677 V 826 3772 V 924 3743 a
FF(ESP)-7 b(,)15 b(xDT)-5 b(,)16 b(TR,)g(CRx,)h(DRx\))p
1729 3772 V 2595 3772 V 3416 3772 V 828 3775 2590 4 v
447 3923 a FI(L4)i(relocates)f(itself)i(to)f(0x1000,)d(enters)j
(protected)e(mode)h(if)i(started)e(in)h(real)g(mode,)f(enables)h
(paging)e(and)i(initializes)322 4023 y(itself.)2081 5620
y(39)p eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF
